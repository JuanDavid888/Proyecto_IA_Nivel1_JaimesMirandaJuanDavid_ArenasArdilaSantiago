{
  "name": "AgendaBot",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -7024,
        3216
      ],
      "id": "59f9bd30-fe26-48de-883c-08ef73f721fa",
      "name": "Telegram Trigger",
      "webhookId": "c417538b-5766-4202-88a3-1dd12713d5ef",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.message.chat.first_name }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -6816,
        3216
      ],
      "id": "9c086f7d-2af9-4fd4-9b71-f7848759fef8",
      "name": "Update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -6608,
        3216
      ],
      "id": "88913d81-09af-4ff2-a209-5a0b3d5686ca",
      "name": "Get row(s) in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "186bad57-c7b2-4213-9622-8703c693f1ea"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "72a54972-047c-4a0d-918e-ade3f6c74074",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "empty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "8abed294-fd72-4894-9012-22363b325ad7",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "MENU",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "aeafb69b-8506-4933-86e2-a2cb79f7967e",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "6d37cf9b-3ea7-4aa2-a6ed-58e4c2c4bf5e",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA_EDIT",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "937947ba-45cb-4229-b13e-7421e3a92314",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "eb2a8ce0-3b63-4d7f-a472-e94f0775ef14",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "472d10a6-cf31-4632-830f-8f5a2f6315ea",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREAS",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "5b9c839b-26e1-4d3f-8181-4d955c6d5d68",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREA_EDIT",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "8da963bd-52aa-41ac-9e5d-74c2c49810fc",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREA_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "3259c32f-a4f1-4da4-93fb-b7143a9b6c4a",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREA_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0e4bcae4-f384-4d05-9124-ccc3f6e3586a",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "HABITOS",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "cf4d8a0a-683d-4f7c-8509-bcaf3ac1b8ff",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "HABITO_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "6cc4bb38-5a0b-4778-ae3e-eb9d43fa6809",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "HABITO_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -6384,
        2416
      ],
      "id": "e076b376-727e-4ef4-ad11-2c3701a31a96",
      "name": "Switch"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5520,
        320
      ],
      "id": "4e39bc87-ea25-47ed-ac9d-72a8a2197b25",
      "name": "Update row in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5824,
        832
      ],
      "id": "d37a5a6e-8c25-46ac-b856-59c239af1504",
      "name": "Send a text message",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "content": "Si el usuario ingresa \"9\" se retornar√° el mensaje de MEN√ö PRINCIPAL en cualquier parte del programa",
        "height": 96,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -6176,
        800
      ],
      "typeVersion": 1,
      "id": "ed66a253-1004-4dcb-a2f5-5c25d2c83aa8",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Hola, soy AgendaBot üëã\n\nEstoy aqu√≠ para ayudarte a organizar tus citas, tareas y recordatorios\nde forma sencilla y sin complicaciones.\n\nPuedes escribirme en cualquier momento.\nPara avanzar, solo tienes que escribir el n√∫mero de la opci√≥n que quieras usar.\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nMensaje de orientaci√≥n:\n\nTip r√°pido: escribe solo el n√∫mero (por ejemplo: 1) y presiona enviar.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5824,
        1024
      ],
      "id": "753711b1-a2c4-471e-9989-5b63ba7c3e3b",
      "name": "Send a text message1",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "content": "Cuando el usuario inicia por primera vez se otorgar√° el estado de BIENVENIDA, que es el mensaje de MEN√ö PRINCIPAL con un mensaje especial",
        "height": 112,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -6176,
        992
      ],
      "typeVersion": 1,
      "id": "b9c0b052-05cc-4ea5-b987-30bb3ae9d4d1",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "0",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "7b4ea7af-adc0-4372-b1ab-6544558c5fe0"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "4f23485a-7f79-47b0-8ab9-0251efd9c614",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "30afad59-fb6a-488e-ae09-a9fb3bab0499",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a8cb77bc-3bbd-4860-848a-687f4370ea7b",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "d6851864-6261-491d-bdb6-a2d2b809bd1b",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0ef506af-ce13-4342-a5d2-a95da5c228ad",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "52dfa6a5-59e1-4f91-a6ec-26f5f5bde465",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "6",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "32470be4-638a-4031-8607-9491ea88d98f",
                    "leftValue": "",
                    "rightValue": "7",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "585d96b9-2639-4e90-83b2-a683e1581626",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "8",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "580946f9-9f32-4ed2-80f1-2e9bc69af212",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "0, 1, 2, 3, 4, 5, 6, 7, 8",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -5392,
        960
      ],
      "id": "9c772295-0bdc-4805-ac14-7d9305481173",
      "name": "Switch1"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Este bot funciona con men√∫s num√©ricos y pasos guiados, para que todo sea claro y sin complicaciones. Ten en cuenta lo siguiente:\n\n1Ô∏è‚É£ C√≥mo navegar por los men√∫s\n\nCuando veas un men√∫, responde solo con el n√∫mero de la opci√≥n que quieras usar\nüëâ Ejemplo: 1, 3, 6\n\nNo escribas texto adicional ni comandos como /start.\n\nEl bot siempre te dir√° d√≥nde est√°s y qu√© opciones tienes.\n\nüí° Recomendaci√≥n: si no sabes por d√≥nde empezar, el bot siempre te sugerir√° una opci√≥n.\n\n2Ô∏è‚É£ Ingreso de datos paso a paso\n\nCuando se pida una fecha, usa el formato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\nPara hora, usa formato 24 horas: HH:MM\nEjemplo: 14:30\n\nSi se pide texto (nombre, motivo, t√≠tulo), escribe la informaci√≥n tal cual.\n\nCuando haya opciones, elige solo el n√∫mero correspondiente.\n\nEl bot validar√° la informaci√≥n y te avisar√° si algo no es correcto.\n\n3Ô∏è‚É£ Cancelar o volver atr√°s\n\nEn la mayor√≠a de los pasos puedes escribir:\n9 ‚Üí Cancelar o volver\n\nEl bot nunca guardar√° nada sin pedirte confirmaci√≥n previa.\n\n4Ô∏è‚É£ Si algo no sale como esperas\n\nSi ingresas una opci√≥n inv√°lida, el bot te avisar√° y te mostrar√° nuevamente el men√∫.\n\nTodas las acciones quedan registradas para mantener el control y evitar errores.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5232,
        176
      ],
      "id": "a4211c9a-d0e8-4525-a1fd-1a198fca3867",
      "name": "Send a text message2",
      "webhookId": "2f72050a-901e-4314-9988-37623d8cb50d",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5056,
        176
      ],
      "id": "d07f5aa5-1297-4382-a793-7600385c9ba0",
      "name": "Send a text message3",
      "webhookId": "e1b34d6a-5286-4830-a7ee-7e8c8ee6f4f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "content": "### Opciones Mne√∫\nIndicaciones iniciales de cada opci√≥n",
        "height": 96,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -5232,
        64
      ],
      "typeVersion": 1,
      "id": "aadbff08-f0ed-47d8-a3e0-ddb65cf373ea",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5648,
        1024
      ],
      "id": "1271bcc5-e2aa-48a2-bc1a-0192a7219e6d",
      "name": "Update row in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5200,
        368
      ],
      "id": "1fb580e9-e7eb-4f7a-9385-401da6330e02",
      "name": "Send a text message4",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "retryOnFail": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ principal\nOpciones disponibles: 0 al 8",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5072,
        1856
      ],
      "id": "aa96b2ec-71d6-4247-8227-eafdf2ad9e2f",
      "name": "Send a text message5",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4816,
        1856
      ],
      "id": "325e000e-7772-4c33-8986-2329291fc5ed",
      "name": "Send a text message6",
      "webhookId": "e1b34d6a-5286-4830-a7ee-7e8c8ee6f4f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "AGENDA"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4992,
        368
      ],
      "id": "0905a6e5-3116-4da0-ba33-8bdfcf386d5d",
      "name": "Update row in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c0f971a3-78c3-47f7-bd13-0ccf2ee00f7a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b974eb1-a693-4df3-989d-f7de83649604",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "bcb58231-fbde-4cbf-a34e-0210b6ce55d1",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 4, 5, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -4064,
        528
      ],
      "id": "618ea930-a337-47a7-8d7d-495aa7e771f4",
      "name": "Switch2"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ agenda\nOpciones disponibles: 1 al 5 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -3808,
        912
      ],
      "id": "e153421e-3a2f-4595-8a0b-34a19c13c95f",
      "name": "Send a text message7",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -3552,
        912
      ],
      "id": "bb705ebc-446a-44fc-9a65-54d2ef6eb14d",
      "name": "Send a text message8",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu cita.\n\nPaso 1 de 6\n¬øCu√°l es la fecha de la cita?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -3808,
        0
      ],
      "id": "8a82476f-dc33-4e6b-be25-a723037d072a",
      "name": "Send a text message9",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3552,
        0
      ],
      "id": "f529127b-aa22-4e18-b99d-09ac8b5cb951",
      "name": "Update row in sheet4",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -4464,
        1600
      ],
      "id": "d5661797-43de-41b2-8cd0-d86cc6f0ab6e",
      "name": "If"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9b0b7bf2-3274-407a-950e-8392c39aa912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0a90db21-1ee3-4016-ae6e-4dfd7eb90912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 5,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b6c711aa-8613-45b0-8d4a-cdfe694a3fb5",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 6,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -3504,
        1232
      ],
      "id": "941f2e94-694b-41d7-92c8-304237aa32a2",
      "name": "Switch3"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "0acfabf8-dc11-4cc1-9cdf-5ac6fb3a723b",
      "name": "Validar formato YYYY-MM-DD",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -2656,
        736
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 6\n¬øA qu√© hora ser√° la cita?\n\nFormato 24 horas (HH:MM)\nEjemplo: 14:30\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "57c4efc4-7d0f-4488-910b-acfb4c706464",
      "name": "Telegram OK",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1680,
        416
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "160a8597-6a2f-421f-91ac-4e1bb5c654e2",
      "name": "Telegram Error",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -2176,
        848
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -1936,
        416
      ],
      "id": "85447c84-8a77-4a36-9d4d-9961e70d9edf",
      "name": "Update row in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^([01]\\d|2[0-3]):([0-5]\\d)$"
            }
          ]
        }
      },
      "id": "f68d2304-299f-46dc-914e-fefb0b208944",
      "name": "Validar formato HH:MM",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -2672,
        1168
      ]
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -1920,
        1056
      ],
      "id": "80798b9a-6930-487e-bd39-27310d61521c",
      "name": "Update row in sheet6",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2176,
        1056
      ],
      "id": "a7dac148-0e28-4b52-88b2-56f57e1f449e",
      "name": "Get row(s) in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:HH:MM\nEjemplo: 14:20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "7f817848-b5bd-4154-9006-682bf33ac933",
      "name": "Telegram Error1",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -2176,
        1248
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2240,
        1408
      ],
      "id": "3f733316-1c7f-4cb4-a4c7-04e4dd541f7d",
      "name": "Update row in sheet7",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2496,
        1408
      ],
      "id": "8a764598-8408-4ee9-ba4a-20fead8c3687",
      "name": "Get row(s) in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 4 de 6\nCu√©ntame brevemente el motivo de la cita.\n\nEjemplo: Asesor√≠a t√©cnica\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "19e8bc7e-92b5-4b3c-9423-ae2c5802d791",
      "name": "Telegram OK2",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -2000,
        1408
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "5",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2016,
        1616
      ],
      "id": "e402fbb5-7022-4ce4-af95-e4026f257461",
      "name": "Update row in sheet8",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2272,
        1616
      ],
      "id": "3c7dbfe2-eaea-4b89-930d-1c3c73aa10a9",
      "name": "Get row(s) in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 5 de 6\n¬øC√≥mo ser√° la atenci√≥n?\n\n1. Presencial\n2. Virtual\n3. Llamada\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "693d7c2f-eb47-49e8-a7de-a1157bfc83f5",
      "name": "Telegram OK3",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1776,
        1616
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "6",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $json.datos_parciales_4 }}",
            "datos_parciales_5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_6": "=Presencial"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2064,
        1840
      ],
      "id": "fe3674d6-9f42-41c3-80e7-f0a7c139c955",
      "name": "Update row in sheet10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2304,
        1840
      ],
      "id": "496365a0-d14d-4720-8bf8-c2e0ad7a0199",
      "name": "Get row(s) in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu cita:\n\nFecha: {{ $json.datos_parciales_1 }}\nHora: {{ $json.datos_parciales_2 }}\nCliente: {{ $json.datos_parciales_3 }}\nMotivo: {{ $json.datos_parciales_4 }}\nCanal: Presencial\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "054a9bf3-160c-44b3-a1ed-371b08335b6e",
      "name": "Telegram OK5",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1824,
        1840
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "2149ed1c-6fc1-4214-9bb6-9d73396df7e2"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c3020235-3026-4758-ba53-3259646bba63",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "81655df1-f7a4-4730-bcb6-91267c74645f",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -3088,
        2832
      ],
      "id": "584b940d-c8fd-470c-bb36-8a3d90815067",
      "name": "Switch4",
      "executeOnce": true
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e49fdbbd-e95e-42b7-8e48-8b3cb29491bd"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "58855023-5cd0-49ff-8a4e-042adcdf4212",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b8fa012e-27ac-4322-82c7-41c4c9cad1fa",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "40cb23eb-e6be-426c-a651-7940bc7f2264",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -2688,
        2032
      ],
      "id": "cde7fc32-4c21-4e75-ba01-56711bf51f78",
      "name": "Switch5"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "6",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $json.datos_parciales_4 }}",
            "datos_parciales_5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_6": "=Virtual"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2064,
        2016
      ],
      "id": "d90087fd-3c67-4696-ac1e-4f291b842f9d",
      "name": "Update row in sheet11",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2320,
        2016
      ],
      "id": "5801ef9e-34f8-4de6-86f1-2fc28d37538c",
      "name": "Get row(s) in sheet6",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu cita:\n\nFecha: {{ $json.datos_parciales_1 }}\nHora: {{ $json.datos_parciales_2 }}\nCliente: {{ $json.datos_parciales_3 }}\nMotivo: {{ $json.datos_parciales_4 }}\nCanal: Virtual\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "75283e0b-c06d-4906-a632-9bb4ddedcdc5",
      "name": "Telegram OK6",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1824,
        2016
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "6",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $json.datos_parciales_4 }}",
            "datos_parciales_5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_6": "=Llamada"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2064,
        2208
      ],
      "id": "4cdf0e35-75af-49c3-b122-1279491d0c72",
      "name": "Update row in sheet12",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2320,
        2208
      ],
      "id": "ffd97d33-f91d-4009-93c2-c1f712c3d43c",
      "name": "Get row(s) in sheet7",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu cita:\n\nFecha: {{ $json.datos_parciales_1 }}\nHora: {{ $json.datos_parciales_2 }}\nCliente: {{ $json.datos_parciales_3 }}\nMotivo: {{ $json.datos_parciales_4 }}\nCanal: Llamada\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "a04feda1-e74a-4ce3-b71f-0e2737e5f398",
      "name": "Telegram OK7",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1824,
        2208
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no v√°lida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -2320,
        2400
      ],
      "id": "99fd84ad-d716-4c68-b5c4-44a192ea5c8e",
      "name": "Send a text message10",
      "webhookId": "537b6979-63b9-49c5-8610-35f1ef19571a",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2208,
        2736
      ],
      "id": "f1dc057c-373f-4f4b-a98a-40432a35fbd8",
      "name": "Get row(s) in sheet8",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "hora": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_2 }}",
            "fecha": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_1 }}",
            "nombre": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_3 }}",
            "motivo": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_4 }}",
            "canal": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_6 }}",
            "timestamp_creacion": "={{ $now }}",
            "estado": "={{ $json.estado }}",
            "creado_por": "={{ $('Get row(s) in sheet8').item.json.telegram_user }}",
            "id_cita": "={{ $('Code in JavaScript').item.json.id_cita }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -1696,
        2736
      ],
      "id": "3cf19dc8-8f3f-42c6-80e6-b89aac24ca9a",
      "name": "Append row in sheet",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}\n",
        "text": "Agenda completada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -1472,
        2720
      ],
      "id": "460122a7-d551-451b-9032-d622cd8f3d0e",
      "name": "Send a text message11",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -1056,
        2736
      ],
      "id": "3e08d0c2-fb91-4942-82c5-c25192614c21",
      "name": "Update row in sheet13",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2688,
        3104
      ],
      "id": "5c5fe18f-060e-4009-ac3f-13b73314c0c4",
      "name": "Update row in sheet14",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Cancelado",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -2432,
        3104
      ],
      "id": "05939583-4bea-4ae1-ad3a-d4a509459478",
      "name": "Send a text message12",
      "webhookId": "dc8a9a45-0711-45a4-829a-7ab666828377",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2688,
        2912
      ],
      "id": "616c2925-caed-4743-bf6d-b3211681cda9",
      "name": "Update row in sheet15",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu cita.\n\nPaso 1 de 6\n¬øCu√°l es la fecha de la cita?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -2480,
        2912
      ],
      "id": "8d6e00ec-cf56-4c4d-b296-8ff927682a44",
      "name": "Send a text message13",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 6\n¬øA nombre de qui√©n es la cita?\n\nEscribe el nombre completo.\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "3bf7560f-1b28-4867-98fd-d85966511fff",
      "name": "Telegram OK1",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1680,
        1056
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu tarea.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva tarea\n2. Consultar tus tareas\n3. Reprogramar una tarea\n4. Cancelar una tarea\n5. Marcar una tarea como completada\n9. Volver al men√∫ principal",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5184,
        560
      ],
      "id": "665764cb-eda4-437d-bd42-d61e2badbd96",
      "name": "Send a text message14",
      "webhookId": "928178ae-ec5a-433b-af9a-0e3142214c88",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "TAREAS"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4976,
        560
      ],
      "id": "569d0cb4-5d56-44f5-b7d9-433bd42710b3",
      "name": "Update row in sheet16",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2688,
        2736
      ],
      "id": "55b42da5-4aab-4ed6-8109-5b5ea686aba3",
      "name": "Get row(s) in sheet4",
      "alwaysOutputData": true,
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\n\n// Extraer IDs v√°lidos\nconst ids = rows\n  .map(r => r.json.id_cita)\n  .filter(id => typeof id === 'string' && /^CITA-\\d+$/.test(id));\n\n// Si no hay IDs v√°lidos, iniciar contador\nif (ids.length === 0) {\n  return [{\n    json: {\n      id_cita: 'CITA-001'\n    }\n  }];\n}\n\n// Ordenar y obtener el √∫ltimo\nids.sort((a, b) => {\n  const numA = parseInt(a.split('-')[1], 10);\n  const numB = parseInt(b.split('-')[1], 10);\n  return numA - numB;\n});\n\nconst lastId = ids[ids.length - 1];\nconst lastNumber = parseInt(lastId.split('-')[1], 10);\nconst newNumber = lastNumber + 1;\n\n// Formato final\nconst newId = `CITA-${String(newNumber).padStart(3, '0')}`;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    id_cita: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2480,
        2736
      ],
      "id": "3921c91a-811b-458a-82c9-89566c958bde",
      "name": "Code in JavaScript",
      "executeOnce": true
    },
    {
      "parameters": {
        "jsCode": "\nconst fecha = $input.first().json.datos_parciales_1; // YYYY-MM-DD\nconst hora = $input.first().json.datos_parciales_2;  // HH:mm\n\nif (!fecha || !hora) {\n  return [{\n    json: {\n      estado: 'Pendiente'\n    }\n  }];\n}\n\nconst fechaCita = new Date(`${fecha}T${hora}:00`);\n\nconst ahora = new Date();\n\nconst estado = fechaCita < ahora ? 'Completada' : 'Pendiente';\n\n\nreturn [{\n  json: {\n    estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1968,
        2736
      ],
      "id": "17ee7aab-3745-4392-8f9d-d770687e2790",
      "name": "Code in JavaScript1",
      "executeOnce": true
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -800,
        2656
      ],
      "id": "4f399847-7540-4991-a8bb-48cb494894ca",
      "name": "Send a text message22",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1248,
        2736
      ],
      "id": "e41d744e-d9d4-48af-9e46-94bb9b05f35b",
      "name": "Edit Fields",
      "executeOnce": true
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3776,
        208
      ],
      "id": "aeaf8dd3-2d14-4007-ab37-4f9b270ee91f",
      "name": "Get row(s) in sheet14",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "\nconst pendientes = items\n  .map(i => i.json)\n  .filter(cita => cita.estado === 'Pendiente');\n\nif (pendientes.length === 0) {\n  return [{\n    json: {\n      mensaje: 'No tienes citas pendientes en la agenda.'\n    }\n  }];\n}\n\nlet mensaje = 'üìÖ *Citas pendientes*\\n\\n';\n\npendientes.forEach((cita, index) => {\n  mensaje +=\n    `${index + 1}. *${cita.id_cita}*\\n` +\n    `${cita.nombre}\\n` +\n    `${cita.fecha} ‚è∞ ${cita.hora}\\n` +\n    `${cita.motivo}\\n` +\n    `${cita.canal}\\n\\n`;\n});\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3536,
        208
      ],
      "id": "e9c9c0c5-f45a-4880-b029-58df29818b4d",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -3328,
        208
      ],
      "id": "1049ffe7-a89c-4a27-bb8c-5fbe074d92e4",
      "name": "Send a text message23",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3120,
        208
      ],
      "id": "2e33b8e7-c350-49b1-a9d1-a7d41f4596d9",
      "name": "Update row in sheet9",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "content": "Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "height": 80,
        "width": 368
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -4288,
        272
      ],
      "typeVersion": 1,
      "id": "c2b977a2-76d1-4a1a-88ad-a1bce35ebcf1",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la cita que deseas reprogramar.\nEjemplo: CITA-003\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -3776,
        400
      ],
      "id": "63ff2b3f-d2b2-41d3-9f4b-1e1a9329ad05",
      "name": "Send a text message24",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": ""
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3568,
        400
      ],
      "id": "678c9671-f2cc-4f70-a4b3-d95ff2c24144",
      "name": "Update row in sheet20",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5664,
        4160
      ],
      "id": "3267e70a-4bc6-4ee7-b67b-9bc3a9db8c47",
      "name": "Get row(s) in sheet15",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst citas = items.map(i => i.json);\n\nconst cita = citas.find(c => c.id_cita === idIngresado);\n\nif (!cita) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una cita con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (cita.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar citas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_cita: cita.id_cita,\n    rowNumber: cita.rowNumber,\n    estado_actual: cita.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5424,
        4160
      ],
      "id": "bbbdc702-f073-4435-8548-dde07fe262ce",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -5216,
        4160
      ],
      "id": "60867bf5-2e08-47e8-94de-0df15c7a0532",
      "name": "If2"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "AGENDA_EDIT",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "AGENDA_EDICION"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4800,
        4224
      ],
      "id": "d2fd8c2d-860d-43c9-849d-98b68f2f6b5d",
      "name": "Update row in sheet21",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -6064,
        4512
      ],
      "id": "e3f6541f-8062-4a4f-8d53-6cda92c29262",
      "name": "If3"
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript3').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4800,
        4016
      ],
      "id": "5e854b56-cb44-42db-bbb5-751c3f9a41a2",
      "name": "Send a text message25",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øQu√© deseas modificar de la cita {{$json.datos_parciales_1}}?\n\n1) Fecha\n2) Hora\n3) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4560,
        4224
      ],
      "id": "240f68c7-9fa9-4978-933d-d3f2bf2c9f26",
      "name": "Send a text message26",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "ec675a21-b990-4a0b-b606-021f5e25e71e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "7b9cae24-63de-4dba-82a2-9102b9d8c34b",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "dca7b002-8fba-4618-add1-6e508cc3f0ef",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -5152,
        4640
      ],
      "id": "aae114d9-5083-4196-b337-7b4c3b9e582d",
      "name": "Switch10"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d9a64f2e-d27d-4b36-9cb0-93827b2a3636",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -5648,
        4928
      ],
      "id": "fe5ff619-8574-4b93-86ab-c418dcd57800",
      "name": "If4"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "4045417b-b2e2-479f-bea4-f8e86cc03914",
      "name": "Validar formato YYYY-MM-DD2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -4832,
        5104
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha actualizada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "1801b8ae-7c3e-4c11-8ac1-ed2ef5ca1a5c",
      "name": "Telegram OK4",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -3120,
        4976
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20\nIntenta nuevamente.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "72e271cf-20d1-4502-bb39-9f65d725b466",
      "name": "Telegram Error3",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -4352,
        5216
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4352,
        4976
      ],
      "id": "97c421e1-1a6f-4967-a583-25faccb769a6",
      "name": "Update row in sheet23",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ingrese la fecha.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4784,
        4416
      ],
      "id": "8f725ab1-7dc4-421a-99ba-afab4459de24",
      "name": "Send a text message27",
      "webhookId": "091ffb67-df42-49eb-a2b1-1e8a031acfc4",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet16').item.json.datos_parciales_1 }}",
            "row_number": 2,
            "datos_parciales_2": "1",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4560,
        4416
      ],
      "id": "f643ac9f-b2ba-44ce-8f22-cffeafe49d63",
      "name": "Update row in sheet29",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5360,
        4656
      ],
      "id": "7ee7095c-8d1e-45aa-a583-04ce0a7c421f",
      "name": "Get row(s) in sheet16",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ingrese la hora.\nFormato requerido:HH:MM\nEjemplo: 12:20",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4784,
        4624
      ],
      "id": "4c914041-accb-47ee-add4-a3e28ad64a1b",
      "name": "Send a text message28",
      "webhookId": "091ffb67-df42-49eb-a2b1-1e8a031acfc4",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet16').item.json.datos_parciales_1 }}",
            "row_number": 2,
            "datos_parciales_2": "2",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4576,
        4624
      ],
      "id": "7f875ae3-987f-46c3-a6df-d13fd25c3d02",
      "name": "Update row in sheet30",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4336,
        4816
      ],
      "id": "50373cab-6802-40fd-94a8-03fffdb194c0",
      "name": "Update row in sheet31",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4784,
        4816
      ],
      "id": "249826bc-f5b5-493a-9834-644c5eb28522",
      "name": "Send a text message29",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6ec5bccf-438b-4d68-8947-62e86d961fc3",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -4544,
        4816
      ],
      "id": "1d3ff471-db78-4030-b83f-4ba36f62a90d",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "74aab308-0919-4efd-b14d-4c702a1df543"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "df6b2b69-9f3c-4db6-ba69-cf31f436ee23",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -5328,
        5312
      ],
      "id": "75e2e8d9-d895-4127-9931-4c0d9d0dff87",
      "name": "Switch11"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^([01]\\d|2[0-3]):([0-5]\\d)$"
            }
          ]
        }
      },
      "id": "f0df7076-5041-487d-ba2f-a4157ce4504e",
      "name": "Validar formato HH:MM1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -4848,
        5520
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:HH:MM\nEjemplo: 14:20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "6cc2e62a-6e6c-4f87-b821-67f6bac64c70",
      "name": "Telegram Error4",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -4352,
        5600
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Hora actualizada.",
        "additionalFields": {}
      },
      "id": "d9f86037-601f-42d9-bf19-47930d63e5bd",
      "name": "Telegram OK13",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -3088,
        5408
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_cita": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "fecha": "={{ $('Update row in sheet23').item.json.datos_parciales_2 }}",
            "hora": "={{ $json.hora }}",
            "nombre": "={{ $json.nombre }}",
            "motivo": "={{ $json.motivo }}",
            "canal": "={{ $json.canal }}",
            "estado": "={{ $json.estado }}",
            "creado_por": "={{ $json.creado_por }}",
            "timestamp_creacion": "={{ $json.timestamp_creacion }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3872,
        4976
      ],
      "id": "038739e3-3f3e-41cc-9701-16431d8f674c",
      "name": "Update row in sheet33",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4368,
        5408
      ],
      "id": "ce43414d-77ba-420d-aa8a-63861421bdc8",
      "name": "Update row in sheet32",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_cita": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "fecha": "={{ $json.fecha }}",
            "hora": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2 }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3872,
        5408
      ],
      "id": "801f449b-fca6-4e03-bba5-e61b4faa2dd6",
      "name": "Update row in sheet34",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a039b49-2c5e-4e19-8dc1-35eabd92e9e2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3616,
        4976
      ],
      "id": "662b5c3b-757a-4b8e-81b8-6f25d69ee5b6",
      "name": "Edit Fields3"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3360,
        4976
      ],
      "id": "c46acda0-692a-4b9a-a50e-e6016e1c654d",
      "name": "Update row in sheet35",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a039b49-2c5e-4e19-8dc1-35eabd92e9e2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3616,
        5408
      ],
      "id": "bb8006d6-b160-4458-a7ca-ce62dffca238",
      "name": "Edit Fields4"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3360,
        5408
      ],
      "id": "6708d12c-4360-45d7-835c-fb2ba31554b5",
      "name": "Update row in sheet36",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -2896,
        4976
      ],
      "id": "33728803-3fc9-46a4-bf50-4d9137a979e7",
      "name": "Send a text message30",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -2864,
        5408
      ],
      "id": "ca732351-81ee-4974-b10a-ae22478e023c",
      "name": "Send a text message31",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9825738e-fa38-494e-9dec-f8d4c8bff8d2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -5680,
        560
      ],
      "id": "0cae2d1a-890a-430f-9521-4972356a336c",
      "name": "Edit Fields5"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4128,
        5408
      ],
      "id": "0bffc8d9-f00e-4b0f-9cfb-927241315870",
      "name": "Get row(s) in sheet17",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4112,
        4976
      ],
      "id": "5a0349fd-12a7-49cf-8b7c-9d8ea5fa4d73",
      "name": "Get row(s) in sheet18",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la cita que deseas eliminar.\nEjemplo: CITA-003\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -3776,
        576
      ],
      "id": "c323537d-3f60-4285-b157-c119abdfcc48",
      "name": "Send a text message32",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3568,
        576
      ],
      "id": "036b9479-2e61-4697-bec3-8b15f00f95b9",
      "name": "Update row in sheet37",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5744,
        5968
      ],
      "id": "a3ccbf70-5b07-4df6-9137-b6f10c3bc301",
      "name": "Get row(s) in sheet19",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst citas = items.map(i => i.json);\n\nconst cita = citas.find(c => c.id_cita === idIngresado);\n\nif (!cita) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una cita con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (cita.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar citas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_cita: cita.id_cita,\n    rowNumber: cita.rowNumber,\n    estado_actual: cita.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5504,
        5968
      ],
      "id": "4f89577e-813a-4d16-8019-6bf6cdc94999",
      "name": "Code in JavaScript4"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -5296,
        5968
      ],
      "id": "fab3cb71-d72f-4561-983a-91b8dc6294b2",
      "name": "If5"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "AGENDA_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE2"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4880,
        6032
      ],
      "id": "dfd7c713-98f0-4870-ad1e-c4bde1121fb3",
      "name": "Update row in sheet38",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -6144,
        6320
      ],
      "id": "ca11b0fb-78e9-4107-88cb-01a4d5bbd7b8",
      "name": "If6"
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript4').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4880,
        5824
      ],
      "id": "9acf5543-0860-4dbc-9d59-8cff4e0e353d",
      "name": "Send a text message33",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4640,
        6032
      ],
      "id": "3a04cdb1-1c0e-4a88-8cdf-acea28110d7d",
      "name": "Send a text message34",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4864,
        6544
      ],
      "id": "16d153ce-b3c7-42dc-9d21-0a157abd4c37",
      "name": "Delete rows or columns from sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -5600,
        6688
      ],
      "id": "5260179d-887c-42a5-a41e-14be45f9808d",
      "name": "If7"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5088,
        6544
      ],
      "id": "f7dfe071-898e-4fae-b963-a27aae6d6a03",
      "name": "Get row(s) in sheet20",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5328,
        6544
      ],
      "id": "d75a6fdd-4698-44f7-b3b4-cb2faddb2ff9",
      "name": "Get row(s) in sheet21",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Registro eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4272,
        6544
      ],
      "id": "0274fda2-bd6b-45f2-876e-086bc282ea6b",
      "name": "Send a text message35",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4064,
        6544
      ],
      "id": "190e6b6c-5ff1-450e-8b29-93039dee0848",
      "name": "Send a text message36",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5344,
        6816
      ],
      "id": "27b70486-0366-44a6-9fb6-6e6d86b557a3",
      "name": "Send a text message37",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4656,
        6816
      ],
      "id": "9bf92e29-4ec9-4d68-8d2e-551183c61a2d",
      "name": "Send a text message38",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4464,
        6544
      ],
      "id": "093b7016-1858-47ae-b4f3-378308523a2c",
      "name": "Update row in sheet39",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -4656,
        6544
      ],
      "id": "6a8e952f-23bc-4410-a110-955abf88f0f7",
      "name": "Edit Fields6"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4896,
        6816
      ],
      "id": "14987d6b-80d4-46c5-b870-1cbdb40f89dc",
      "name": "Update row in sheet40",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -5088,
        6816
      ],
      "id": "07e74560-e545-4c3d-a502-0610dfb4e7d9",
      "name": "Edit Fields7"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -3584,
        752
      ],
      "id": "97afad3d-2318-4aab-947c-bb2323384c8e",
      "name": "Update row in sheet41",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -6192,
        7440
      ],
      "id": "ef783489-9458-4e9f-bb0c-bbf2f2f8d92d",
      "name": "If8"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "estado",
              "lookupValue": "Pendiente"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5664,
        7264
      ],
      "id": "29318494-2460-42f2-ba28-63eb96e0477e",
      "name": "Get row(s) in sheet22",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst citas = items.map(i => i.json);\n\nconst cita = citas.find(c => c.id_cita === idIngresado);\n\nif (!cita) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una cita con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (cita.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar citas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_cita: cita.id_cita,\n    rowNumber: cita.rowNumber,\n    estado_actual: cita.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5424,
        7264
      ],
      "id": "a000f268-efe1-44be-9da6-ec074c995f05",
      "name": "Code in JavaScript5"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -5216,
        7264
      ],
      "id": "bbfad447-6039-42c9-9138-6699e128ee8f",
      "name": "If9"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "AGENDA_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4800,
        7328
      ],
      "id": "4c6527b3-a76e-4b1f-992e-2d403d9ec8ea",
      "name": "Update row in sheet42",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript5').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4800,
        7120
      ],
      "id": "f333d45f-d88f-4fdb-a7bb-556378df6938",
      "name": "Send a text message40",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4560,
        7328
      ],
      "id": "ea4ac6ef-08e0-43cf-97a5-6ddbbfd1324c",
      "name": "Send a text message41",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5616,
        7616
      ],
      "id": "fcba89a9-9943-4307-9069-34c5587c2100",
      "name": "Get row(s) in sheet23",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4608,
        7616
      ],
      "id": "cdd1fd1b-8954-4e50-99f6-b89a9f2daac5",
      "name": "Send a text message42",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4400,
        7616
      ],
      "id": "1d7a83a9-7dd7-4eb7-bfca-c09b4f2c8586",
      "name": "Send a text message43",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4800,
        7616
      ],
      "id": "2e8c6819-f2d7-4831-8b3a-16274ed0ec9c",
      "name": "Update row in sheet43",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -4992,
        7616
      ],
      "id": "4344cb21-acf2-412e-8bb2-f5561947e9d9",
      "name": "Edit Fields8"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la cita que deseas completar.\nEjemplo: CITA-003\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -3792,
        752
      ],
      "id": "d13efcdf-a61a-4461-8ae5-3b8b2d837b26",
      "name": "Send a text message39",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_cita": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "estado": "Completada",
            "fecha": "={{ $json.fecha }}",
            "hora": "={{ $json.hora }}",
            "nombre": "={{ $json.nombre }}",
            "motivo": "={{ $json.motivo }}",
            "canal": "={{ $json.canal }}",
            "creado_por": "={{ $json.creado_por }}",
            "timestamp_creacion": "={{ $json.timestamp_creacion }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5296,
        7616
      ],
      "id": "0ba2db99-2821-4420-beb7-703fca31c729",
      "name": "Update row in sheet44",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "30a49837-b923-41ce-88cb-942693e24e67",
              "leftValue": "={{ $json.valido }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -2192,
        576
      ],
      "id": "bee0eb0d-37d6-4d7c-8868-5f6052091338",
      "name": "If10"
    },
    {
      "parameters": {
        "jsCode": "const fechaIngresada = new Date($('Telegram Trigger').first().json.message.text);\nconst hoy = new Date();\n\n\nfechaIngresada.setHours(0,0,0,0);\nhoy.setHours(0,0,0,0);\n\nif (fechaIngresada < hoy) {\n  return [{\n    json: {\n      valido: false,\n      error: 'No puedes agendar citas en fechas pasadas'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    valido: true,\n    fecha: $json.fecha\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2352,
        576
      ],
      "id": "62c6ea7f-45a7-41ec-a618-0039f07bf96d",
      "name": "Code in JavaScript9"
    },
    {
      "parameters": {
        "chatId": "={{ $node['Telegram Trigger'].json.message.chat.id }}",
        "text": "Formato invalido, no puedes agendar citas en el pasado. Int√©ntalo de nuevo o escribe 9 para salir",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -1936,
        672
      ],
      "id": "2ed78e85-0010-4057-a873-0457eff7f91f",
      "name": "Send a text message19",
      "webhookId": "48a8ad57-682c-4bfe-b1e6-51ce21ca9c17",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -384,
        1408
      ],
      "id": "605158b4-ce67-4182-b60a-e42291c857ed",
      "name": "If1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c0f971a3-78c3-47f7-bd13-0ccf2ee00f7a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b974eb1-a693-4df3-989d-f7de83649604",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "bcb58231-fbde-4cbf-a34e-0210b6ce55d1",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 4, 5, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -192,
        368
      ],
      "id": "e190ae93-1258-4877-bce1-1a65592a1f0e",
      "name": "Switch6"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu tarea.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la tarea?\n\nEjemplo: Estudiar para un examen\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16,
        -128
      ],
      "id": "3922809c-54ba-4916-87ff-fab71df4de3f",
      "name": "Send a text message15",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ tareas\nOpciones disponibles: 1 al 5 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        32,
        864
      ],
      "id": "3a9b30ae-bf21-43c3-96b0-47ddab73481e",
      "name": "Send a text message16",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        240,
        864
      ],
      "id": "cab3d2fc-3b86-4222-9d4e-dbf428470fa1",
      "name": "Send a text message17",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "1",
            "datos_parciales_1": "=",
            "timestamp_ultima_interaccion": "{{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        208,
        -128
      ],
      "id": "8ed0c32f-7849-4ad6-baec-874519360749",
      "name": "Update row in sheet22",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const tareas = items.map(i => i.json);\n\nconst pendientes = tareas.filter(t => t.estado === 'Pendiente');\nconst completadas = tareas.filter(t => t.estado === 'Completada');\n\nlet mensaje = 'üìã *Resumen de tareas*\\n\\n';\n\nif (pendientes.length === 0 && completadas.length === 0) {\n  mensaje += 'No tienes tareas registradas.';\n} else {\n  if (pendientes.length > 0) {\n    mensaje += 'üìÖ *Tareas pendientes*\\n\\n';\n    pendientes.forEach((tarea, index) => {\n      mensaje +=\n        `${index + 1}. *${tarea.id_tarea}*\\n` +\n        `${tarea.titulo}\\n` +\n        `${tarea.prioridad}\\n` +\n        `${tarea.fecha_objetivo}\\n\\n`;\n    });\n  } else {\n    mensaje += 'üìÖ *Tareas pendientes*\\n\\nNo tienes tareas pendientes.\\n\\n';\n  }\n\n  if (completadas.length > 0) {\n    mensaje += '‚úÖ *Tareas completadas*\\n\\n';\n    completadas.forEach((tarea, index) => {\n      mensaje +=\n        `${index + 1}. *${tarea.id_tarea}*\\n` +\n        `${tarea.titulo}\\n` +\n        `${tarea.prioridad}\\n` +\n        `${tarea.fecha_objetivo}\\n\\n`;\n    });\n  }\n}\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        256,
        96
      ],
      "id": "4ca1c3e4-c3a9-415e-ad03-101c42a97ab1",
      "name": "Code in JavaScript6"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        688,
        96
      ],
      "id": "b15fcd3b-a66e-4fac-bfc2-cf6fc8f2825c",
      "name": "Update row in sheet17",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "content": "Perfecto, vamos con tu tarea.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva tarea\n2. Consultar tus tareas\n3. Reprogramar una tarea\n4. Cancelar una tarea\n5. Marcar una tarea como completada\n9. Volver al men√∫ principal",
        "height": 256,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -560,
        144
      ],
      "typeVersion": 1,
      "id": "e69b8ef9-8388-490a-bc58-c0cdca08fdcd",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16,
        96
      ],
      "id": "47077fcc-8c5f-4078-82aa-550172880940",
      "name": "Get row(s) in sheet26",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        480,
        96
      ],
      "id": "98d7cd95-2f23-4d89-bb32-7a44287eae97",
      "name": "Send a text message46",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la tarea que deseas reprogramar.\nEjemplo: TAREA-003\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16,
        288
      ],
      "id": "20215dc0-f3cd-4f98-b3c6-30bdb8f184d8",
      "name": "Send a text message47",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_EDIT"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        224,
        288
      ],
      "id": "ea831038-d5a4-46f2-911c-66574e35aa4f",
      "name": "Update row in sheet46",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la tarea que deseas eliminar.\nEjemplo: TAREA-001\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16,
        480
      ],
      "id": "3232fb59-7c34-4577-a358-026be8feb633",
      "name": "Send a text message59",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        224,
        480
      ],
      "id": "bb8267d5-8afb-440b-88af-ce69443ad05e",
      "name": "Update row in sheet56",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9b0b7bf2-3274-407a-950e-8392c39aa912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        432,
        1088
      ],
      "id": "db2d1b79-0b50-41ba-9ba1-ffe3e59bf241",
      "name": "Switch7"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 3\n¬øCu√°l es la fecha objetivo de la tarea?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "bef87ab7-960b-4a48-94fd-96b295f508d3",
      "name": "Telegram OK8",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        976,
        944
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no v√°lida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1456,
        2224
      ],
      "id": "3b292dfd-b2e8-497d-8799-ce38dc53ffda",
      "name": "Send a text message18",
      "webhookId": "537b6979-63b9-49c5-8610-35f1ef19571a",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e49fdbbd-e95e-42b7-8e48-8b3cb29491bd"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "58855023-5cd0-49ff-8a4e-042adcdf4212",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b8fa012e-27ac-4322-82c7-41c4c9cad1fa",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "40cb23eb-e6be-426c-a651-7940bc7f2264",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        1216,
        1856
      ],
      "id": "3e519917-7eea-4bdb-a5e5-a719270e5301",
      "name": "Switch8"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1456,
        1584
      ],
      "id": "0232a363-0c36-44da-a52f-1f49acec4318",
      "name": "Get row(s) in sheet9",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu tarea:\n\nT√≠tulo: {{ $json.datos_parciales_1 }}\nFecha objetivo: {{ $json.datos_parciales_2 }}\nPrioridad: {{ $json.datos_parciales_4 }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "4170c12e-cb1e-454b-91ce-74280d41cded",
      "name": "Telegram OK9",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        1920,
        1584
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1456,
        1792
      ],
      "id": "463773b8-c759-444b-b257-f1223a22f8a2",
      "name": "Get row(s) in sheet10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu tarea:\n\nT√≠tulo: {{ $json.datos_parciales_1 }}\nFecha objetivo: {{ $json.datos_parciales_2 }}\nPrioridad: {{ $json.datos_parciales_4 }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "013158d9-3ed4-4433-ba39-c5c89dab9fc0",
      "name": "Telegram OK10",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        1920,
        1792
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1456,
        2000
      ],
      "id": "f2768d65-5a80-402a-a951-e73cece3ca78",
      "name": "Get row(s) in sheet11",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu tarea:\n\nT√≠tulo: {{ $json.datos_parciales_1 }}\nFecha objetivo: {{ $json.datos_parciales_2 }}\nPrioridad: {{ $json.datos_parciales_4 }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "068cba96-e775-4499-94f7-ecb35b1aedd2",
      "name": "Telegram OK11",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        1920,
        2000
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "82b52613-6a5f-47f8-b498-dd649c8b7502",
      "name": "Validar formato YYYY-MM-DD1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        928,
        1248
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "a3005309-2013-405d-8198-a67a1770da47",
      "name": "Telegram Error2",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        1264,
        1392
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1744,
        960
      ],
      "id": "1bd8b1ba-9f54-4cbb-ad28-d516096d3fd3",
      "name": "Get row(s) in sheet12",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 3\n¬øCu√°l es la prioridad de la tarea?\n\n1. Baja\n2. Media\n3. Alta\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "cb102175-49af-4098-8981-e367a222c263",
      "name": "Telegram OK12",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        2208,
        960
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_3": "=",
            "datos_parciales_4": "=",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1968,
        960
      ],
      "id": "8f5e49bc-a238-41f5-8fa8-4fbf863439d7",
      "name": "Update row in sheet24",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_2": "=",
            "datos_parciales_3": "=",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        752,
        944
      ],
      "id": "7369c3fe-6d29-440e-a780-682e7fc0a5ff",
      "name": "Update row in sheet25",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_4": "=Baja",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1680,
        1584
      ],
      "id": "16a4b968-ef2b-4308-97e0-cb74bc272650",
      "name": "Update row in sheet26",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_4": "=Media",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1680,
        1792
      ],
      "id": "18837216-4f9b-4c63-afd6-cff36640cd02",
      "name": "Update row in sheet27",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_4": "=Alta",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1680,
        2000
      ],
      "id": "4545d209-d413-40c1-8da6-e0294b58e95c",
      "name": "Update row in sheet28",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "2149ed1c-6fc1-4214-9bb6-9d73396df7e2"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c3020235-3026-4758-ba53-3259646bba63",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "81655df1-f7a4-4730-bcb6-91267c74645f",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        784,
        2464
      ],
      "id": "51778706-71a8-4c5c-b25b-a9ac4e60d366",
      "name": "Switch9"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1088,
        2864
      ],
      "id": "6d4f2333-82e2-4791-988e-f6df63e9274e",
      "name": "Update row in sheet18",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Cancelado",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1344,
        2864
      ],
      "id": "5343329f-7bef-409f-b999-32d5ef4a104e",
      "name": "Send a text message20",
      "webhookId": "dc8a9a45-0711-45a4-829a-7ab666828377",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1104,
        2672
      ],
      "id": "2d19b354-c858-4057-9fce-653fa540cd49",
      "name": "Update row in sheet19",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu tarea.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la tarea?\n\nEjemplo: Estudiar para un examen\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1360,
        2672
      ],
      "id": "eec683a3-2d96-4e8a-978a-1b03b9519abc",
      "name": "Send a text message21",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "titulo": "={{ $('Get row(s) in sheet24').item.json.datos_parciales_1 }}",
            "fecha_objetivo": "={{ $('Get row(s) in sheet24').item.json.datos_parciales_2 }}",
            "prioridad": "={{ $('Get row(s) in sheet24').item.json.datos_parciales_4 }}",
            "creado_por": "={{ $('Get row(s) in sheet24').item.json.telegram_user }}",
            "id_tarea": "={{ $('Code in JavaScript7').item.json.id_tarea }}",
            "estado": "={{ $json.estado }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2000,
        2480
      ],
      "id": "7e4b0cb6-e5cf-4454-b985-0bfaa302dba1",
      "name": "Append row in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1552,
        2480
      ],
      "id": "89f8c012-2d01-40c1-a21a-99d5f73c7105",
      "name": "Get row(s) in sheet24",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript7').item.json.chatId }}",
        "text": "Tarea completada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2224,
        2480
      ],
      "id": "a7ca2de8-5877-49d7-a506-9cf137c61131",
      "name": "Send a text message44",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2608,
        2480
      ],
      "id": "6d1eb876-c0ae-4a5c-bd15-77e1c9699cda",
      "name": "Update row in sheet45",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1104,
        2480
      ],
      "id": "eb283992-59f6-4062-8e7f-7d0187f96f01",
      "name": "Get row(s) in sheet25",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Extraer n√∫meros v√°lidos de id_tarea\nconst numeros = rows\n  .map(r => r.json.id_tarea)\n  .filter(id => typeof id === 'string' && /^TAREA-\\d+$/.test(id))\n  .map(id => parseInt(id.split('-')[1], 10));\n\n// Si no hay tareas v√°lidas, iniciar en 001\nconst nextNumber = numeros.length > 0\n  ? Math.max(...numeros) + 1\n  : 1;\n\n// Formato final\nconst newId = `TAREA-${String(nextNumber).padStart(3, '0')}`;\n\nreturn [{\n  json: {\n    id_tarea: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1312,
        2480
      ],
      "id": "3a461304-3ef2-4882-b577-4b153a256612",
      "name": "Code in JavaScript7"
    },
    {
      "parameters": {
        "jsCode": "\nconst fecha = $input.first().json.datos_parciales_2; // YYYY-MM-DD\n\nif (!fecha) {\n  return [{\n    json: {\n      estado: 'Pendiente'\n    }\n  }];\n}\n\nconst fechaTarea = new Date(`${fecha}`);\n\nconst ahora = new Date();\n\nconst estado = fechaTarea < ahora ? 'Completada' : 'Pendiente';\n\n\nreturn [{\n  json: {\n    estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1776,
        2480
      ],
      "id": "b9def761-3e7a-4538-959f-85f7d60db461",
      "name": "Code in JavaScript8"
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript7').item.json.chatId }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2832,
        2480
      ],
      "id": "e5ee7f52-1814-48c7-ae83-4c4d83565e89",
      "name": "Send a text message45",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2416,
        2480
      ],
      "id": "3b5a4e0c-1f2a-4d2b-bee2-49619e88ec13",
      "name": "Edit Fields9"
    },
    {
      "parameters": {
        "content": "### TAREAS",
        "height": 80,
        "width": 150,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        336,
        3360
      ],
      "typeVersion": 1,
      "id": "166a453b-978f-46ff-9301-85caf0a3896c",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        4384,
        2304
      ],
      "id": "94df29a4-b709-49fb-b912-a25f2d6c5df2",
      "name": "If17"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "cb928993-c3f9-4429-8a0c-c8cec06d5e9e",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 4, 5, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        4704,
        1872
      ],
      "id": "474497ae-edfc-49f3-ba7d-e3371b71380d",
      "name": "Switch13"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ agenda\nOpciones disponibles: 1 al 2 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5168,
        2064
      ],
      "id": "daed9e1d-ef63-4aac-b7d0-8bb49a128d96",
      "name": "Send a text message60",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5424,
        2064
      ],
      "id": "0d7fbe05-7299-4a2d-bf45-084a2736204c",
      "name": "Send a text message61",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5072,
        1632
      ],
      "id": "1048aed8-0b28-46a0-b6ab-b05d5ce38d4a",
      "name": "Send a text message62",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5072,
        1488
      ],
      "id": "86998551-8f48-4218-9fbe-bb9f22174f61",
      "name": "Send a text message63",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5072,
        1328
      ],
      "id": "d7957dc9-3ca0-4cfb-88c1-9392ab36c9a4",
      "name": "Send a text message64",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu habito.\n\n¬øQu√© deseas hacer?\n\n1. Agregar un nuevo habito\n2. Eliminar un habito\n3. Activar/Desactivar habito\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5184,
        960
      ],
      "id": "80414d48-0a12-43db-8aea-39237c731655",
      "name": "Send a text message65",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "retryOnFail": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "HABITOS"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4976,
        960
      ],
      "id": "1b841d88-471b-44a1-8a37-14c106d50966",
      "name": "Update row in sheet57",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -5072,
        1184
      ],
      "id": "6210bade-4597-4b56-87ec-783730d46754",
      "name": "Send a text message66",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu habito.\n\nPaso 1 de 3\n¬øCu√°l es el nombre del habito?\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5104,
        1520
      ],
      "id": "1d59eb58-d006-4dd8-99fa-649c39e27f95",
      "name": "Send a text message67",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITO",
            "paso_actual": "1",
            "datos_parciales_1": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5360,
        1520
      ],
      "id": "45c52a23-eb4b-4cea-952f-3d09a482f432",
      "name": "Update row in sheet58",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID del habito que deseas eliminar. (Para consultar los habitos vaya a la seccion de 'Recordatorios')\nEjemplo: HABI-001\n\n9) Cancelar\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5104,
        1712
      ],
      "id": "aa5fa801-d899-4daa-93e4-106b182a7d2c",
      "name": "Send a text message68",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITO_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5312,
        1712
      ],
      "id": "a5f6e1e0-9c0d-445b-8d79-88301e16a292",
      "name": "Update row in sheet59",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITO_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5328,
        1888
      ],
      "id": "b70f0726-3565-4e36-a365-1eb2ee382e56",
      "name": "Update row in sheet60",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID del habito que deseas desactivar. (Para consultar los habitos vaya a la seccion de 'Recordatorios')\n\nEjemplo: HABI-001\n\n9) Cancelar\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5120,
        1888
      ],
      "id": "f184d581-4c53-47b3-baf0-e5febe4780ab",
      "name": "Send a text message69",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        4896,
        2512
      ],
      "id": "0f6334d1-7629-412a-bf1f-83f6976abf7b",
      "name": "Switch14"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 3\n¬øCon qu√© frecuencia haces este habito??\n\nEjemplo: Diario\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "96f06415-81ad-4e0c-bbe0-435e40449594",
      "name": "Telegram OK15",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        5616,
        2304
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITOS",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5360,
        2304
      ],
      "id": "02397b8f-a2c5-4220-a201-77d44884702c",
      "name": "Update row in sheet61",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITOS",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5616,
        2480
      ],
      "id": "bee5a3d2-3f6d-4dc1-8ea9-6f0ee9d446ec",
      "name": "Update row in sheet62",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5360,
        2480
      ],
      "id": "bebb4396-f9c3-4d00-a98d-b912b23d1555",
      "name": "Get row(s) in sheet13",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 3\n¬øA qu√© hora te debemos recordar este habito??\n\nEjemplo: 12:20\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "9489c791-837d-4a87-9fe4-8f79f4f538c0",
      "name": "Telegram OK16",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        5856,
        2480
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^([01]\\d|2[0-3]):([0-5]\\d)$"
            }
          ]
        }
      },
      "id": "b71bc4fa-266a-4d72-bd27-8db055ffada8",
      "name": "Validar formato HH:MM2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        5376,
        2784
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6192,
        2704
      ],
      "id": "ad1abc68-cace-433a-8e20-8cd97a284dd7",
      "name": "Get row(s) in sheet33",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_habito": "={{ $('Code in JavaScript12').item.json.id_habito }}",
            "nombre": "={{ $json.datos_parciales_1 }}",
            "frecuencia": "={{ $json.datos_parciales_2 }}",
            "hora_recordatorio": "={{ $('Telegram Trigger').item.json.message.text }}",
            "estado": "Activo"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_habito",
              "displayName": "id_habito",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "frecuencia",
              "displayName": "frecuencia",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora_recordatorio",
              "displayName": "hora_recordatorio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6464,
        2704
      ],
      "id": "2e4af77e-628b-4ddc-8335-c47c25fa1e72",
      "name": "Append row in sheet1",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}\n",
        "text": "Habito registrado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6784,
        2704
      ],
      "id": "f26d5a9a-37fc-4825-8d6e-f897cb346a96",
      "name": "Send a text message70",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        7344,
        2704
      ],
      "id": "393ea971-8a2d-4439-ba04-3709fa24ad45",
      "name": "Update row in sheet63",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5712,
        2704
      ],
      "id": "cfb254c4-aae5-47da-905d-21581439baac",
      "name": "Get row(s) in sheet34",
      "alwaysOutputData": true,
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\n\n// Extraer IDs v√°lidos\nconst ids = rows\n  .map(r => r.json.id_cita)\n  .filter(id => typeof id === 'string' && /^HABI-\\d+$/.test(id));\n\n// Si no hay IDs v√°lidos, iniciar contador\nif (ids.length === 0) {\n  return [{\n    json: {\n      id_habito: 'HABI-001'\n    }\n  }];\n}\n\n// Ordenar y obtener el √∫ltimo\nids.sort((a, b) => {\n  const numA = parseInt(a.split('-')[1], 10);\n  const numB = parseInt(b.split('-')[1], 10);\n  return numA - numB;\n});\n\nconst lastId = ids[ids.length - 1];\nconst lastNumber = parseInt(lastId.split('-')[1], 10);\nconst newNumber = lastNumber + 1;\n\n// Formato final\nconst newId = `HABI-${String(newNumber).padStart(3, '0')}`;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    id_cita: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5952,
        2704
      ],
      "id": "fab3d25c-7715-4475-850d-6b448989d53c",
      "name": "Code in JavaScript12",
      "executeOnce": true
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        7600,
        2704
      ],
      "id": "408b66cb-bac2-45b6-a614-d004c9affeef",
      "name": "Send a text message71",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        7088,
        2704
      ],
      "id": "f3dcf4d8-14a1-4136-829e-15753061969f",
      "name": "Edit Fields1",
      "executeOnce": true
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Formato de hora incorrecto, intente de nuevo.\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "ae9ce331-6a56-4690-93ae-84fdf1e59adc",
      "name": "Telegram OK17",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        5712,
        2928
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4880,
        3472
      ],
      "id": "974c3389-75b1-42eb-b80d-e44422501d6c",
      "name": "Get row(s) in sheet35",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst habitos = items.map(i => i.json);\n\nconst habito = habitos.find(h => h.id_habito === idIngresado);\n\nif (!habito) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ un habito con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\n\nreturn [{\n  json: {\n    id_habito: habito.id_habito,\n    rowNumber: habito.rowNumber,\n\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5120,
        3472
      ],
      "id": "1b6ff2fe-c7f8-480b-ba85-c51d7b291f45",
      "name": "Code in JavaScript13"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        5328,
        3472
      ],
      "id": "130713cc-278c-4534-b53f-70f4d82de6dc",
      "name": "If18"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "HABITO_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE3"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5744,
        3536
      ],
      "id": "3da9cde3-f733-4959-bc7e-821f8035f315",
      "name": "Update row in sheet64",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        4480,
        3824
      ],
      "id": "0e38960d-55aa-4ec5-b55d-44281a7c57fe",
      "name": "If19"
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript13').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5744,
        3328
      ],
      "id": "ab34de2a-58aa-4edd-8f02-c856a7b84775",
      "name": "Send a text message72",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar el habito con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5984,
        3536
      ],
      "id": "ea844691-5fd3-4334-9b75-2ca735af8579",
      "name": "Send a text message73",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5760,
        4048
      ],
      "id": "676993b5-5b43-4d13-b760-8fe4136b5564",
      "name": "Delete rows or columns from sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        5024,
        4192
      ],
      "id": "46274d66-9c68-47ac-9901-c4cd7b7ef969",
      "name": "If20"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5536,
        4048
      ],
      "id": "e73bd3f0-411f-4dd0-83ba-7f805ee35ec7",
      "name": "Get row(s) in sheet36",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5296,
        4048
      ],
      "id": "464a93d8-43b7-4bd3-9b08-be2b827bdba9",
      "name": "Get row(s) in sheet37",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Habito eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6352,
        4048
      ],
      "id": "46b4af17-de39-48fd-9288-31fafa95887b",
      "name": "Send a text message74",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6560,
        4048
      ],
      "id": "c2336f93-1481-4e23-b2e8-9077fce180e5",
      "name": "Send a text message75",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5280,
        4320
      ],
      "id": "5c03cba3-54bf-4898-b8a1-fffc518d0c7e",
      "name": "Send a text message76",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5968,
        4320
      ],
      "id": "f00ae46d-be3b-4d87-89d4-b36e4c52a7a6",
      "name": "Send a text message77",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6160,
        4048
      ],
      "id": "e294b6c3-afdb-4ffe-aa88-438666b5dae7",
      "name": "Update row in sheet65",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5968,
        4048
      ],
      "id": "5ce6e0f2-11b3-47cd-a786-06db2808c14c",
      "name": "Edit Fields14"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5728,
        4320
      ],
      "id": "81063b42-0f29-461f-95ad-e43df897548e",
      "name": "Update row in sheet66",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5536,
        4320
      ],
      "id": "ed70c726-c692-4b0d-852b-6856031874df",
      "name": "Edit Fields15"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        4528,
        5056
      ],
      "id": "b7ef7655-9c00-4a0f-b0f6-1ee80deba25c",
      "name": "If21"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "estado",
              "lookupValue": "Activo"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5056,
        4880
      ],
      "id": "179544e2-2241-467f-9b5b-97bce281f80c",
      "name": "Get row(s) in sheet38",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst habitos = items.map(i => i.json);\n\nconst habito = habitos.find(c => c.id_habito === idIngresado);\n\nif (!habito) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ un habito con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_habito: habito.id_habito,\n    rowNumber: habito.rowNumber,\n    estado_actual: habito.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5296,
        4880
      ],
      "id": "38f2656e-2ee6-4485-878e-4af40438ae38",
      "name": "Code in JavaScript14"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        5504,
        4880
      ],
      "id": "20f05243-abca-4fe6-bb15-2f5e9bc5ef80",
      "name": "If22"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "HABITO_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5920,
        4944
      ],
      "id": "b447fa14-adda-4803-9bc9-9c71fbd074b3",
      "name": "Update row in sheet67",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript14').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5920,
        4736
      ],
      "id": "9d6e34df-e93c-4b30-b6cb-7ad379e9db0a",
      "name": "Send a text message78",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n9) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6160,
        4944
      ],
      "id": "0a976517-4b2a-4d70-899e-026c8d9eefb8",
      "name": "Send a text message79",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5056,
        5392
      ],
      "id": "40feeaee-f6ff-4a3d-a2c0-1fdd947511e0",
      "name": "Get row(s) in sheet39",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6544,
        5184
      ],
      "id": "37501394-e7dc-4304-8c62-c34a9bf99558",
      "name": "Send a text message80",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6752,
        5184
      ],
      "id": "a5223029-9b9e-41ff-958c-35c71b1b3fb7",
      "name": "Send a text message81",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6352,
        5184
      ],
      "id": "369f080b-d4ba-46fb-ba26-3b2daf29406d",
      "name": "Update row in sheet68",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        6160,
        5184
      ],
      "id": "3991cf15-9b3b-49db-bb7f-ef81915e8f5b",
      "name": "Edit Fields16"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "estado": "Inactivo",
            "nombre": "={{ $json.nombre }}",
            "id_habito": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "frecuencia": "={{ $json.frecuencia }}",
            "hora_recordatorio": "={{ $json.hora_recordatorio }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_habito",
              "displayName": "id_habito",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "frecuencia",
              "displayName": "frecuencia",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "hora_recordatorio",
              "displayName": "hora_recordatorio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5936,
        5184
      ],
      "id": "07d0974c-1813-4a21-8e5f-ccda3ef93ffb",
      "name": "Update row in sheet69",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "3e492c08-c151-422d-8f5c-958b613ed0e3",
              "leftValue": "={{ $json.estado }}",
              "rightValue": "Activo",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        5344,
        5392
      ],
      "id": "e11fc297-0d03-4391-bbea-86579d98db67",
      "name": "If23"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5712,
        5184
      ],
      "id": "63b518fc-89a4-44d4-9751-4b218fd1f110",
      "name": "Get row(s) in sheet40",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6544,
        5504
      ],
      "id": "7c18aab0-8ad8-419f-8aae-3df2cf66e635",
      "name": "Send a text message82",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6752,
        5504
      ],
      "id": "8b0accac-de7e-421e-8338-328bcb1bb183",
      "name": "Send a text message83",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6352,
        5504
      ],
      "id": "cf1ba7b9-d7d2-4c28-9f99-1375d1827529",
      "name": "Update row in sheet70",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        6160,
        5504
      ],
      "id": "f4adcfb3-f8f6-4b41-a696-c1e053bd89f5",
      "name": "Edit Fields17"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5712,
        5504
      ],
      "id": "dd0c6d08-3592-4658-8dd1-bf6fe6030db4",
      "name": "Get row(s) in sheet41",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "estado": "Activo",
            "nombre": "={{ $json.nombre }}",
            "id_habito": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "frecuencia": "={{ $json.frecuencia }}",
            "hora_recordatorio": "={{ $json.hora_recordatorio }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_habito",
              "displayName": "id_habito",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "frecuencia",
              "displayName": "frecuencia",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "hora_recordatorio",
              "displayName": "hora_recordatorio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5952,
        5504
      ],
      "id": "99640412-4323-444e-b3ee-776d4cb2d603",
      "name": "Update row in sheet71",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -5200,
        752
      ],
      "id": "cafcefd7-c332-40c6-b1fe-e9a73ba53714",
      "name": "Get row(s) in sheet42",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "\nconst recordatorios = items\n  .map(i => i.json)\n  .filter(habito => habito.estado === 'Activo');\n\nif (recordatorios.length === 0) {\n  return [{\n    json: {\n      mensaje: 'No tienes habitos activos.'\n    }\n  }];\n}\n\nlet mensaje = '*Recordatorio de tus habitos*\\n\\n';\n\nrecordatorios.forEach((habito, index) => {\n  mensaje +=\n    `${index + 1}. *${habito.id_habito}*\\n` +\n    `${habito.nombre}\\n` +\n    `${habito.frecuencia} ` +\n    `${habito.hora_recordatorio}\\n` +\n    `${habito.estado}\\n\\n`;\n});\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4960,
        752
      ],
      "id": "a3a2b34d-3b2a-4751-bc61-6a9a5acbe972",
      "name": "Code in JavaScript15"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -4752,
        752
      ],
      "id": "8da4d8ec-e1d9-4343-b3f5-334dd64e1cb5",
      "name": "Send a text message84",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -4544,
        752
      ],
      "id": "92a5d988-8449-4cbb-b627-c340566f97ef",
      "name": "Update row in sheet72",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        944,
        5152
      ],
      "id": "85e7c33d-c4cf-402b-af32-4a8d7aafd7f3",
      "name": "Get row(s) in sheet29",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "TAREA_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE2"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1808,
        5216
      ],
      "id": "8b5a23af-7f07-404b-a118-68c475556b19",
      "name": "Update row in sheet50",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript11').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1808,
        5008
      ],
      "id": "ba5a5e28-125e-41c8-baee-8078af363920",
      "name": "Send a text message51",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar la tarea con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2048,
        5216
      ],
      "id": "e083cf8d-44da-4cfd-a0a9-ab5360077e40",
      "name": "Send a text message54",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1824,
        5728
      ],
      "id": "44a5b2e5-2ccf-47b3-b9b9-c03660f93f36",
      "name": "Delete rows or columns from sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1088,
        5872
      ],
      "id": "3118d915-c4e2-4486-94e3-2f0e919d9b71",
      "name": "If15"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1600,
        5728
      ],
      "id": "b4e7d37e-de6a-4fbe-ad57-c75108a31565",
      "name": "Get row(s) in sheet31",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1360,
        5728
      ],
      "id": "b54e353e-a48d-4959-8a77-abf96dacab89",
      "name": "Get row(s) in sheet32",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Registro eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2416,
        5728
      ],
      "id": "0b9ba601-2ba2-4d78-bea7-8a0c3ce1251e",
      "name": "Send a text message55",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2624,
        5728
      ],
      "id": "fe8962e3-e915-449c-85df-f5eb2c8c45ad",
      "name": "Send a text message56",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1344,
        6000
      ],
      "id": "fac6d75b-3d4f-4973-b414-cc95002d456b",
      "name": "Send a text message57",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2032,
        6000
      ],
      "id": "43983593-0ac3-4483-9dd1-2fb2741f9299",
      "name": "Send a text message58",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2224,
        5728
      ],
      "id": "e7f956fc-41d7-4dbe-b3c6-8f0ef37445a7",
      "name": "Update row in sheet53",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2032,
        5728
      ],
      "id": "c2543665-aea7-4df4-8142-6e594bcb4ef1",
      "name": "Edit Fields12"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1792,
        6000
      ],
      "id": "bb850eb1-bd68-44d6-a05c-7797fce5f607",
      "name": "Update row in sheet54",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1584,
        6000
      ],
      "id": "fb39afe1-8a0d-4c66-b74b-991fd5ab83e3",
      "name": "Edit Fields13"
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst tareas = items.map(i => i.json);\n\nconst tarea = tareas.find(c => c.id_tarea === idIngresado);\n\nif (!tarea) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una tarea con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (tarea.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar tareas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_tarea: tarea.id_tarea,\n    rowNumber: tarea.rowNumber,\n    estado_actual: tarea.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1184,
        5152
      ],
      "id": "45ebcf93-2b17-4001-aa03-36d1f448a349",
      "name": "Code in JavaScript11"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1392,
        5152
      ],
      "id": "a1af8298-edac-453b-ae00-4b4c976fbf78",
      "name": "If16"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": "={{ false }}",
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        544,
        5504
      ],
      "id": "a7900195-47ea-4f3f-85c4-d4cfdf516061",
      "name": "If24"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        672,
        3424
      ],
      "id": "07668f76-cd7d-4eae-bce3-5a95b9b148c8",
      "name": "Get row(s) in sheet27",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "TAREA_EDIT",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "TAREA_EDICION"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1536,
        3488
      ],
      "id": "286ce7bf-fa21-4a93-9bdf-d5fed4e521f5",
      "name": "Update row in sheet47",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript10').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1536,
        3280
      ],
      "id": "1212a00c-5b82-4b0e-8e77-518982912a0b",
      "name": "Send a text message48",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øQu√© deseas modificar de la tarea {{$json.datos_parciales_1}}?\n\n1) Fecha\n2) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1776,
        3488
      ],
      "id": "713a8a23-275f-461c-9639-d6a8e2400560",
      "name": "Send a text message49",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "ec675a21-b990-4a0b-b606-021f5e25e71e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "dca7b002-8fba-4618-add1-6e508cc3f0ef",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        1200,
        3920
      ],
      "id": "2d8106e7-61a1-4ae8-a0c0-302a41fd65e8",
      "name": "Switch12"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d9a64f2e-d27d-4b36-9cb0-93827b2a3636",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        688,
        4192
      ],
      "id": "c3a8fafd-9140-47c5-97f9-a4b077ec0ced",
      "name": "If12"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "8fbd1873-b498-40ef-a137-35fef172230b",
      "name": "Validar formato YYYY-MM-DD3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        1008,
        4432
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha actualizada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "e0ab9ee8-40f8-4a35-9b9a-75ecbe932504",
      "name": "Telegram OK14",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        2656,
        4336
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2026-12-20\nIntenta nuevamente.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "bc6c32e2-b3a2-4987-9b15-c4b1cb7c6025",
      "name": "Telegram Error5",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        1392,
        4576
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_EDIT",
            "paso_actual": "TAREA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1392,
        4336
      ],
      "id": "21759d4c-6b00-4404-8b10-0d5814cbc920",
      "name": "Update row in sheet48",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ingrese la fecha nueva.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2026-12-20",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1552,
        3760
      ],
      "id": "68c2e5c2-0a30-4645-a5ef-66cab41618cb",
      "name": "Send a text message50",
      "webhookId": "091ffb67-df42-49eb-a2b1-1e8a031acfc4",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "TAREA_EDIT",
            "paso_actual": "TAREA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet28').item.json.datos_parciales_1 }}",
            "row_number": 2,
            "datos_parciales_2": "1",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1792,
        3760
      ],
      "id": "1f6c085d-cd8f-4761-a734-4ff0673489a5",
      "name": "Update row in sheet49",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        976,
        3920
      ],
      "id": "d1409c59-f678-45d5-9106-d868ee869c9b",
      "name": "Get row(s) in sheet28",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2000,
        4032
      ],
      "id": "5881b646-5cb0-4e71-b5ba-450e3a45a133",
      "name": "Update row in sheet51",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1552,
        4032
      ],
      "id": "7083161c-fef3-4d7a-9681-f8dbdb8e3f1d",
      "name": "Send a text message52",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6ec5bccf-438b-4d68-8947-62e86d961fc3",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1792,
        4032
      ],
      "id": "6319fee5-e36e-4fb2-ae36-efdfd9d89cd4",
      "name": "Edit Fields10"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_tarea": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "fecha_objetivo": "={{ $('Update row in sheet48').item.json.datos_parciales_2 }}"
          },
          "matchingColumns": [
            "id_tarea"
          ],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1904,
        4336
      ],
      "id": "6c15c911-eb21-4f43-81b0-5a624ebe1664",
      "name": "Update row in sheet52",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a039b49-2c5e-4e19-8dc1-35eabd92e9e2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2160,
        4336
      ],
      "id": "e8904332-b517-4ac4-9629-96ee1bbe57b0",
      "name": "Edit Fields11"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2416,
        4336
      ],
      "id": "b50671ce-ac3a-4b2e-9f3b-d2ae827bbfaa",
      "name": "Update row in sheet55",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2880,
        4336
      ],
      "id": "46559d14-50ba-4598-b972-3cb37aa35906",
      "name": "Send a text message53",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1648,
        4336
      ],
      "id": "5fdaf283-e00a-4d10-98ac-35350062e234",
      "name": "Get row(s) in sheet30",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst tareas = items.map(i => i.json);\n\nconst tarea = tareas.find(c => c.id_tarea === idIngresado);\n\nif (!tarea) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una tarea con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (tarea.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar tareas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_tarea: tarea.id_tarea,\n    rowNumber: tarea.rowNumber,\n    estado_actual: tarea.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        912,
        3424
      ],
      "id": "739adc28-35af-45d2-817a-1a2bcd1a5ce9",
      "name": "Code in JavaScript10"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1120,
        3424
      ],
      "id": "1dbff8a8-abd2-4bd3-a4ed-e920ba4f6798",
      "name": "If13"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        272,
        3776
      ],
      "id": "746771f6-b819-456b-a7e2-0364efac4d39",
      "name": "If14"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "30a49837-b923-41ce-88cb-942693e24e67",
              "leftValue": "={{ $json.valido }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1456,
        1104
      ],
      "id": "6ba43b91-7b28-49fe-a741-59be67feb0fa",
      "name": "If11"
    },
    {
      "parameters": {
        "jsCode": "const fechaIngresada = new Date($('Telegram Trigger').first().json.message.text);\nconst hoy = new Date();\n\n\nfechaIngresada.setHours(0,0,0,0);\nhoy.setHours(0,0,0,0);\n\nif (fechaIngresada < hoy) {\n  return [{\n    json: {\n      valido: false,\n      error: 'No puedes crear tareas en fechas pasadas'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    valido: true,\n    fecha: $json.fecha\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1248,
        1104
      ],
      "id": "0b331f7d-720a-4b3b-958c-94c52346c18a",
      "name": "Code in JavaScript16"
    },
    {
      "parameters": {
        "chatId": "={{ $node['Telegram Trigger'].json.message.chat.id }}",
        "text": "Formato invalido, no puedes crear tareas en el pasado. Int√©ntalo de nuevo o escribe 9 para salir",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1760,
        1248
      ],
      "id": "cb6b7e43-2ba3-4484-9ab6-eef41d1d46e0",
      "name": "Send a text message85",
      "webhookId": "48a8ad57-682c-4bfe-b1e6-51ce21ca9c17",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        240,
        672
      ],
      "id": "65ca2b61-a586-4d44-81ca-9f2bf5eefb81",
      "name": "Update row in sheet73",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la tarea que deseas completar.\nEjemplo: TAREA-002\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        32,
        672
      ],
      "id": "5da2c774-4f3a-4fbd-a1b2-0fe527ceeb48",
      "name": "Send a text message86",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        512,
        6688
      ],
      "id": "edbaf7db-2f48-4694-8fc0-3a505358621e",
      "name": "If25"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "estado",
              "lookupValue": "Pendiente"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1040,
        6512
      ],
      "id": "efdfebec-60ee-4049-b002-97eb59081b02",
      "name": "Get row(s) in sheet43",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst tareas = items.map(i => i.json);\n\nconst tarea = tareas.find(c => c.id_tarea === idIngresado);\n\nif (!tarea) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una tara con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (tarea.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar tareas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_tarea: tarea.id_tarea,\n    rowNumber: tarea.rowNumber,\n    estado_actual: tarea.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1280,
        6512
      ],
      "id": "91d89f7e-d5ee-411e-9827-c162357a8028",
      "name": "Code in JavaScript17"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1488,
        6512
      ],
      "id": "74f30c3f-51fb-4af7-8f2c-c81b27d5063d",
      "name": "If26"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "TAREA_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1904,
        6576
      ],
      "id": "1ad88d5c-b782-475b-b2fa-04c887758d01",
      "name": "Update row in sheet74",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript17').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1904,
        6368
      ],
      "id": "ecf5ae30-821e-40c7-a5b7-e91f0fbd3b1e",
      "name": "Send a text message87",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2144,
        6576
      ],
      "id": "63a8a2cd-164f-45de-8fde-fa049e5e8313",
      "name": "Send a text message88",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1088,
        6864
      ],
      "id": "e963a5ff-0ed7-464e-9f01-bc4a74ee2f05",
      "name": "Get row(s) in sheet44",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2096,
        6864
      ],
      "id": "f6064204-1510-4714-8e75-bf982a96543a",
      "name": "Send a text message89",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2304,
        6864
      ],
      "id": "804bd98c-eec7-467d-a516-fb359ce8ee6f",
      "name": "Send a text message90",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1904,
        6864
      ],
      "id": "6070f463-51c6-4414-9127-e2d406d3dc4a",
      "name": "Update row in sheet75",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1712,
        6864
      ],
      "id": "8d02a40c-54d7-4527-9abb-09c2561a918d",
      "name": "Edit Fields18"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_tarea": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "titulo": "={{ $json.titulo }}",
            "prioridad": "={{ $json.prioridad }}",
            "fecha_objetivo": "={{ $json.fecha_objetivo }}",
            "creado_por": "={{ $json.creado_por }}",
            "estado": "Completada"
          },
          "matchingColumns": [
            "id_tarea"
          ],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1408,
        6864
      ],
      "id": "2b279d7e-4bfc-47f4-b64d-bae992549c11",
      "name": "Update row in sheet76",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If24",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If17",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Send a text message2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet42",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message65",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message66",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message64",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message63",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message62",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message2": {
      "main": [
        [
          {
            "node": "Send a text message3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message5": {
      "main": [
        [
          {
            "node": "Send a text message6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message4": {
      "main": [
        [
          {
            "node": "Update row in sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Send a text message9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message24",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message39",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message7": {
      "main": [
        [
          {
            "node": "Send a text message8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message9": {
      "main": [
        [
          {
            "node": "Update row in sheet4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD": {
      "main": [
        [
          {
            "node": "Code in JavaScript9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch3": {
      "main": [
        [
          {
            "node": "Validar formato YYYY-MM-DD",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato HH:MM",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet5": {
      "main": [
        [
          {
            "node": "Telegram OK",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato HH:MM": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet1": {
      "main": [
        [
          {
            "node": "Update row in sheet6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet6": {
      "main": [
        [
          {
            "node": "Telegram OK1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet7": {
      "main": [
        [
          {
            "node": "Telegram OK2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet2": {
      "main": [
        [
          {
            "node": "Update row in sheet7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet8": {
      "main": [
        [
          {
            "node": "Telegram OK3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet3": {
      "main": [
        [
          {
            "node": "Update row in sheet8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet10": {
      "main": [
        [
          {
            "node": "Telegram OK5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet5": {
      "main": [
        [
          {
            "node": "Update row in sheet10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch5": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet11": {
      "main": [
        [
          {
            "node": "Telegram OK6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet6": {
      "main": [
        [
          {
            "node": "Update row in sheet11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet12": {
      "main": [
        [
          {
            "node": "Telegram OK7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet7": {
      "main": [
        [
          {
            "node": "Update row in sheet12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch4": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet8": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "Send a text message11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message11": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet14": {
      "main": [
        [
          {
            "node": "Send a text message12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet15": {
      "main": [
        [
          {
            "node": "Send a text message13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message14": {
      "main": [
        [
          {
            "node": "Update row in sheet16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet4": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message": {
      "main": [
        [
          {
            "node": "Edit Fields5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message1": {
      "main": [
        [
          {
            "node": "Update row in sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet13": {
      "main": [
        [
          {
            "node": "Send a text message22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Update row in sheet13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet14": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Send a text message23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message23": {
      "main": [
        [
          {
            "node": "Update row in sheet9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message24": {
      "main": [
        [
          {
            "node": "Update row in sheet20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet15": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "Send a text message25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet21": {
      "main": [
        [
          {
            "node": "Send a text message26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet16",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch10": {
      "main": [
        [
          {
            "node": "Send a text message27",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message28",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message29",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD2": {
      "main": [
        [
          {
            "node": "Update row in sheet23",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet23": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message27": {
      "main": [
        [
          {
            "node": "Update row in sheet29",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet16": {
      "main": [
        [
          {
            "node": "Switch10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message28": {
      "main": [
        [
          {
            "node": "Update row in sheet30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message29": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Update row in sheet31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch11": {
      "main": [
        [
          {
            "node": "Validar formato YYYY-MM-DD2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato HH:MM1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato HH:MM1": {
      "main": [
        [
          {
            "node": "Update row in sheet32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet33": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet32": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet34": {
      "main": [
        [
          {
            "node": "Edit Fields4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Update row in sheet35",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet35": {
      "main": [
        [
          {
            "node": "Telegram OK4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields4": {
      "main": [
        [
          {
            "node": "Update row in sheet36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet36": {
      "main": [
        [
          {
            "node": "Telegram OK13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram OK4": {
      "main": [
        [
          {
            "node": "Send a text message30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram OK13": {
      "main": [
        [
          {
            "node": "Send a text message31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields5": {
      "main": [
        [
          {
            "node": "Update row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet17": {
      "main": [
        [
          {
            "node": "Update row in sheet34",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet18": {
      "main": [
        [
          {
            "node": "Update row in sheet33",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message32": {
      "main": [
        [
          {
            "node": "Update row in sheet37",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet19": {
      "main": [
        [
          {
            "node": "Code in JavaScript4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript4": {
      "main": [
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "Send a text message33",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet38",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet38": {
      "main": [
        [
          {
            "node": "Send a text message34",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If6": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet": {
      "main": [
        [
          {
            "node": "Edit Fields6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If7": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet21",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message37",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet20": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet21": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message35": {
      "main": [
        [
          {
            "node": "Send a text message36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message37": {
      "main": [
        [
          {
            "node": "Edit Fields7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet39": {
      "main": [
        [
          {
            "node": "Send a text message35",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields6": {
      "main": [
        [
          {
            "node": "Update row in sheet39",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields7": {
      "main": [
        [
          {
            "node": "Update row in sheet40",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet40": {
      "main": [
        [
          {
            "node": "Send a text message38",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet22": {
      "main": [
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript5": {
      "main": [
        [
          {
            "node": "If9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If9": {
      "main": [
        [
          {
            "node": "Send a text message40",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet42",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet42": {
      "main": [
        [
          {
            "node": "Send a text message41",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If8": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet22",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet23": {
      "main": [
        [
          {
            "node": "Update row in sheet44",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message42": {
      "main": [
        [
          {
            "node": "Send a text message43",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet43": {
      "main": [
        [
          {
            "node": "Send a text message42",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields8": {
      "main": [
        [
          {
            "node": "Update row in sheet43",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message39": {
      "main": [
        [
          {
            "node": "Update row in sheet41",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet44": {
      "main": [
        [
          {
            "node": "Edit Fields8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If10": {
      "main": [
        [
          {
            "node": "Update row in sheet5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript9": {
      "main": [
        [
          {
            "node": "If10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Switch6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch6": {
      "main": [
        [
          {
            "node": "Send a text message15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet26",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message47",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message59",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message86",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message15": {
      "main": [
        [
          {
            "node": "Update row in sheet22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message16": {
      "main": [
        [
          {
            "node": "Send a text message17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript6": {
      "main": [
        [
          {
            "node": "Send a text message46",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet26": {
      "main": [
        [
          {
            "node": "Code in JavaScript6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message46": {
      "main": [
        [
          {
            "node": "Update row in sheet17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message47": {
      "main": [
        [
          {
            "node": "Update row in sheet46",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message59": {
      "main": [
        [
          {
            "node": "Update row in sheet56",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch7": {
      "main": [
        [
          {
            "node": "Update row in sheet25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato YYYY-MM-DD1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch8": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet10",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet11",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet9": {
      "main": [
        [
          {
            "node": "Update row in sheet26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet10": {
      "main": [
        [
          {
            "node": "Update row in sheet27",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet11": {
      "main": [
        [
          {
            "node": "Update row in sheet28",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD1": {
      "main": [
        [
          {
            "node": "Code in JavaScript16",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet12": {
      "main": [
        [
          {
            "node": "Update row in sheet24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet24": {
      "main": [
        [
          {
            "node": "Telegram OK12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet25": {
      "main": [
        [
          {
            "node": "Telegram OK8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet26": {
      "main": [
        [
          {
            "node": "Telegram OK9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet27": {
      "main": [
        [
          {
            "node": "Telegram OK10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet28": {
      "main": [
        [
          {
            "node": "Telegram OK11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch9": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet18": {
      "main": [
        [
          {
            "node": "Send a text message20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet19": {
      "main": [
        [
          {
            "node": "Send a text message21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet2": {
      "main": [
        [
          {
            "node": "Send a text message44",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet24": {
      "main": [
        [
          {
            "node": "Code in JavaScript8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message44": {
      "main": [
        [
          {
            "node": "Edit Fields9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet45": {
      "main": [
        [
          {
            "node": "Send a text message45",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet25": {
      "main": [
        [
          {
            "node": "Code in JavaScript7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript7": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript8": {
      "main": [
        [
          {
            "node": "Append row in sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields9": {
      "main": [
        [
          {
            "node": "Update row in sheet45",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If17": {
      "main": [
        [
          {
            "node": "Switch13",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message60": {
      "main": [
        [
          {
            "node": "Send a text message61",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch13": {
      "main": [
        [
          {
            "node": "Send a text message67",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message68",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message69",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message60",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message65": {
      "main": [
        [
          {
            "node": "Update row in sheet57",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message67": {
      "main": [
        [
          {
            "node": "Update row in sheet58",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message68": {
      "main": [
        [
          {
            "node": "Update row in sheet59",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message69": {
      "main": [
        [
          {
            "node": "Update row in sheet60",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet61": {
      "main": [
        [
          {
            "node": "Telegram OK15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch14": {
      "main": [
        [
          {
            "node": "Update row in sheet61",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet13",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato HH:MM2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet62": {
      "main": [
        [
          {
            "node": "Telegram OK16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet13": {
      "main": [
        [
          {
            "node": "Update row in sheet62",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet33": {
      "main": [
        [
          {
            "node": "Append row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet1": {
      "main": [
        [
          {
            "node": "Send a text message70",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message70": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet63": {
      "main": [
        [
          {
            "node": "Send a text message71",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet34": {
      "main": [
        [
          {
            "node": "Code in JavaScript12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript12": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet33",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Update row in sheet63",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato HH:MM2": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet34",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram OK17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet35": {
      "main": [
        [
          {
            "node": "Code in JavaScript13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript13": {
      "main": [
        [
          {
            "node": "If18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If18": {
      "main": [
        [
          {
            "node": "Send a text message72",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet64",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet64": {
      "main": [
        [
          {
            "node": "Send a text message73",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If19": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet35",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet2": {
      "main": [
        [
          {
            "node": "Edit Fields14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If20": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet37",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message76",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet36": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet37": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message74": {
      "main": [
        [
          {
            "node": "Send a text message75",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message76": {
      "main": [
        [
          {
            "node": "Edit Fields15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet65": {
      "main": [
        [
          {
            "node": "Send a text message74",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields14": {
      "main": [
        [
          {
            "node": "Update row in sheet65",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet66": {
      "main": [
        [
          {
            "node": "Send a text message77",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields15": {
      "main": [
        [
          {
            "node": "Update row in sheet66",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If21": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet38",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet39",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet38": {
      "main": [
        [
          {
            "node": "Code in JavaScript14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript14": {
      "main": [
        [
          {
            "node": "If22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If22": {
      "main": [
        [
          {
            "node": "Send a text message78",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet67",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet67": {
      "main": [
        [
          {
            "node": "Send a text message79",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet39": {
      "main": [
        [
          {
            "node": "If23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message80": {
      "main": [
        [
          {
            "node": "Send a text message81",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet68": {
      "main": [
        [
          {
            "node": "Send a text message80",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields16": {
      "main": [
        [
          {
            "node": "Update row in sheet68",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet69": {
      "main": [
        [
          {
            "node": "Edit Fields16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If23": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet40",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet41",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet40": {
      "main": [
        [
          {
            "node": "Update row in sheet69",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message82": {
      "main": [
        [
          {
            "node": "Send a text message83",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet70": {
      "main": [
        [
          {
            "node": "Send a text message82",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields17": {
      "main": [
        [
          {
            "node": "Update row in sheet70",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet41": {
      "main": [
        [
          {
            "node": "Update row in sheet71",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet71": {
      "main": [
        [
          {
            "node": "Edit Fields17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet42": {
      "main": [
        [
          {
            "node": "Code in JavaScript15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript15": {
      "main": [
        [
          {
            "node": "Send a text message84",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message84": {
      "main": [
        [
          {
            "node": "Update row in sheet72",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet29": {
      "main": [
        [
          {
            "node": "Code in JavaScript11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet50": {
      "main": [
        [
          {
            "node": "Send a text message54",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet1": {
      "main": [
        [
          {
            "node": "Edit Fields12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If15": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message57",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet31": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet32": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message55": {
      "main": [
        [
          {
            "node": "Send a text message56",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message57": {
      "main": [
        [
          {
            "node": "Edit Fields13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet53": {
      "main": [
        [
          {
            "node": "Send a text message55",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields12": {
      "main": [
        [
          {
            "node": "Update row in sheet53",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet54": {
      "main": [
        [
          {
            "node": "Send a text message58",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields13": {
      "main": [
        [
          {
            "node": "Update row in sheet54",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript11": {
      "main": [
        [
          {
            "node": "If16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If16": {
      "main": [
        [
          {
            "node": "Send a text message51",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet50",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If24": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet29",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet27": {
      "main": [
        [
          {
            "node": "Code in JavaScript10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet47": {
      "main": [
        [
          {
            "node": "Send a text message49",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch12": {
      "main": [
        [
          {
            "node": "Send a text message50",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message52",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If12": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet28",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato YYYY-MM-DD3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD3": {
      "main": [
        [
          {
            "node": "Update row in sheet48",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram OK14": {
      "main": [
        [
          {
            "node": "Send a text message53",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet48": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message50": {
      "main": [
        [
          {
            "node": "Update row in sheet49",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet28": {
      "main": [
        [
          {
            "node": "Switch12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message52": {
      "main": [
        [
          {
            "node": "Edit Fields10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields10": {
      "main": [
        [
          {
            "node": "Update row in sheet51",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet52": {
      "main": [
        [
          {
            "node": "Edit Fields11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields11": {
      "main": [
        [
          {
            "node": "Update row in sheet55",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet55": {
      "main": [
        [
          {
            "node": "Telegram OK14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet30": {
      "main": [
        [
          {
            "node": "Update row in sheet52",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript10": {
      "main": [
        [
          {
            "node": "If13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If13": {
      "main": [
        [
          {
            "node": "Send a text message48",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet47",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If14": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet27",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript16": {
      "main": [
        [
          {
            "node": "If11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If11": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet12",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message85",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message86": {
      "main": [
        [
          {
            "node": "Update row in sheet73",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If25": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet43",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet44",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet43": {
      "main": [
        [
          {
            "node": "Code in JavaScript17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript17": {
      "main": [
        [
          {
            "node": "If26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If26": {
      "main": [
        [
          {
            "node": "Send a text message87",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet74",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet74": {
      "main": [
        [
          {
            "node": "Send a text message88",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet44": {
      "main": [
        [
          {
            "node": "Update row in sheet76",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message89": {
      "main": [
        [
          {
            "node": "Send a text message90",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet75": {
      "main": [
        [
          {
            "node": "Send a text message89",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields18": {
      "main": [
        [
          {
            "node": "Update row in sheet75",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet76": {
      "main": [
        [
          {
            "node": "Edit Fields18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "e0bcd41c-e2b6-41df-9047-9451b6127778",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "9074f108d8db127b26f4aa6ef5f25ee50aadf1b812ecf4cf9b0b39aed5dfbac1"
  },
  "id": "5sysZ3e4iy-kC8_qZrT6F",
  "tags": []
}