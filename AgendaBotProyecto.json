{
  "name": "AgendaBot",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        12992,
        12976
      ],
      "id": "f1b7535c-1d33-4b60-90b0-c1df16b87713",
      "name": "Telegram Trigger",
      "webhookId": "c417538b-5766-4202-88a3-1dd12713d5ef",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.message.chat.first_name }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13200,
        12976
      ],
      "id": "b87b837c-2f85-4caa-ac51-38587687e5e4",
      "name": "Update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13408,
        12976
      ],
      "id": "ef621080-8805-4424-bbb7-6e86db6a85a1",
      "name": "Get row(s) in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "186bad57-c7b2-4213-9622-8703c693f1ea"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "72a54972-047c-4a0d-918e-ade3f6c74074",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "empty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "8abed294-fd72-4894-9012-22363b325ad7",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "MENU",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "aeafb69b-8506-4933-86e2-a2cb79f7967e",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "6d37cf9b-3ea7-4aa2-a6ed-58e4c2c4bf5e",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA_EDIT",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "937947ba-45cb-4229-b13e-7421e3a92314",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "eb2a8ce0-3b63-4d7f-a472-e94f0775ef14",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "472d10a6-cf31-4632-830f-8f5a2f6315ea",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREAS",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "5b9c839b-26e1-4d3f-8181-4d955c6d5d68",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREA_EDIT",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "8da963bd-52aa-41ac-9e5d-74c2c49810fc",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREA_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "3259c32f-a4f1-4da4-93fb-b7143a9b6c4a",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREA_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0e4bcae4-f384-4d05-9124-ccc3f6e3586a",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "HABITOS",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "cf4d8a0a-683d-4f7c-8509-bcaf3ac1b8ff",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "HABITO_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "6cc4bb38-5a0b-4778-ae3e-eb9d43fa6809",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "HABITO_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9dd7a314-04b1-422d-b6f9-3f65e8b90d9a",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "LISTA",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "56261382-b2cf-4a4c-8d1f-487fc7d9dc46",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "LISTA_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9f3460a4-2616-4ca7-b4d2-5ab8ef7fe62d",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "LISTA_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        13632,
        12176
      ],
      "id": "8621267b-5866-45a8-88fd-9840be903d21",
      "name": "Switch"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14496,
        10080
      ],
      "id": "ae0894d8-e08c-4b13-a569-e9428532b625",
      "name": "Update row in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14192,
        10592
      ],
      "id": "93e01c68-0cbe-4d2b-b859-3ed2ab8b8e29",
      "name": "Send a text message",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "content": "Si el usuario ingresa \"9\" se retornar√° el mensaje de MEN√ö PRINCIPAL en cualquier parte del programa",
        "height": 96,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        13840,
        10560
      ],
      "typeVersion": 1,
      "id": "999d58e6-7963-4a16-a11e-9ffd2ccdaad0",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Hola, soy AgendaBot üëã\n\nEstoy aqu√≠ para ayudarte a organizar tus citas, tareas y recordatorios\nde forma sencilla y sin complicaciones.\n\nPuedes escribirme en cualquier momento.\nPara avanzar, solo tienes que escribir el n√∫mero de la opci√≥n que quieras usar.\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nMensaje de orientaci√≥n:\n\nTip r√°pido: escribe solo el n√∫mero (por ejemplo: 1) y presiona enviar.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14192,
        10784
      ],
      "id": "8d1c0d6c-b8dd-4166-923f-a7f7997e237c",
      "name": "Send a text message1",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "content": "Cuando el usuario inicia por primera vez se otorgar√° el estado de BIENVENIDA, que es el mensaje de MEN√ö PRINCIPAL con un mensaje especial",
        "height": 112,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        13840,
        10752
      ],
      "typeVersion": 1,
      "id": "4875dca6-795d-4313-bace-e459bb2eab19",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "0",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "7b4ea7af-adc0-4372-b1ab-6544558c5fe0"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "4f23485a-7f79-47b0-8ab9-0251efd9c614",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "30afad59-fb6a-488e-ae09-a9fb3bab0499",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a8cb77bc-3bbd-4860-848a-687f4370ea7b",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "d6851864-6261-491d-bdb6-a2d2b809bd1b",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0ef506af-ce13-4342-a5d2-a95da5c228ad",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "52dfa6a5-59e1-4f91-a6ec-26f5f5bde465",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "6",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "32470be4-638a-4031-8607-9491ea88d98f",
                    "leftValue": "",
                    "rightValue": "7",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "585d96b9-2639-4e90-83b2-a683e1581626",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "8",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "580946f9-9f32-4ed2-80f1-2e9bc69af212",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "0, 1, 2, 3, 4, 5, 6, 7, 8",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        14624,
        10720
      ],
      "id": "9cda78d5-59ef-4bf3-9029-6c68ccf3db29",
      "name": "Switch1"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Este bot funciona con men√∫s num√©ricos y pasos guiados, para que todo sea claro y sin complicaciones. Ten en cuenta lo siguiente:\n\n1Ô∏è‚É£ C√≥mo navegar por los men√∫s\n\nCuando veas un men√∫, responde solo con el n√∫mero de la opci√≥n que quieras usar\nüëâ Ejemplo: 1, 3, 6\n\nNo escribas texto adicional ni comandos como /start.\n\nEl bot siempre te dir√° d√≥nde est√°s y qu√© opciones tienes.\n\nüí° Recomendaci√≥n: si no sabes por d√≥nde empezar, el bot siempre te sugerir√° una opci√≥n.\n\n2Ô∏è‚É£ Ingreso de datos paso a paso\n\nCuando se pida una fecha, usa el formato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\nPara hora, usa formato 24 horas: HH:MM\nEjemplo: 14:30\n\nSi se pide texto (nombre, motivo, t√≠tulo), escribe la informaci√≥n tal cual.\n\nCuando haya opciones, elige solo el n√∫mero correspondiente.\n\nEl bot validar√° la informaci√≥n y te avisar√° si algo no es correcto.\n\n3Ô∏è‚É£ Cancelar o volver atr√°s\n\nEn la mayor√≠a de los pasos puedes escribir:\n9 ‚Üí Cancelar o volver\n\nEl bot nunca guardar√° nada sin pedirte confirmaci√≥n previa.\n\n4Ô∏è‚É£ Si algo no sale como esperas\n\nSi ingresas una opci√≥n inv√°lida, el bot te avisar√° y te mostrar√° nuevamente el men√∫.\n\nTodas las acciones quedan registradas para mantener el control y evitar errores.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14832,
        9888
      ],
      "id": "f2bc2b9a-4ae0-4908-a10b-b2ac4b3b45e8",
      "name": "Send a text message2",
      "webhookId": "2f72050a-901e-4314-9988-37623d8cb50d",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15008,
        9888
      ],
      "id": "7d858e2b-52d7-469d-9e78-6e5811ca8ea3",
      "name": "Send a text message3",
      "webhookId": "e1b34d6a-5286-4830-a7ee-7e8c8ee6f4f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "content": "### Opciones Mne√∫\nIndicaciones iniciales de cada opci√≥n",
        "height": 96,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        14800,
        9760
      ],
      "typeVersion": 1,
      "id": "49b32468-c42c-4025-8e24-530b90a4b91c",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14368,
        10784
      ],
      "id": "e0281e11-1520-408e-ab64-6df40882dc01",
      "name": "Update row in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14832,
        10080
      ],
      "id": "3d290a5f-56fe-428d-b1d2-1f65594140d0",
      "name": "Send a text message4",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "retryOnFail": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ principal\nOpciones disponibles: 0 al 8",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14944,
        11616
      ],
      "id": "3bfa854d-16f0-483c-8ac9-03089b1afc8e",
      "name": "Send a text message5",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15200,
        11616
      ],
      "id": "2fd01255-bb6b-496d-926a-15af96442690",
      "name": "Send a text message6",
      "webhookId": "e1b34d6a-5286-4830-a7ee-7e8c8ee6f4f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "AGENDA"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15040,
        10080
      ],
      "id": "947da4e9-7e99-4d5b-851a-1c582170352f",
      "name": "Update row in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c0f971a3-78c3-47f7-bd13-0ccf2ee00f7a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b974eb1-a693-4df3-989d-f7de83649604",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "bcb58231-fbde-4cbf-a34e-0210b6ce55d1",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 4, 5, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        15952,
        10288
      ],
      "id": "0daab2f6-b02e-4393-a3de-41fecd7f4800",
      "name": "Switch2"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ agenda\nOpciones disponibles: 1 al 5 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16208,
        10672
      ],
      "id": "e850b9b8-b536-4237-8cff-610d59c65004",
      "name": "Send a text message7",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16464,
        10672
      ],
      "id": "3481df89-408c-46aa-aa24-294c7eea072b",
      "name": "Send a text message8",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu cita.\n\nPaso 1 de 6\n¬øCu√°l es la fecha de la cita?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16208,
        9760
      ],
      "id": "271e095a-dcc4-497d-9f57-996f936e523c",
      "name": "Send a text message9",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16464,
        9760
      ],
      "id": "669fa501-f42d-455b-913b-7002dcd5bb6e",
      "name": "Update row in sheet4",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        15552,
        11360
      ],
      "id": "c3676629-2529-43d9-bb69-2ccf87af02a5",
      "name": "If"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9b0b7bf2-3274-407a-950e-8392c39aa912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0a90db21-1ee3-4016-ae6e-4dfd7eb90912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 5,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b6c711aa-8613-45b0-8d4a-cdfe694a3fb5",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 6,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        16512,
        10992
      ],
      "id": "4be72419-3c70-4ad9-ac44-bd4351b55e6f",
      "name": "Switch3"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "231c52fb-d059-4e7c-bab0-5530a4c14eaa",
      "name": "Validar formato YYYY-MM-DD",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        17360,
        10496
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 6\n¬øA qu√© hora ser√° la cita?\n\nFormato 24 horas (HH:MM)\nEjemplo: 14:30\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "4835f89b-f077-478e-8cb5-24503e7dc60e",
      "name": "Telegram OK",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        18336,
        10176
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "79e73936-b95c-41c3-90ca-9f1da9eb8161",
      "name": "Telegram Error",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        17840,
        10608
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18080,
        10176
      ],
      "id": "76b74c18-1b2e-4f06-9661-ef9a2acf742a",
      "name": "Update row in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^([01]\\d|2[0-3]):([0-5]\\d)$"
            }
          ]
        }
      },
      "id": "e35b056c-20e0-4f45-960f-641cae862bb6",
      "name": "Validar formato HH:MM",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        17344,
        10928
      ]
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18096,
        10816
      ],
      "id": "fe29c0e5-fbc9-4680-b1b9-583fc37e414b",
      "name": "Update row in sheet6",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17840,
        10816
      ],
      "id": "e370d7f9-547f-499f-86dd-05f6eede7a56",
      "name": "Get row(s) in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:HH:MM\nEjemplo: 14:20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "03a30ddb-e2cd-411f-af31-ed3c264b4541",
      "name": "Telegram Error1",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        17840,
        11008
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17776,
        11168
      ],
      "id": "d2254746-da97-427b-90b5-f0c33d5a25f7",
      "name": "Update row in sheet7",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17520,
        11168
      ],
      "id": "531dcc8b-9d74-425d-9aab-d4d11e498882",
      "name": "Get row(s) in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 4 de 6\nCu√©ntame brevemente el motivo de la cita.\n\nEjemplo: Asesor√≠a t√©cnica\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "30dbe4dd-ad6e-4307-b938-7750a6733fc8",
      "name": "Telegram OK2",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        18016,
        11168
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "5",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18000,
        11376
      ],
      "id": "8870c100-9385-4a83-9eaf-6e5b196234e2",
      "name": "Update row in sheet8",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17744,
        11376
      ],
      "id": "8b16fa87-b55c-4612-84ba-d19a64e670d7",
      "name": "Get row(s) in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 5 de 6\n¬øC√≥mo ser√° la atenci√≥n?\n\n1. Presencial\n2. Virtual\n3. Llamada\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "1425ae0c-e6aa-4446-87e7-4b2f9c360f7a",
      "name": "Telegram OK3",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        18240,
        11376
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "6",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $json.datos_parciales_4 }}",
            "datos_parciales_5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_6": "=Presencial"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17952,
        11600
      ],
      "id": "9f5c47f2-4479-410f-b3d5-ed21874612ee",
      "name": "Update row in sheet10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17712,
        11600
      ],
      "id": "9591007d-7206-479d-9506-2ffe8ca8c5de",
      "name": "Get row(s) in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu cita:\n\nFecha: {{ $json.datos_parciales_1 }}\nHora: {{ $json.datos_parciales_2 }}\nCliente: {{ $json.datos_parciales_3 }}\nMotivo: {{ $json.datos_parciales_4 }}\nCanal: Presencial\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "fd8a69cb-9401-4511-9d52-32e14ab6e73b",
      "name": "Telegram OK5",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        18192,
        11600
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "2149ed1c-6fc1-4214-9bb6-9d73396df7e2"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c3020235-3026-4758-ba53-3259646bba63",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "81655df1-f7a4-4730-bcb6-91267c74645f",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        16928,
        12592
      ],
      "id": "f3065b0a-f752-46c3-8015-cbcdb339cb79",
      "name": "Switch4",
      "executeOnce": true
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e49fdbbd-e95e-42b7-8e48-8b3cb29491bd"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "58855023-5cd0-49ff-8a4e-042adcdf4212",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b8fa012e-27ac-4322-82c7-41c4c9cad1fa",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "40cb23eb-e6be-426c-a651-7940bc7f2264",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        17328,
        11792
      ],
      "id": "89aa89d2-c9c3-4d53-8ab7-0b8543a80638",
      "name": "Switch5"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "6",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $json.datos_parciales_4 }}",
            "datos_parciales_5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_6": "=Virtual"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17952,
        11776
      ],
      "id": "40b2c023-677f-4fbb-bf5f-f896c6ddf79a",
      "name": "Update row in sheet11",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17696,
        11776
      ],
      "id": "7943facf-b9da-4124-a4cf-d0285398ca7d",
      "name": "Get row(s) in sheet6",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu cita:\n\nFecha: {{ $json.datos_parciales_1 }}\nHora: {{ $json.datos_parciales_2 }}\nCliente: {{ $json.datos_parciales_3 }}\nMotivo: {{ $json.datos_parciales_4 }}\nCanal: Virtual\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "6fdef088-1f14-488d-acdf-8c0057135830",
      "name": "Telegram OK6",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        18192,
        11776
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "6",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $json.datos_parciales_4 }}",
            "datos_parciales_5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_6": "=Llamada"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17952,
        11968
      ],
      "id": "8eed7f4e-3530-4d76-8645-7eba0e19df6b",
      "name": "Update row in sheet12",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17696,
        11968
      ],
      "id": "465633d2-a2f5-4fb0-ad06-ee33c5471cea",
      "name": "Get row(s) in sheet7",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu cita:\n\nFecha: {{ $json.datos_parciales_1 }}\nHora: {{ $json.datos_parciales_2 }}\nCliente: {{ $json.datos_parciales_3 }}\nMotivo: {{ $json.datos_parciales_4 }}\nCanal: Llamada\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "fcbb9aa1-9cc3-47c3-8294-3523a5ed4255",
      "name": "Telegram OK7",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        18192,
        11968
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no v√°lida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17696,
        12160
      ],
      "id": "3569c43e-50ea-4cb7-ae28-0ecb124ccd61",
      "name": "Send a text message10",
      "webhookId": "537b6979-63b9-49c5-8610-35f1ef19571a",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17808,
        12496
      ],
      "id": "13281108-35c3-4e80-8c67-b1884bc0b569",
      "name": "Get row(s) in sheet8",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "hora": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_2 }}",
            "fecha": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_1 }}",
            "nombre": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_3 }}",
            "motivo": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_4 }}",
            "canal": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_6 }}",
            "timestamp_creacion": "={{ $now }}",
            "estado": "={{ $json.estado }}",
            "creado_por": "={{ $('Get row(s) in sheet8').item.json.telegram_user }}",
            "id_cita": "={{ $('Code in JavaScript').item.json.id_cita }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18320,
        12496
      ],
      "id": "0368b357-6f63-41b0-938e-d55b279b3d81",
      "name": "Append row in sheet",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}\n",
        "text": "Agenda completada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18544,
        12480
      ],
      "id": "ea40c634-91f5-4440-a27f-d76628a0a1c2",
      "name": "Send a text message11",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18960,
        12496
      ],
      "id": "fdd6d998-0eeb-41c7-b8be-4abf17e35d19",
      "name": "Update row in sheet13",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17328,
        12864
      ],
      "id": "702fd9d4-a3d8-4eae-af78-16c73a90e417",
      "name": "Update row in sheet14",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Cancelado",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17584,
        12864
      ],
      "id": "08640e49-d313-4ecc-a57f-d8873d152ef1",
      "name": "Send a text message12",
      "webhookId": "dc8a9a45-0711-45a4-829a-7ab666828377",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17328,
        12672
      ],
      "id": "9e2183a2-6093-4c5d-8042-bb319379d831",
      "name": "Update row in sheet15",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu cita.\n\nPaso 1 de 6\n¬øCu√°l es la fecha de la cita?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17536,
        12672
      ],
      "id": "b6b1fb73-ebee-42f9-8eb6-a3202f22d137",
      "name": "Send a text message13",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 6\n¬øA nombre de qui√©n es la cita?\n\nEscribe el nombre completo.\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "b286ad2e-4e8e-4246-bda8-e4cf629c5ba0",
      "name": "Telegram OK1",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        18336,
        10816
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu tarea.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva tarea\n2. Consultar tus tareas\n3. Reprogramar una tarea\n4. Cancelar una tarea\n5. Marcar una tarea como completada\n9. Volver al men√∫ principal",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14832,
        10288
      ],
      "id": "f74e27b0-93ad-4d6c-b60c-7a5544456149",
      "name": "Send a text message14",
      "webhookId": "928178ae-ec5a-433b-af9a-0e3142214c88",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "TAREAS"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15040,
        10288
      ],
      "id": "80eb4a73-34bb-4ab2-9e4a-b9afa75345fd",
      "name": "Update row in sheet16",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17328,
        12496
      ],
      "id": "18c18968-9a2f-48f0-9ebd-1ec8ac10a583",
      "name": "Get row(s) in sheet4",
      "alwaysOutputData": true,
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\n\n// Extraer IDs v√°lidos\nconst ids = rows\n  .map(r => r.json.id_cita)\n  .filter(id => typeof id === 'string' && /^CITA-\\d+$/.test(id));\n\n// Si no hay IDs v√°lidos, iniciar contador\nif (ids.length === 0) {\n  return [{\n    json: {\n      id_cita: 'CITA-001'\n    }\n  }];\n}\n\n// Ordenar y obtener el √∫ltimo\nids.sort((a, b) => {\n  const numA = parseInt(a.split('-')[1], 10);\n  const numB = parseInt(b.split('-')[1], 10);\n  return numA - numB;\n});\n\nconst lastId = ids[ids.length - 1];\nconst lastNumber = parseInt(lastId.split('-')[1], 10);\nconst newNumber = lastNumber + 1;\n\n// Formato final\nconst newId = `CITA-${String(newNumber).padStart(3, '0')}`;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    id_cita: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        17536,
        12496
      ],
      "id": "828334cc-2e8b-433b-aea4-b6d4837e23e2",
      "name": "Code in JavaScript",
      "executeOnce": true
    },
    {
      "parameters": {
        "jsCode": "\nconst fecha = $input.first().json.datos_parciales_1; // YYYY-MM-DD\nconst hora = $input.first().json.datos_parciales_2;  // HH:mm\n\nif (!fecha || !hora) {\n  return [{\n    json: {\n      estado: 'Pendiente'\n    }\n  }];\n}\n\nconst fechaCita = new Date(`${fecha}T${hora}:00`);\n\nconst ahora = new Date();\n\nconst estado = fechaCita < ahora ? 'Completada' : 'Pendiente';\n\n\nreturn [{\n  json: {\n    estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        18048,
        12496
      ],
      "id": "5bc88cbc-3cf5-4106-820a-b5cee304a5e7",
      "name": "Code in JavaScript1",
      "executeOnce": true
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        19216,
        12416
      ],
      "id": "6aeb3ed5-7fe5-4e8a-9de1-15a6aa9c858a",
      "name": "Send a text message22",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        18768,
        12496
      ],
      "id": "bf7d5be1-2342-4596-ae75-0c48c11cdc24",
      "name": "Edit Fields",
      "executeOnce": true
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16240,
        9968
      ],
      "id": "ba6b768c-2e58-4002-b066-325b0b352400",
      "name": "Get row(s) in sheet14",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "\nconst pendientes = items\n  .map(i => i.json)\n  .filter(cita => cita.estado === 'Pendiente');\n\nif (pendientes.length === 0) {\n  return [{\n    json: {\n      mensaje: 'No tienes citas pendientes en la agenda.'\n    }\n  }];\n}\n\nlet mensaje = 'üìÖ *Citas pendientes*\\n\\n';\n\npendientes.forEach((cita, index) => {\n  mensaje +=\n    `${index + 1}. *${cita.id_cita}*\\n` +\n    `${cita.nombre}\\n` +\n    `${cita.fecha} ‚è∞ ${cita.hora}\\n` +\n    `${cita.motivo}\\n` +\n    `${cita.canal}\\n\\n`;\n});\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        16480,
        9968
      ],
      "id": "e501cba0-54ad-410d-b8d6-ff32a08fde9a",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16688,
        9968
      ],
      "id": "e5e2a2b0-5e7d-416f-8825-6a2f5175f2f2",
      "name": "Send a text message23",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16896,
        9968
      ],
      "id": "a48d61b8-ef03-489b-9362-f51375b3d912",
      "name": "Update row in sheet9",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "content": "Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "height": 80,
        "width": 368
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        15728,
        10032
      ],
      "typeVersion": 1,
      "id": "d2292f51-b183-471e-8e18-43c6175080c1",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la cita que deseas reprogramar.\nEjemplo: CITA-003\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16240,
        10160
      ],
      "id": "4a2ce273-3093-4eb1-90a7-b9290d44583e",
      "name": "Send a text message24",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": ""
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16448,
        10160
      ],
      "id": "71257445-1b78-4dcc-b27c-64b9cb63faee",
      "name": "Update row in sheet20",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14352,
        13920
      ],
      "id": "d61c7089-2aff-4b69-9889-52501f0c0459",
      "name": "Get row(s) in sheet15",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst citas = items.map(i => i.json);\n\nconst cita = citas.find(c => c.id_cita === idIngresado);\n\nif (!cita) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una cita con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (cita.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar citas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_cita: cita.id_cita,\n    rowNumber: cita.rowNumber,\n    estado_actual: cita.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        14592,
        13920
      ],
      "id": "a913d73c-315b-40cd-946e-be5dcbc1b8fb",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        14800,
        13920
      ],
      "id": "6d3f67e2-350c-4f3e-a12b-d90ccc81329a",
      "name": "If2"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "AGENDA_EDIT",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "AGENDA_EDICION"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15216,
        13984
      ],
      "id": "188a7600-0962-45f9-8ba2-fcdbd916aa03",
      "name": "Update row in sheet21",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        13952,
        14272
      ],
      "id": "6bd4c5f6-2f3b-41d7-a652-67b5c211b523",
      "name": "If3"
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript3').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15216,
        13776
      ],
      "id": "fc639227-81ac-4ddd-82d6-02d2be68615f",
      "name": "Send a text message25",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øQu√© deseas modificar de la cita {{$json.datos_parciales_1}}?\n\n1) Fecha\n2) Hora\n3) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15456,
        13984
      ],
      "id": "68daf5ab-f9a7-4b3c-bc17-d08a8cdd21ce",
      "name": "Send a text message26",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "ec675a21-b990-4a0b-b606-021f5e25e71e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "7b9cae24-63de-4dba-82a2-9102b9d8c34b",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "dca7b002-8fba-4618-add1-6e508cc3f0ef",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        14864,
        14400
      ],
      "id": "c5f4a872-54d2-4b94-a06c-1a908aedbb41",
      "name": "Switch10"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d9a64f2e-d27d-4b36-9cb0-93827b2a3636",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        14368,
        14688
      ],
      "id": "c901ec85-bf96-42b7-a8cf-75ba2a15f6f3",
      "name": "If4"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "6df46b07-dc24-4e14-af3b-5e45e7c55da3",
      "name": "Validar formato YYYY-MM-DD2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        15184,
        14864
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha actualizada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "dd84f0e8-9e6b-49a8-8f4c-d29d012c5070",
      "name": "Telegram OK4",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        16896,
        14736
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20\nIntenta nuevamente.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "f0a29478-a63f-450e-a724-071c03c18059",
      "name": "Telegram Error3",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        15664,
        14976
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15664,
        14736
      ],
      "id": "29648ecc-9abc-4931-8c97-ea3d117eef6a",
      "name": "Update row in sheet23",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ingrese la fecha.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15232,
        14176
      ],
      "id": "7ef6d1be-cb50-4547-bfba-43c492b5cdca",
      "name": "Send a text message27",
      "webhookId": "091ffb67-df42-49eb-a2b1-1e8a031acfc4",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet16').item.json.datos_parciales_1 }}",
            "row_number": 2,
            "datos_parciales_2": "1",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15456,
        14176
      ],
      "id": "bac8dc01-7bb9-4a98-916f-b3b2710d3190",
      "name": "Update row in sheet29",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14656,
        14416
      ],
      "id": "181c81c5-7b25-48a8-8a17-4ce916f3b552",
      "name": "Get row(s) in sheet16",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ingrese la hora.\nFormato requerido:HH:MM\nEjemplo: 12:20",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15232,
        14384
      ],
      "id": "dc96c569-b590-4100-a100-76176c6f2a15",
      "name": "Send a text message28",
      "webhookId": "091ffb67-df42-49eb-a2b1-1e8a031acfc4",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet16').item.json.datos_parciales_1 }}",
            "row_number": 2,
            "datos_parciales_2": "2",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15440,
        14384
      ],
      "id": "6557fdb5-570c-4e15-9658-b49633b0fca0",
      "name": "Update row in sheet30",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15680,
        14576
      ],
      "id": "8f8fb3e7-baf2-4d03-b9a4-9ed550074999",
      "name": "Update row in sheet31",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15232,
        14576
      ],
      "id": "9a3815f1-b05f-4358-a29b-cb3fc877af30",
      "name": "Send a text message29",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6ec5bccf-438b-4d68-8947-62e86d961fc3",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        15472,
        14576
      ],
      "id": "cddaa98d-2428-4164-8a1f-89dfb3af945b",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "74aab308-0919-4efd-b14d-4c702a1df543"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "df6b2b69-9f3c-4db6-ba69-cf31f436ee23",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        14688,
        15072
      ],
      "id": "5d16400b-d998-49f7-b745-4a3f1cc5a357",
      "name": "Switch11"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^([01]\\d|2[0-3]):([0-5]\\d)$"
            }
          ]
        }
      },
      "id": "b78bda12-92f3-47fa-a56d-9587bf4eb87c",
      "name": "Validar formato HH:MM1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        15168,
        15280
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:HH:MM\nEjemplo: 14:20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "b055dc77-65bc-42c8-8774-d70cc2ac0c5a",
      "name": "Telegram Error4",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        15664,
        15360
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Hora actualizada.",
        "additionalFields": {}
      },
      "id": "515a6433-9f91-42b3-9f9c-f4e598c09325",
      "name": "Telegram OK13",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        16928,
        15168
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_cita": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "fecha": "={{ $('Update row in sheet23').item.json.datos_parciales_2 }}",
            "hora": "={{ $json.hora }}",
            "nombre": "={{ $json.nombre }}",
            "motivo": "={{ $json.motivo }}",
            "canal": "={{ $json.canal }}",
            "estado": "={{ $json.estado }}",
            "creado_por": "={{ $json.creado_por }}",
            "timestamp_creacion": "={{ $json.timestamp_creacion }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16144,
        14736
      ],
      "id": "bca62b24-c293-401f-ba31-3d7f8fa32d70",
      "name": "Update row in sheet33",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15648,
        15168
      ],
      "id": "cfd59358-5ac4-4a4c-9a7a-8fbad0b137ef",
      "name": "Update row in sheet32",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_cita": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "fecha": "={{ $json.fecha }}",
            "hora": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2 }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16144,
        15168
      ],
      "id": "7677b53b-59e5-4d90-83ce-30229d76f4f6",
      "name": "Update row in sheet34",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a039b49-2c5e-4e19-8dc1-35eabd92e9e2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        16400,
        14736
      ],
      "id": "459e2354-c543-47e3-9948-bc3dc4f0f61f",
      "name": "Edit Fields3"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16656,
        14736
      ],
      "id": "584ffa3d-a41e-4f3b-a797-09a966af7209",
      "name": "Update row in sheet35",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a039b49-2c5e-4e19-8dc1-35eabd92e9e2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        16400,
        15168
      ],
      "id": "2ca7fa0c-fdf1-42fc-bc49-47f6b3ee6abb",
      "name": "Edit Fields4"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16656,
        15168
      ],
      "id": "e9d64812-8402-4c76-9876-87ab09d0e9e6",
      "name": "Update row in sheet36",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17120,
        14736
      ],
      "id": "ad11bb7c-4bb0-451e-9086-fc09c4119cfe",
      "name": "Send a text message30",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17152,
        15168
      ],
      "id": "e35ffcb9-eb24-47cc-9067-eb12a5e8e776",
      "name": "Send a text message31",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9825738e-fa38-494e-9dec-f8d4c8bff8d2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        14336,
        10320
      ],
      "id": "03b944f5-1761-433c-898a-32ff5187498a",
      "name": "Edit Fields5"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15888,
        15168
      ],
      "id": "5fd75be6-7359-4d68-8b53-90d391ee387e",
      "name": "Get row(s) in sheet17",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15904,
        14736
      ],
      "id": "d54b36e1-c21a-4b66-beef-212a79534bb2",
      "name": "Get row(s) in sheet18",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la cita que deseas eliminar.\nEjemplo: CITA-003\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16240,
        10336
      ],
      "id": "013f1609-4609-4250-9adb-2c5610782d0f",
      "name": "Send a text message32",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16448,
        10336
      ],
      "id": "36250534-49b5-4401-a710-c189b85d4146",
      "name": "Update row in sheet37",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14272,
        15728
      ],
      "id": "5a80f1c7-0508-493b-98a4-cc324d557bbc",
      "name": "Get row(s) in sheet19",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst citas = items.map(i => i.json);\n\nconst cita = citas.find(c => c.id_cita === idIngresado);\n\nif (!cita) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una cita con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (cita.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar citas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_cita: cita.id_cita,\n    rowNumber: cita.rowNumber,\n    estado_actual: cita.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        14512,
        15728
      ],
      "id": "aa277a04-5083-4f39-8667-98987ea69cd5",
      "name": "Code in JavaScript4"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        14720,
        15728
      ],
      "id": "80628ec4-5dcd-4ab4-b5c6-d3edf9f8cca1",
      "name": "If5"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "AGENDA_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE2"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15136,
        15792
      ],
      "id": "7cbbe516-e21f-44e2-9603-319f57877862",
      "name": "Update row in sheet38",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        13872,
        16080
      ],
      "id": "ef1fc437-e780-4024-9d2e-c7a064324af1",
      "name": "If6"
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript4').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15136,
        15584
      ],
      "id": "d1626dec-5f1e-42a3-a018-3525f8f3a04d",
      "name": "Send a text message33",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15376,
        15792
      ],
      "id": "1e3237ef-bb1f-46be-b98e-b7a25e7b8363",
      "name": "Send a text message34",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15152,
        16304
      ],
      "id": "408f5df1-79c2-46ca-8197-7060d81d7ba9",
      "name": "Delete rows or columns from sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        14416,
        16448
      ],
      "id": "600d129b-f67e-4a21-a34c-0f7ebb4072d9",
      "name": "If7"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14928,
        16304
      ],
      "id": "038279c2-537e-4a09-9324-a1c3eeb11726",
      "name": "Get row(s) in sheet20",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14688,
        16304
      ],
      "id": "352f79b8-e7b3-46dc-85e7-8c259decac78",
      "name": "Get row(s) in sheet21",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Registro eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15744,
        16304
      ],
      "id": "79a4420d-2c22-4a94-b537-ac3338322c63",
      "name": "Send a text message35",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15952,
        16304
      ],
      "id": "1a32bf94-4648-4be1-b3eb-7f64b337ea46",
      "name": "Send a text message36",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14672,
        16576
      ],
      "id": "ed0ae716-03a9-4a95-8a60-f7289d355535",
      "name": "Send a text message37",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15360,
        16576
      ],
      "id": "e1973f19-bbc3-489a-b462-bf3e66187d22",
      "name": "Send a text message38",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15552,
        16304
      ],
      "id": "97dc7b23-e88a-495f-b3f0-acf4bdd548fe",
      "name": "Update row in sheet39",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        15360,
        16304
      ],
      "id": "01bc0b7b-6d77-4415-99c3-0a26e5323b9e",
      "name": "Edit Fields6"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15120,
        16576
      ],
      "id": "2212a049-79cb-4dcc-980e-f7f0a6801648",
      "name": "Update row in sheet40",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        14928,
        16576
      ],
      "id": "38b6a42c-6bdb-457a-afb0-c72e10ed939b",
      "name": "Edit Fields7"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16432,
        10512
      ],
      "id": "82806048-d102-4809-8e6c-4ef24b2cae09",
      "name": "Update row in sheet41",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        13824,
        17200
      ],
      "id": "44227967-98c1-41bb-ac18-6b8f1f4dd480",
      "name": "If8"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "estado",
              "lookupValue": "Pendiente"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14352,
        17024
      ],
      "id": "f7c712de-f3d8-4fd6-9b1a-be946dad0d55",
      "name": "Get row(s) in sheet22",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst citas = items.map(i => i.json);\n\nconst cita = citas.find(c => c.id_cita === idIngresado);\n\nif (!cita) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una cita con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (cita.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar citas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_cita: cita.id_cita,\n    rowNumber: cita.rowNumber,\n    estado_actual: cita.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        14592,
        17024
      ],
      "id": "47db6380-a111-476f-921b-37b92cdb1345",
      "name": "Code in JavaScript5"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        14800,
        17024
      ],
      "id": "2325d176-0ac6-4725-b4ab-77a43bb3afde",
      "name": "If9"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "AGENDA_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15216,
        17088
      ],
      "id": "0eaa3498-37ce-4044-86bd-be872bd7e501",
      "name": "Update row in sheet42",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript5').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15216,
        16880
      ],
      "id": "a87e1e60-4861-478f-a7dc-f727175de424",
      "name": "Send a text message40",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15456,
        17088
      ],
      "id": "62a834f0-e47e-4b6b-b985-0aa1e57dcdb9",
      "name": "Send a text message41",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14400,
        17376
      ],
      "id": "b3c32769-f6b1-4dca-9f6c-68781fe3c7b4",
      "name": "Get row(s) in sheet23",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15408,
        17376
      ],
      "id": "11412f16-719b-43c6-bd95-d8f992f0c60b",
      "name": "Send a text message42",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15616,
        17376
      ],
      "id": "b1689770-e334-41fb-bc6f-5d3665e79156",
      "name": "Send a text message43",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15216,
        17376
      ],
      "id": "6faf7548-46f0-4c40-a79c-d2bafd0dba4f",
      "name": "Update row in sheet43",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        15024,
        17376
      ],
      "id": "2964d52f-a62f-4299-9b98-f63c97d6aed2",
      "name": "Edit Fields8"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la cita que deseas completar.\nEjemplo: CITA-003\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16224,
        10512
      ],
      "id": "9c5abc65-8a52-4c8c-bd4f-b370f545d693",
      "name": "Send a text message39",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_cita": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "estado": "Completada",
            "fecha": "={{ $json.fecha }}",
            "hora": "={{ $json.hora }}",
            "nombre": "={{ $json.nombre }}",
            "motivo": "={{ $json.motivo }}",
            "canal": "={{ $json.canal }}",
            "creado_por": "={{ $json.creado_por }}",
            "timestamp_creacion": "={{ $json.timestamp_creacion }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14720,
        17376
      ],
      "id": "243d9559-ff8b-4c1a-b192-80271188f178",
      "name": "Update row in sheet44",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "30a49837-b923-41ce-88cb-942693e24e67",
              "leftValue": "={{ $json.valido }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        17824,
        10336
      ],
      "id": "0d724bea-6332-4fff-a60f-af84e8bcce2d",
      "name": "If10"
    },
    {
      "parameters": {
        "jsCode": "const fechaIngresada = new Date($('Telegram Trigger').first().json.message.text);\nconst hoy = new Date();\n\n\nfechaIngresada.setHours(0,0,0,0);\nhoy.setHours(0,0,0,0);\n\nif (fechaIngresada < hoy) {\n  return [{\n    json: {\n      valido: false,\n      error: 'No puedes agendar citas en fechas pasadas'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    valido: true,\n    fecha: $json.fecha\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        17664,
        10336
      ],
      "id": "a43760f3-eb39-4f11-8a3f-3470c0bb1674",
      "name": "Code in JavaScript9"
    },
    {
      "parameters": {
        "chatId": "={{ $node['Telegram Trigger'].json.message.chat.id }}",
        "text": "Formato invalido, no puedes agendar citas en el pasado. Int√©ntalo de nuevo o escribe 9 para salir",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18080,
        10432
      ],
      "id": "8f64453d-1960-47c5-a044-fb0efcfdd2a4",
      "name": "Send a text message19",
      "webhookId": "48a8ad57-682c-4bfe-b1e6-51ce21ca9c17",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        19632,
        11168
      ],
      "id": "a7dc74f6-a25a-4be4-a652-94879292f839",
      "name": "If1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c0f971a3-78c3-47f7-bd13-0ccf2ee00f7a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b974eb1-a693-4df3-989d-f7de83649604",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "bcb58231-fbde-4cbf-a34e-0210b6ce55d1",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 4, 5, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        19824,
        10128
      ],
      "id": "77b31f9a-bc3d-41ed-b946-85a75e326fe1",
      "name": "Switch6"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu tarea.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la tarea?\n\nEjemplo: Estudiar para un examen\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        20032,
        9632
      ],
      "id": "0cf664e3-e5d6-444f-8dfc-a920c1a37718",
      "name": "Send a text message15",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ tareas\nOpciones disponibles: 1 al 5 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        20048,
        10624
      ],
      "id": "e5932cad-4b93-4c92-b43e-89c7b1bfcfcc",
      "name": "Send a text message16",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu tarea.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva tarea\n2. Consultar tus tareas\n3. Reprogramar una tarea\n4. Cancelar una tarea\n5. Marcar una tarea como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        20256,
        10624
      ],
      "id": "162be1db-cdbe-4439-8796-c66aa69e9bcc",
      "name": "Send a text message17",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "1",
            "datos_parciales_1": "=",
            "timestamp_ultima_interaccion": "{{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20224,
        9632
      ],
      "id": "eb506fea-13a5-4f43-8c13-baee1ad15e63",
      "name": "Update row in sheet22",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const tareas = items.map(i => i.json);\n\nconst pendientes = tareas.filter(t => t.estado === 'Pendiente');\nconst completadas = tareas.filter(t => t.estado === 'Completada');\n\nlet mensaje = 'üìã *Resumen de tareas*\\n\\n';\n\nif (pendientes.length === 0 && completadas.length === 0) {\n  mensaje += 'No tienes tareas registradas.';\n} else {\n  if (pendientes.length > 0) {\n    mensaje += 'üìÖ *Tareas pendientes*\\n\\n';\n    pendientes.forEach((tarea, index) => {\n      mensaje +=\n        `${index + 1}. *${tarea.id_tarea}*\\n` +\n        `${tarea.titulo}\\n` +\n        `${tarea.prioridad}\\n` +\n        `${tarea.fecha_objetivo}\\n\\n`;\n    });\n  } else {\n    mensaje += 'üìÖ *Tareas pendientes*\\n\\nNo tienes tareas pendientes.\\n\\n';\n  }\n\n  if (completadas.length > 0) {\n    mensaje += '‚úÖ *Tareas completadas*\\n\\n';\n    completadas.forEach((tarea, index) => {\n      mensaje +=\n        `${index + 1}. *${tarea.id_tarea}*\\n` +\n        `${tarea.titulo}\\n` +\n        `${tarea.prioridad}\\n` +\n        `${tarea.fecha_objetivo}\\n\\n`;\n    });\n  }\n}\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        20272,
        9856
      ],
      "id": "6aa83a81-6145-480e-b9c5-ca4600fc2bbc",
      "name": "Code in JavaScript6"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20704,
        9856
      ],
      "id": "3c975053-4507-46a6-8284-06d2779b6344",
      "name": "Update row in sheet17",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "content": "Perfecto, vamos con tu tarea.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva tarea\n2. Consultar tus tareas\n3. Reprogramar una tarea\n4. Cancelar una tarea\n5. Marcar una tarea como completada\n9. Volver al men√∫ principal",
        "height": 256,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        19456,
        9904
      ],
      "typeVersion": 1,
      "id": "cc0a644b-e8b5-4588-84a4-0b3d4315d127",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20032,
        9856
      ],
      "id": "496cff9d-bb9b-4107-8efd-5205381cc187",
      "name": "Get row(s) in sheet26",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        20496,
        9856
      ],
      "id": "a1c1d2b4-d75a-4296-b1c7-62f31a2761f4",
      "name": "Send a text message46",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la tarea que deseas reprogramar.\nEjemplo: TAREA-003\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        20032,
        10048
      ],
      "id": "ff4bebb1-f9f1-4a82-a620-d5329ecd1ec4",
      "name": "Send a text message47",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_EDIT"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20240,
        10048
      ],
      "id": "6fca5e64-6e70-401a-bac5-9b6f12e62c2b",
      "name": "Update row in sheet46",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la tarea que deseas eliminar.\nEjemplo: TAREA-001\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        20032,
        10240
      ],
      "id": "276bb25c-fb02-4fd3-92f4-50d6e0d5bd77",
      "name": "Send a text message59",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20240,
        10240
      ],
      "id": "9b77bd50-671a-4ff1-9ac7-9db1109c16dc",
      "name": "Update row in sheet56",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9b0b7bf2-3274-407a-950e-8392c39aa912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        20448,
        10848
      ],
      "id": "d6ed09f2-772c-4e32-b526-07c012c80e65",
      "name": "Switch7"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 3\n¬øCu√°l es la fecha objetivo de la tarea?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "69b488bf-45d7-4d18-adb8-f1e017453386",
      "name": "Telegram OK8",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        20992,
        10704
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no v√°lida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21472,
        11984
      ],
      "id": "07404327-229a-4229-825c-2e916a8d920d",
      "name": "Send a text message18",
      "webhookId": "537b6979-63b9-49c5-8610-35f1ef19571a",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e49fdbbd-e95e-42b7-8e48-8b3cb29491bd"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "58855023-5cd0-49ff-8a4e-042adcdf4212",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b8fa012e-27ac-4322-82c7-41c4c9cad1fa",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "40cb23eb-e6be-426c-a651-7940bc7f2264",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        21232,
        11616
      ],
      "id": "c31431cc-c5ba-40c0-8c00-6718a02d1d57",
      "name": "Switch8"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21472,
        11344
      ],
      "id": "fb2bdbb4-b9d4-451f-b079-30a4cf44c72c",
      "name": "Get row(s) in sheet9",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu tarea:\n\nT√≠tulo: {{ $json.datos_parciales_1 }}\nFecha objetivo: {{ $json.datos_parciales_2 }}\nPrioridad: {{ $json.datos_parciales_4 }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "d2fcd423-434d-4ba9-aafe-7e488beeda39",
      "name": "Telegram OK9",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        21936,
        11344
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21472,
        11552
      ],
      "id": "a971878c-9aaa-416d-9246-366db74c72c4",
      "name": "Get row(s) in sheet10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu tarea:\n\nT√≠tulo: {{ $json.datos_parciales_1 }}\nFecha objetivo: {{ $json.datos_parciales_2 }}\nPrioridad: {{ $json.datos_parciales_4 }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "36a9a6ac-8570-4129-afb3-824c31f50f78",
      "name": "Telegram OK10",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        21936,
        11552
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21472,
        11760
      ],
      "id": "1f7a9258-7025-4207-b56e-470ce2201243",
      "name": "Get row(s) in sheet11",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu tarea:\n\nT√≠tulo: {{ $json.datos_parciales_1 }}\nFecha objetivo: {{ $json.datos_parciales_2 }}\nPrioridad: {{ $json.datos_parciales_4 }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "b12006e4-6c68-4bc0-bb0a-1da96a68f1f1",
      "name": "Telegram OK11",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        21936,
        11760
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "9f5b764a-fa19-4fa0-bbf9-ede3d25e1e53",
      "name": "Validar formato YYYY-MM-DD1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        20944,
        11008
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "3ad09e8a-d191-4d2a-9917-676e7d246f66",
      "name": "Telegram Error2",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        21280,
        11152
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21760,
        10720
      ],
      "id": "ee351463-87ef-4d02-a461-890ee1f0ef29",
      "name": "Get row(s) in sheet12",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 3\n¬øCu√°l es la prioridad de la tarea?\n\n1. Baja\n2. Media\n3. Alta\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "9cf0e400-f08c-4a02-9436-d33346229ddb",
      "name": "Telegram OK12",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        22224,
        10720
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_3": "=",
            "datos_parciales_4": "=",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21984,
        10720
      ],
      "id": "9509e373-fb1f-4170-bc94-05473bb9483e",
      "name": "Update row in sheet24",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_2": "=",
            "datos_parciales_3": "=",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20768,
        10704
      ],
      "id": "94f2e036-1b3b-41a9-b282-d6b262e1056b",
      "name": "Update row in sheet25",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_4": "=Baja",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21696,
        11344
      ],
      "id": "e97260cc-0551-421a-b62a-53775fa4b23d",
      "name": "Update row in sheet26",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_4": "=Media",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21696,
        11552
      ],
      "id": "8f777b96-4cd9-4348-a5d8-c3b4fcdeef01",
      "name": "Update row in sheet27",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_4": "=Alta",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21696,
        11760
      ],
      "id": "542664df-0469-49cf-b78f-c41292ea3e36",
      "name": "Update row in sheet28",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "2149ed1c-6fc1-4214-9bb6-9d73396df7e2"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c3020235-3026-4758-ba53-3259646bba63",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "81655df1-f7a4-4730-bcb6-91267c74645f",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        20800,
        12224
      ],
      "id": "4e6e7209-7caa-492c-ad79-eb47b262a983",
      "name": "Switch9"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21104,
        12624
      ],
      "id": "cca9663d-d69b-4f5c-ae88-4cf610089072",
      "name": "Update row in sheet18",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Cancelado",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21360,
        12624
      ],
      "id": "5b8994e5-ee45-4956-8cc4-6c68f086f764",
      "name": "Send a text message20",
      "webhookId": "dc8a9a45-0711-45a4-829a-7ab666828377",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21120,
        12432
      ],
      "id": "e2730542-4cfa-45ba-bf46-b2540361696b",
      "name": "Update row in sheet19",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu tarea.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la tarea?\n\nEjemplo: Estudiar para un examen\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21376,
        12432
      ],
      "id": "76d29652-a766-49e7-a9bc-c1e3a51f2c28",
      "name": "Send a text message21",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "titulo": "={{ $('Get row(s) in sheet24').item.json.datos_parciales_1 }}",
            "fecha_objetivo": "={{ $('Get row(s) in sheet24').item.json.datos_parciales_2 }}",
            "prioridad": "={{ $('Get row(s) in sheet24').item.json.datos_parciales_4 }}",
            "creado_por": "={{ $('Get row(s) in sheet24').item.json.telegram_user }}",
            "id_tarea": "={{ $('Code in JavaScript7').item.json.id_tarea }}",
            "estado": "={{ $json.estado }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        22016,
        12240
      ],
      "id": "e0881402-70e3-4c9e-8cdf-9e164ed774ca",
      "name": "Append row in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21568,
        12240
      ],
      "id": "401dbcaa-c6fc-475a-8fae-0705c284ab15",
      "name": "Get row(s) in sheet24",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript7').item.json.chatId }}",
        "text": "Tarea completada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22240,
        12240
      ],
      "id": "dcc430e8-c625-42be-adab-a23a41fb5d84",
      "name": "Send a text message44",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        22624,
        12240
      ],
      "id": "8a0bb1ab-a72a-4431-a378-a8e1da0ee65e",
      "name": "Update row in sheet45",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21120,
        12240
      ],
      "id": "5fcd4fb9-9e9c-4ad3-94ad-f0d5061bf12c",
      "name": "Get row(s) in sheet25",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Extraer n√∫meros v√°lidos de id_tarea\nconst numeros = rows\n  .map(r => r.json.id_tarea)\n  .filter(id => typeof id === 'string' && /^TAREA-\\d+$/.test(id))\n  .map(id => parseInt(id.split('-')[1], 10));\n\n// Si no hay tareas v√°lidas, iniciar en 001\nconst nextNumber = numeros.length > 0\n  ? Math.max(...numeros) + 1\n  : 1;\n\n// Formato final\nconst newId = `TAREA-${String(nextNumber).padStart(3, '0')}`;\n\nreturn [{\n  json: {\n    id_tarea: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        21328,
        12240
      ],
      "id": "85323ba7-2ac8-4e9a-a17c-bc55565e0023",
      "name": "Code in JavaScript7"
    },
    {
      "parameters": {
        "jsCode": "\nconst fecha = $input.first().json.datos_parciales_2; // YYYY-MM-DD\n\nif (!fecha) {\n  return [{\n    json: {\n      estado: 'Pendiente'\n    }\n  }];\n}\n\nconst fechaTarea = new Date(`${fecha}`);\n\nconst ahora = new Date();\n\nconst estado = fechaTarea < ahora ? 'Completada' : 'Pendiente';\n\n\nreturn [{\n  json: {\n    estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        21792,
        12240
      ],
      "id": "b09795bf-21ec-4e2c-b23e-73a532eb2453",
      "name": "Code in JavaScript8"
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript7').item.json.chatId }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22848,
        12240
      ],
      "id": "244e5afa-628d-450d-a84f-cc14b6b22eed",
      "name": "Send a text message45",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        22432,
        12240
      ],
      "id": "e8f892ab-35a4-4d52-8c9b-21e805c636c8",
      "name": "Edit Fields9"
    },
    {
      "parameters": {
        "content": "### TAREAS",
        "height": 80,
        "width": 150,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        20352,
        13120
      ],
      "typeVersion": 1,
      "id": "70e9475b-38bc-497a-8bde-ff1ebe29d2bc",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        23808,
        11296
      ],
      "id": "f85c0e3a-3252-4875-ac4c-2d554bc0a1f4",
      "name": "If17"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "cb928993-c3f9-4429-8a0c-c8cec06d5e9e",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 4, 5, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        24128,
        10864
      ],
      "id": "d4aaac77-64c5-403c-b252-ea4cc3af514a",
      "name": "Switch13"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ agenda\nOpciones disponibles: 1 al 2 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        24592,
        11056
      ],
      "id": "44ef9785-5359-44c2-9064-d7788b75b4ff",
      "name": "Send a text message60",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        24848,
        11056
      ],
      "id": "5b3d6752-82f3-4106-a06b-3b2b0365cc9f",
      "name": "Send a text message61",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14944,
        11392
      ],
      "id": "3185ccff-47ce-4459-b9f3-08c7216c5c46",
      "name": "Send a text message62",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14944,
        11248
      ],
      "id": "aa85fb8d-8cb9-474b-b822-1407e8b2b65b",
      "name": "Send a text message63",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14944,
        11088
      ],
      "id": "6e95f366-00f4-4bd8-a359-6091f8f9fb4f",
      "name": "Send a text message64",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu habito.\n\n¬øQu√© deseas hacer?\n\n1. Agregar un nuevo habito\n2. Eliminar un habito\n3. Activar/Desactivar habito\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14832,
        10672
      ],
      "id": "188fbf47-4c88-4d2d-a5b3-140e80377749",
      "name": "Send a text message65",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "retryOnFail": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "HABITOS"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15040,
        10672
      ],
      "id": "e3753150-9312-4b38-a171-0e7a7d4b3d0a",
      "name": "Update row in sheet57",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu lista.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva lista\n2. Consultar tus listas\n3. Eliminar una lista\n4. Marcar una lista como completada\n9. Volver al men√∫ principal",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14832,
        10880
      ],
      "id": "d447ff9c-867d-4d99-9d68-a167dd8e5ac6",
      "name": "Send a text message66",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu habito.\n\nPaso 1 de 3\n¬øCu√°l es el nombre del habito?\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        24528,
        10512
      ],
      "id": "8669badc-ee3a-4469-8d3b-30cbd2917bf1",
      "name": "Send a text message67",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITOS",
            "paso_actual": "1",
            "datos_parciales_1": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        24784,
        10512
      ],
      "id": "a43890d8-585c-4c7f-bd7b-81f449ef320a",
      "name": "Update row in sheet58",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID del habito que deseas eliminar. (Para consultar los habitos vaya a la seccion de 'Recordatorios')\nEjemplo: HABI-001\n\n9) Cancelar\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        24528,
        10704
      ],
      "id": "0e6867bb-6ca7-467a-99ec-c33b011b13ab",
      "name": "Send a text message68",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITO_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        24736,
        10704
      ],
      "id": "9b7590ca-6c18-4ef0-b539-3c5dd63adede",
      "name": "Update row in sheet59",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITO_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        24752,
        10880
      ],
      "id": "76563475-43ac-447b-b0d0-fe9018021b29",
      "name": "Update row in sheet60",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID del habito que deseas desactivar. (Para consultar los habitos vaya a la seccion de 'Recordatorios')\n\nEjemplo: HABI-001\n\n9) Cancelar\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        24544,
        10880
      ],
      "id": "8156a140-bd72-462b-8e32-524c810b23f5",
      "name": "Send a text message69",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        24320,
        11504
      ],
      "id": "ed956d1d-b727-4749-a67f-bd9ab95edfb0",
      "name": "Switch14"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 3\n¬øCon qu√© frecuencia haces este habito??\n\nEjemplo: Diario\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "762c3c9e-a48d-482a-8d48-68e25a8aa6f1",
      "name": "Telegram OK15",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        25040,
        11296
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITOS",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        24784,
        11296
      ],
      "id": "16b365e9-1251-4ac7-98d3-d7559d13cd96",
      "name": "Update row in sheet61",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITOS",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25040,
        11472
      ],
      "id": "13cbb9d7-7a6c-43ed-80ce-7bd2958e78a9",
      "name": "Update row in sheet62",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        24784,
        11472
      ],
      "id": "9c0067b8-238b-48b8-ad4f-93a6ef2a40ea",
      "name": "Get row(s) in sheet13",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 3\n¬øA qu√© hora te debemos recordar este habito?\n\nEjemplo: 12:20\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "64b8b3b2-f847-4c44-8167-35b63ed1dea3",
      "name": "Telegram OK16",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        25280,
        11472
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text.trim() }}",
              "operation": "regex",
              "value2": "^([01]\\d|2[0-3]):([0-5]\\d)$"
            }
          ]
        }
      },
      "id": "a4ef8b08-f6d0-4846-b882-a9b932d9a943",
      "name": "Validar formato HH:MM2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        24800,
        11776
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25616,
        11696
      ],
      "id": "1f9a98f4-e380-4013-b69a-d283300068a0",
      "name": "Get row(s) in sheet33",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_habito": "={{ $('Code in JavaScript12').item.json.id_habito }}",
            "nombre": "={{ $json.datos_parciales_1 }}",
            "frecuencia": "={{ $json.datos_parciales_2 }}",
            "hora_recordatorio": "={{ $node[\"Telegram Trigger\"].json.message.text }}\n",
            "estado": "Activo"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_habito",
              "displayName": "id_habito",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "frecuencia",
              "displayName": "frecuencia",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora_recordatorio",
              "displayName": "hora_recordatorio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25888,
        11696
      ],
      "id": "16a25c70-0806-47d2-8f56-73a55ceb84d6",
      "name": "Append row in sheet1",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}\n",
        "text": "Habito registrado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        26208,
        11696
      ],
      "id": "a8281c5e-6d7e-4d90-b770-4d332055bb90",
      "name": "Send a text message70",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        26768,
        11696
      ],
      "id": "54058045-d832-4a40-846c-bb5ebebc4bc5",
      "name": "Update row in sheet63",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25136,
        11696
      ],
      "id": "a8816278-d842-45c7-8ff0-2a2e7982d2a7",
      "name": "Get row(s) in sheet34",
      "alwaysOutputData": true,
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\n\n// Extraer IDs v√°lidos\nconst ids = rows\n  .map(r => r.json.id_habito)\n  .filter(id => typeof id === 'string' && /^HABI-\\d+$/.test(id));\n\n// Si no hay IDs v√°lidos, iniciar contador\nif (ids.length === 0) {\n  return [{\n    json: {\n      id_habito: 'HABI-001'\n    }\n  }];\n}\n\n// Ordenar por n√∫mero\nids.sort((a, b) => {\n  const numA = parseInt(a.split('-')[1], 10);\n  const numB = parseInt(b.split('-')[1], 10);\n  return numA - numB;\n});\n\nconst lastId = ids[ids.length - 1];\nconst lastNumber = parseInt(lastId.split('-')[1], 10);\nconst newNumber = lastNumber + 1;\n\n// Formato final\nconst newId = `HABI-${String(newNumber).padStart(3, '0')}`;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    id_habito: newId,\n    chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        25376,
        11696
      ],
      "id": "8dfdbf2c-4a4a-44b4-b8bf-c126d18a4769",
      "name": "Code in JavaScript12",
      "executeOnce": false,
      "retryOnFail": true
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        27024,
        11696
      ],
      "id": "52427f25-e55d-4036-8498-b08633052337",
      "name": "Send a text message71",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        26512,
        11696
      ],
      "id": "e9c01a0b-60a4-4464-a395-c4059346a511",
      "name": "Edit Fields1",
      "executeOnce": true
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Formato de hora incorrecto, intente de nuevo.\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "478206b4-96e7-4ab8-944f-656d98ff06b9",
      "name": "Telegram OK17",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        25136,
        11920
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        24304,
        12464
      ],
      "id": "e7bc6e77-4309-4bd8-9b1f-dd6d41001114",
      "name": "Get row(s) in sheet35",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst habitos = items.map(i => i.json);\n\nconst habito = habitos.find(h => h.id_habito === idIngresado);\n\nif (!habito) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ un habito con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\n\nreturn [{\n  json: {\n    id_habito: habito.id_habito,\n    rowNumber: habito.rowNumber,\n\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        24544,
        12464
      ],
      "id": "eb51d66b-39cf-4dd8-912b-f3827569ab5d",
      "name": "Code in JavaScript13"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        24752,
        12464
      ],
      "id": "791ee41c-1244-4f04-b6d3-f45859eec36c",
      "name": "If18"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "HABITO_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE3"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25168,
        12528
      ],
      "id": "0b82e007-2e74-476f-9d4b-161f15f31f01",
      "name": "Update row in sheet64",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        23904,
        12816
      ],
      "id": "5f1685b0-4ea3-456a-bdcf-2d7c44910f44",
      "name": "If19"
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript13').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        25168,
        12320
      ],
      "id": "108a2470-f2ae-40bf-a3fb-81b0eee18d37",
      "name": "Send a text message72",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar el habito con ID {{$json.datos_parciales_1}}?\n\n1) Si\n9) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        25408,
        12528
      ],
      "id": "55ce123d-91a0-49b6-b9e9-f16e5db69615",
      "name": "Send a text message73",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25408,
        12896
      ],
      "id": "d43b64d4-23fd-4dc6-bdc0-f41ed2e6d6b4",
      "name": "Delete rows or columns from sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        24672,
        13040
      ],
      "id": "b7774bc7-2d8d-4d70-9b47-c863747236e3",
      "name": "If20"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25184,
        12896
      ],
      "id": "c4b7d15f-e299-499d-86e8-a3de7121fb15",
      "name": "Get row(s) in sheet36",
      "retryOnFail": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        24944,
        12896
      ],
      "id": "1b153f49-c3bd-47c2-b47d-874c045378c1",
      "name": "Get row(s) in sheet37",
      "retryOnFail": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Habito eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        26000,
        12896
      ],
      "id": "30ae4279-b44f-477c-bcd8-1c6b9ebc8e08",
      "name": "Send a text message74",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        26208,
        12896
      ],
      "id": "8bca8347-0ef5-49d9-8db0-09a348a93254",
      "name": "Send a text message75",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        24928,
        13168
      ],
      "id": "eb7ef4d0-aab3-4f78-be1a-0c8a798d8ac5",
      "name": "Send a text message76",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        25616,
        13168
      ],
      "id": "433f297a-31e7-465e-81e6-7f8bbaa83f50",
      "name": "Send a text message77",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25808,
        12896
      ],
      "id": "b5991a32-6783-4dc7-a8e5-e17e5a51ca59",
      "name": "Update row in sheet65",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        25616,
        12896
      ],
      "id": "0b4e403f-1a17-418f-8d67-bd1b35af1d1a",
      "name": "Edit Fields14"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25376,
        13168
      ],
      "id": "df870cde-4f32-45d9-bcac-e164cc035a1d",
      "name": "Update row in sheet66",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        25184,
        13168
      ],
      "id": "e8af3509-c123-4cfb-8f14-f67586899554",
      "name": "Edit Fields15"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        23952,
        14048
      ],
      "id": "e76c18f7-8f3a-4265-94f4-42ef943493e4",
      "name": "If21"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "estado",
              "lookupValue": "Activo"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        24480,
        13872
      ],
      "id": "fd441663-1950-4837-af6c-4e09e94f221b",
      "name": "Get row(s) in sheet38",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst habitos = items.map(i => i.json);\n\nconst habito = habitos.find(c => c.id_habito === idIngresado);\n\nif (!habito) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ un habito con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_habito: habito.id_habito,\n    rowNumber: habito.rowNumber,\n    estado_actual: habito.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        24720,
        13872
      ],
      "id": "7c08e329-f91b-4d2b-8c04-793dca872b10",
      "name": "Code in JavaScript14"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        24928,
        13872
      ],
      "id": "53518106-efef-452a-8781-ac7f91f58a23",
      "name": "If22"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "HABITO_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25344,
        13936
      ],
      "id": "78ab7bb3-b26e-430d-b1e8-ee51c1dab55e",
      "name": "Update row in sheet67",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript14').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        25344,
        13728
      ],
      "id": "961eb558-3a7c-455a-963a-cde1c0e02190",
      "name": "Send a text message78",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n9) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        25584,
        13936
      ],
      "id": "e2fbd546-81a9-465f-8a4a-b1c0c8ebcd46",
      "name": "Send a text message79",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        24480,
        14384
      ],
      "id": "d24b3a1e-5948-4849-bcb5-c438cf126112",
      "name": "Get row(s) in sheet39",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        25968,
        14176
      ],
      "id": "47bddb21-df5a-4858-9d09-584f83247bc2",
      "name": "Send a text message80",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        26176,
        14176
      ],
      "id": "7ff116bb-a159-4530-aebc-e2ea74b3f3c1",
      "name": "Send a text message81",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25776,
        14176
      ],
      "id": "3b644e56-c02d-4655-8522-a604806e92c4",
      "name": "Update row in sheet68",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        25584,
        14176
      ],
      "id": "fa29397d-6095-42f7-b7ab-bece5500ea21",
      "name": "Edit Fields16"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_habito": "={{ $json.id_habito }}",
            "nombre": "={{ $json.nombre }}",
            "frecuencia": "={{ $json.frecuencia }}",
            "hora_recordatorio": "={{ $json.hora_recordatorio }}",
            "estado": "Inactivo"
          },
          "matchingColumns": [
            "id_habito"
          ],
          "schema": [
            {
              "id": "id_habito",
              "displayName": "id_habito",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "frecuencia",
              "displayName": "frecuencia",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora_recordatorio",
              "displayName": "hora_recordatorio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25360,
        14176
      ],
      "id": "a6c51d20-4e3e-4c11-ac26-7bbdd673c670",
      "name": "Update row in sheet69",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "3e492c08-c151-422d-8f5c-958b613ed0e3",
              "leftValue": "={{ $json.estado }}",
              "rightValue": "Activo",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        24768,
        14384
      ],
      "id": "ea155bd7-d89e-4a10-994d-dd2da646ab43",
      "name": "If23"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25136,
        14176
      ],
      "id": "4a851f08-1c5f-4c39-a625-e342df8ff9b5",
      "name": "Get row(s) in sheet40",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        25968,
        14496
      ],
      "id": "cf53f438-5fb7-4eeb-8580-675310e5e7b7",
      "name": "Send a text message82",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        26176,
        14496
      ],
      "id": "9540219b-9df1-4f93-a2c0-d2926eb4ce95",
      "name": "Send a text message83",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25776,
        14496
      ],
      "id": "5b1684d4-eca2-443c-be1d-48516cd2c964",
      "name": "Update row in sheet70",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        25584,
        14496
      ],
      "id": "04bc3d8d-c850-4aba-9cfe-9dc910b926b8",
      "name": "Edit Fields17"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25136,
        14496
      ],
      "id": "c7c2ff2d-4aa4-423a-a031-ea48e8fe588c",
      "name": "Get row(s) in sheet41",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_habito": "={{ $json.id_habito }}",
            "estado": "Activo",
            "nombre": "={{ $json.nombre }}",
            "frecuencia": "={{ $json.frecuencia }}",
            "hora_recordatorio": "={{ $json.hora_recordatorio }}"
          },
          "matchingColumns": [
            "id_habito"
          ],
          "schema": [
            {
              "id": "id_habito",
              "displayName": "id_habito",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "frecuencia",
              "displayName": "frecuencia",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora_recordatorio",
              "displayName": "hora_recordatorio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        25376,
        14496
      ],
      "id": "4e506090-b9fd-4980-a78b-14b7eff9d6a8",
      "name": "Update row in sheet71",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14832,
        10480
      ],
      "id": "4e870ff2-4159-48be-96d9-a2ac99c367e0",
      "name": "Get row(s) in sheet42",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "\nconst recordatorios = items\n  .map(i => i.json)\n  .filter(habito => habito.estado === 'Activo');\n\nif (recordatorios.length === 0) {\n  return [{\n    json: {\n      mensaje: 'No tienes habitos activos.'\n    }\n  }];\n}\n\nlet mensaje = '*Recordatorio de tus habitos*\\n\\n';\n\nrecordatorios.forEach((habito, index) => {\n  mensaje +=\n    `${index + 1}. *${habito.id_habito}*\\n` +\n    `${habito.nombre}\\n` +\n    `${habito.frecuencia} ` +\n    `${habito.hora_recordatorio}\\n` +\n    `${habito.estado}\\n\\n`;\n});\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        15072,
        10480
      ],
      "id": "1e149e97-70b5-477f-8559-5989e7e5a854",
      "name": "Code in JavaScript15"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15280,
        10480
      ],
      "id": "f9d6e9a1-31d8-4c53-8c46-bb3cf1593223",
      "name": "Send a text message84",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15488,
        10480
      ],
      "id": "329e3aeb-7396-428c-86bd-d478761d318a",
      "name": "Update row in sheet72",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20960,
        14912
      ],
      "id": "df622af9-7bde-4d7b-9d2b-19632ff0c08d",
      "name": "Get row(s) in sheet29",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "TAREA_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE2"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21824,
        14976
      ],
      "id": "197b75f3-fd5b-40f4-bb63-7b49c07d4f64",
      "name": "Update row in sheet50",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript11').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21824,
        14768
      ],
      "id": "2761d1c6-fde2-4af1-afd8-a327164c367c",
      "name": "Send a text message51",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar la tarea con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22064,
        14976
      ],
      "id": "ee102424-b6e6-4eb0-a8f5-8672a4b7e759",
      "name": "Send a text message54",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21840,
        15488
      ],
      "id": "49c0b720-ef80-411f-80cc-e0d4a9fab61d",
      "name": "Delete rows or columns from sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        21104,
        15632
      ],
      "id": "5ef5713b-aec4-4a5b-af11-32fdf83aea60",
      "name": "If15"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21616,
        15488
      ],
      "id": "0a8f7e19-0776-4285-ab77-5ebb8a3b5a23",
      "name": "Get row(s) in sheet31",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21376,
        15488
      ],
      "id": "21037381-fcf8-4839-a53d-540357a0b5b1",
      "name": "Get row(s) in sheet32",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Registro eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22432,
        15488
      ],
      "id": "265695e3-3fb3-4147-9e2a-a18708b2a1f8",
      "name": "Send a text message55",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22640,
        15488
      ],
      "id": "4d58912b-962c-45c4-9c28-18a1aeab45d2",
      "name": "Send a text message56",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21360,
        15760
      ],
      "id": "0c87e6a5-0464-4144-adc9-d698f296df37",
      "name": "Send a text message57",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22048,
        15760
      ],
      "id": "bb93ab98-a59a-4756-b7e1-8968fcf2faf6",
      "name": "Send a text message58",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        22240,
        15488
      ],
      "id": "7435d4cb-8466-4372-a6e7-6ac5f671f73a",
      "name": "Update row in sheet53",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        22048,
        15488
      ],
      "id": "d8011f4a-f666-4081-8a70-5413d64c1f10",
      "name": "Edit Fields12"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21808,
        15760
      ],
      "id": "7a66d5eb-b1b0-40c8-a16d-72f6682e02be",
      "name": "Update row in sheet54",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        21600,
        15760
      ],
      "id": "32286b61-f4ac-4f5e-b7f2-1de779864663",
      "name": "Edit Fields13"
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst tareas = items.map(i => i.json);\n\nconst tarea = tareas.find(c => c.id_tarea === idIngresado);\n\nif (!tarea) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una tarea con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (tarea.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar tareas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_tarea: tarea.id_tarea,\n    rowNumber: tarea.rowNumber,\n    estado_actual: tarea.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        21200,
        14912
      ],
      "id": "1a605ebf-c94c-46b5-9bb5-4ed3e3404834",
      "name": "Code in JavaScript11"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        21408,
        14912
      ],
      "id": "fc9e2518-3bbd-432a-bcb7-a512ecfc0e33",
      "name": "If16"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": "={{ false }}",
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        20560,
        15264
      ],
      "id": "b326f7b9-1615-47c4-9ed8-66a5b8e86788",
      "name": "If24"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20688,
        13184
      ],
      "id": "e09360a6-ed87-445d-bcf5-b62174f8fb10",
      "name": "Get row(s) in sheet27",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "TAREA_EDIT",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "TAREA_EDICION"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21552,
        13248
      ],
      "id": "97bc6192-90d3-4e2d-b527-68f1d60620b7",
      "name": "Update row in sheet47",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript10').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21552,
        13040
      ],
      "id": "bc0005e8-7b79-419a-8776-673892d884e7",
      "name": "Send a text message48",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øQu√© deseas modificar de la tarea {{$json.datos_parciales_1}}?\n\n1) Fecha\n2) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21792,
        13248
      ],
      "id": "1a8fe9a1-d6bc-4029-9638-fa3964b4d22e",
      "name": "Send a text message49",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "ec675a21-b990-4a0b-b606-021f5e25e71e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "dca7b002-8fba-4618-add1-6e508cc3f0ef",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        21216,
        13680
      ],
      "id": "43248d2e-c2f6-4b92-9c13-7eb102e79b5d",
      "name": "Switch12"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d9a64f2e-d27d-4b36-9cb0-93827b2a3636",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        20704,
        13952
      ],
      "id": "d16c6b3c-0a83-4f21-ae76-2145d7460d72",
      "name": "If12"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "ffca3128-931d-47c4-bfe1-8e277780bae7",
      "name": "Validar formato YYYY-MM-DD3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        21024,
        14192
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha actualizada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "b76131dc-4b2b-41a2-89b4-b2226cee4676",
      "name": "Telegram OK14",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        22672,
        14096
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2026-12-20\nIntenta nuevamente.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "3476f0a8-fc3d-4803-a9fd-9fba091e17bc",
      "name": "Telegram Error5",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        21408,
        14336
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_EDIT",
            "paso_actual": "TAREA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21408,
        14096
      ],
      "id": "b606e1ca-9375-4609-b053-4fad68c9dd59",
      "name": "Update row in sheet48",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ingrese la fecha nueva.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2026-12-20",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21568,
        13520
      ],
      "id": "adcc6a86-feec-4ec1-b89d-81b02aee93cb",
      "name": "Send a text message50",
      "webhookId": "091ffb67-df42-49eb-a2b1-1e8a031acfc4",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "TAREA_EDIT",
            "paso_actual": "TAREA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet28').item.json.datos_parciales_1 }}",
            "row_number": 2,
            "datos_parciales_2": "1",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21808,
        13520
      ],
      "id": "67a5ace3-c460-41c9-bfc4-0fb0b8445fd9",
      "name": "Update row in sheet49",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20992,
        13680
      ],
      "id": "79a33d10-7013-48af-8216-b2fe5a598f37",
      "name": "Get row(s) in sheet28",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        22016,
        13792
      ],
      "id": "705e036f-10a8-4058-8305-f0ee2e9ae05c",
      "name": "Update row in sheet51",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21568,
        13792
      ],
      "id": "34a37b30-a606-4efb-ae77-44d1836f13da",
      "name": "Send a text message52",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6ec5bccf-438b-4d68-8947-62e86d961fc3",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        21808,
        13792
      ],
      "id": "07b83bc1-40b2-4eb1-a5f5-4a3d1a3e8c94",
      "name": "Edit Fields10"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_tarea": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "fecha_objetivo": "={{ $('Update row in sheet48').item.json.datos_parciales_2 }}"
          },
          "matchingColumns": [
            "id_tarea"
          ],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21920,
        14096
      ],
      "id": "ac5be083-f298-4604-adfd-57d414184575",
      "name": "Update row in sheet52",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a039b49-2c5e-4e19-8dc1-35eabd92e9e2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        22176,
        14096
      ],
      "id": "c8fe3ed6-e4ad-4016-acb9-2b7928c57d7e",
      "name": "Edit Fields11"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        22432,
        14096
      ],
      "id": "28921e11-e359-4e26-8c84-c520cf91a84a",
      "name": "Update row in sheet55",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22896,
        14096
      ],
      "id": "03237f10-9942-48cd-a002-003b449dc068",
      "name": "Send a text message53",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21664,
        14096
      ],
      "id": "061a0d92-0c08-496c-b3a6-b89b7f5f4707",
      "name": "Get row(s) in sheet30",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst tareas = items.map(i => i.json);\n\nconst tarea = tareas.find(c => c.id_tarea === idIngresado);\n\nif (!tarea) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una tarea con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (tarea.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar tareas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_tarea: tarea.id_tarea,\n    rowNumber: tarea.rowNumber,\n    estado_actual: tarea.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        20928,
        13184
      ],
      "id": "74ce8661-27da-4676-a6e2-f13be45b4607",
      "name": "Code in JavaScript10"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        21136,
        13184
      ],
      "id": "5986a0d9-efe9-4b88-8521-0a3481355d7c",
      "name": "If13"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        20288,
        13536
      ],
      "id": "0e6ab379-da39-47d7-8a3f-cffb6aedc6e4",
      "name": "If14"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "30a49837-b923-41ce-88cb-942693e24e67",
              "leftValue": "={{ $json.valido }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        21472,
        10864
      ],
      "id": "822692ea-a1e7-46a6-857e-312cbaa8d948",
      "name": "If11"
    },
    {
      "parameters": {
        "jsCode": "const fechaIngresada = new Date($('Telegram Trigger').first().json.message.text);\nconst hoy = new Date();\n\n\nfechaIngresada.setHours(0,0,0,0);\nhoy.setHours(0,0,0,0);\n\nif (fechaIngresada < hoy) {\n  return [{\n    json: {\n      valido: false,\n      error: 'No puedes crear tareas en fechas pasadas'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    valido: true,\n    fecha: $json.fecha\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        21264,
        10864
      ],
      "id": "14fb3c3c-3b34-4f4c-89d5-a9c2709439b5",
      "name": "Code in JavaScript16"
    },
    {
      "parameters": {
        "chatId": "={{ $node['Telegram Trigger'].json.message.chat.id }}",
        "text": "Formato invalido, no puedes crear tareas en el pasado. Int√©ntalo de nuevo o escribe 9 para salir",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21776,
        11008
      ],
      "id": "8293e8df-3d76-4437-b2bf-0ee1dd6fca4d",
      "name": "Send a text message85",
      "webhookId": "48a8ad57-682c-4bfe-b1e6-51ce21ca9c17",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        20256,
        10432
      ],
      "id": "981e96a7-a689-4bd9-91d9-324a8a7a91ba",
      "name": "Update row in sheet73",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la tarea que deseas completar.\nEjemplo: TAREA-002\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        20048,
        10432
      ],
      "id": "67be9942-c686-449d-811f-1b0efb527e77",
      "name": "Send a text message86",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        20528,
        16448
      ],
      "id": "ccf7e1c5-40c4-4064-aad2-1f12099f3f76",
      "name": "If25"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "estado",
              "lookupValue": "Pendiente"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21056,
        16272
      ],
      "id": "5d08eb2f-24ec-4368-8686-3f2734dbd278",
      "name": "Get row(s) in sheet43",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst tareas = items.map(i => i.json);\n\nconst tarea = tareas.find(c => c.id_tarea === idIngresado);\n\nif (!tarea) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una tara con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (tarea.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar tareas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_tarea: tarea.id_tarea,\n    rowNumber: tarea.rowNumber,\n    estado_actual: tarea.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        21296,
        16272
      ],
      "id": "c4809cfb-c606-4c4c-b097-bb7e9ee9ff49",
      "name": "Code in JavaScript17"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        21504,
        16272
      ],
      "id": "1a9c5f63-30f8-4027-b3cb-037dc8b03500",
      "name": "If26"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "TAREA_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21920,
        16336
      ],
      "id": "e0859752-8e56-4c12-989c-95abf3e58aa3",
      "name": "Update row in sheet74",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript17').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21920,
        16128
      ],
      "id": "6cc8796d-851a-4af2-83e6-17ef221d6d0d",
      "name": "Send a text message87",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la tarea con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22160,
        16336
      ],
      "id": "125ab6a3-fd20-447d-b166-5659933d366b",
      "name": "Send a text message88",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21392,
        16640
      ],
      "id": "6156df01-9df7-4c69-8470-d703a705156e",
      "name": "Get row(s) in sheet44",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22400,
        16640
      ],
      "id": "e22fcc37-3921-49e5-9bfe-2d7735928c8b",
      "name": "Send a text message89",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22608,
        16640
      ],
      "id": "eadcbd0f-14ab-4b34-9edd-4c026875fd54",
      "name": "Send a text message90",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        22208,
        16640
      ],
      "id": "ff45082b-fa89-4334-b504-de5a51b016b7",
      "name": "Update row in sheet75",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        22016,
        16640
      ],
      "id": "78d2e31a-da47-4073-83b0-38231f1d827f",
      "name": "Edit Fields18"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_tarea": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "titulo": "={{ $json.titulo }}",
            "prioridad": "={{ $json.prioridad }}",
            "fecha_objetivo": "={{ $json.fecha_objetivo }}",
            "creado_por": "={{ $json.creado_por }}",
            "estado": "Completada"
          },
          "matchingColumns": [
            "id_tarea"
          ],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21712,
        16640
      ],
      "id": "a30df10b-0b05-430c-9af6-af6c107d784f",
      "name": "Update row in sheet76",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "content": "## Tipos de listas\n\"personal\" ‚Üí Solo la usa una persona\n\n\"compartida\" ‚Üí Varias personas pueden verla o editarla\n\n\"trabajo\" ‚Üí Lista relacionada con tareas laborales\n\n\"compras\" ‚Üí Lista espec√≠fica para compras\n\n\"recordatorios\" ‚Üí Lista de cosas por recordar",
        "height": 304,
        "width": 288,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        27792,
        10208
      ],
      "typeVersion": 1,
      "id": "3bcaeeef-f51e-430d-a054-283aad4061e8",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "LISTA"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15024,
        10880
      ],
      "id": "0f86afb2-1043-4db3-af3f-99daf3416a5c",
      "name": "Update row in sheet77",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        27712,
        10912
      ],
      "id": "45b5c431-8597-4ace-82f6-ff3c2afc6eea",
      "name": "If27"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu lista.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la lista?\n\nEjemplo: Compras del s√∫per\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        28480,
        10080
      ],
      "id": "80d04820-4c6d-4325-a026-c7e3b0282c57",
      "name": "Send a text message91",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "1",
            "datos_parciales_1": "=",
            "timestamp_ultima_interaccion": "{{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28672,
        10080
      ],
      "id": "d1dd038b-d5b0-4753-bd0e-742d79bc13c4",
      "name": "Update row in sheet78",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29328,
        10304
      ],
      "id": "cf5dc5af-9562-4700-b8fc-8321430bc2a2",
      "name": "Update row in sheet79",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28480,
        10304
      ],
      "id": "a024d5ad-6e5d-4df2-97b1-73e338340bce",
      "name": "Get row(s) in sheet45",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        29120,
        10304
      ],
      "id": "fb25ee50-aa7b-43d1-ad12-41424498f729",
      "name": "Send a text message92",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la lista que deseas eliminar.\nEjemplo: LISTA-001\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        28480,
        10496
      ],
      "id": "f94ea265-f506-47dc-b95e-52c40f41a77f",
      "name": "Send a text message93",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28688,
        10496
      ],
      "id": "a0b92c3f-f43a-41d7-aa40-744ca5b60422",
      "name": "Update row in sheet80",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c0f971a3-78c3-47f7-bd13-0ccf2ee00f7a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "92e55669-8b8c-4b14-85f9-931973d7557c",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        28128,
        10512
      ],
      "id": "de3e5453-f6ee-4cf8-ae7c-f2e3d3856289",
      "name": "Switch16"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ listas\nOpciones disponibles: 1 al 3 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        28480,
        10864
      ],
      "id": "340aaf5e-82c8-41b4-8b4a-7985c0bac2a5",
      "name": "Send a text message94",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu lista.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva lista\n2. Consultar tus listas\n3. Eliminar una lista\n4. Marcar una lista como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        28688,
        10864
      ],
      "id": "6c9cea6f-9f5c-40d1-9a96-adf93ba46c37",
      "name": "Send a text message95",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9b0b7bf2-3274-407a-950e-8392c39aa912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        28112,
        11424
      ],
      "id": "bb9ff4fa-2a4a-4de5-ae24-6c1651fbbf12",
      "name": "Switch15"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 3\n¬øCu√°l es el tipo de la lista?\n\nEjemplo: Compras\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "f4e90a0b-070a-4775-badb-eaca60ffce13",
      "name": "Telegram OK18",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        28672,
        11056
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_2": "=",
            "datos_parciales_3": "=",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28464,
        11056
      ],
      "id": "4239ebdd-465c-4a23-88af-3dbf7420e1c3",
      "name": "Update row in sheet81",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28464,
        11248
      ],
      "id": "8ebcc6d4-d3aa-4c55-809f-163a7156e1de",
      "name": "Get row(s) in sheet46",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28672,
        11248
      ],
      "id": "2cb64778-4adf-4a36-b2fc-ea8d04cab920",
      "name": "Update row in sheet82",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 3\n\nNombra los items de tu lista, separados por comas (,)\n\nEjemplo: Pan, Queso, Papas\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "3338d435-905b-4eab-8fb9-7a54660db9d7",
      "name": "Telegram OK19",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        28896,
        11248
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28464,
        11440
      ],
      "id": "ce885ebb-4c07-41fa-931d-c9c9d47bfc5e",
      "name": "Get row(s) in sheet47",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28672,
        11440
      ],
      "id": "e188a14f-8456-4ea0-aa38-10088eab2892",
      "name": "Update row in sheet83",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu lista:\n\nNombre: {{ $json.datos_parciales_1 }}\nTipo: {{ $json.datos_parciales_2 }}\nItems: {{ $('Telegram Trigger').item.json.message.text }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "af163605-402f-44b0-a802-5abc14bb8ec4",
      "name": "Telegram OK20",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        28896,
        11440
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "2149ed1c-6fc1-4214-9bb6-9d73396df7e2"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c3020235-3026-4758-ba53-3259646bba63",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "81655df1-f7a4-4730-bcb6-91267c74645f",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        28448,
        11760
      ],
      "id": "9d230704-8d28-4500-8c7a-adee38e6de53",
      "name": "Switch17"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28768,
        12144
      ],
      "id": "3f96ffa5-6a1f-4ab7-8d38-0449e91860e6",
      "name": "Update row in sheet84",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Cancelado",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        29024,
        12144
      ],
      "id": "46434cdc-7bb5-49c2-a98e-7cb48878322d",
      "name": "Send a text message96",
      "webhookId": "dc8a9a45-0711-45a4-829a-7ab666828377",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28784,
        11952
      ],
      "id": "268bb0c0-b771-47d8-aa3a-17140493cfd1",
      "name": "Update row in sheet85",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu lista.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la lista?\n\nEjemplo: Compras del s√∫per\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        29040,
        11952
      ],
      "id": "28c7b2de-e98c-4a84-9e7c-3eb75eef08f2",
      "name": "Send a text message97",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29632,
        11760
      ],
      "id": "107688a8-ca1e-4b44-bfb0-e933d8559025",
      "name": "Get row(s) in sheet48",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript19').item.json.chatId }}",
        "text": "Lista completada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        30336,
        11760
      ],
      "id": "36517129-eaf7-46df-a425-8449160668ea",
      "name": "Send a text message98",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        30720,
        11760
      ],
      "id": "4cf3108a-e7bc-4380-a9c4-9323442419ca",
      "name": "Update row in sheet86",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28784,
        11760
      ],
      "id": "a070e7fc-bd9a-4bbe-b42d-7fe93873e4ae",
      "name": "Get row(s) in sheet49",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Extraer n√∫meros v√°lidos de id_tarea\nconst numeros = rows\n  .map(r => r.json.id_lista)\n  .filter(id => typeof id === 'string' && /^LISTA-\\d+$/.test(id))\n  .map(id => parseInt(id.split('-')[1], 10));\n\n// Si no hay tareas v√°lidas, iniciar en 001\nconst nextNumber = numeros.length > 0\n  ? Math.max(...numeros) + 1\n  : 1;\n\n// Formato final\nconst newId = `LISTA-${String(nextNumber).padStart(3, '0')}`;\n\nreturn [{\n  json: {\n    id_lista: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        28992,
        11760
      ],
      "id": "b5d1ee46-8c63-4834-a82d-29565922105a",
      "name": "Code in JavaScript19"
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript19').item.json.chatId }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        30944,
        11760
      ],
      "id": "1e91a6b2-c2cd-4b16-ac1c-dbc24dcf2601",
      "name": "Send a text message99",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        30528,
        11760
      ],
      "id": "937071e5-17ed-4b48-a163-abc57eb8ee81",
      "name": "Edit Fields19"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29216,
        11760
      ],
      "id": "40f298c9-3ed9-4c63-8b5e-bce0498b4b9d",
      "name": "Get row(s) in sheet50",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Extraer n√∫meros v√°lidos de id_tarea\nconst numeros = rows\n  .map(r => r.json.id_item)\n  .filter(id => typeof id === 'string' && /^ITEMS-\\d+$/.test(id))\n  .map(id => parseInt(id.split('-')[1], 10));\n\n// Si no hay tareas v√°lidas, iniciar en 001\nconst nextNumber = numeros.length > 0\n  ? Math.max(...numeros) + 1\n  : 1;\n\n// Formato final\nconst newId = `ITEMS-${String(nextNumber).padStart(3, '0')}`;\n\nreturn [{\n  json: {\n    id_item: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        29440,
        11760
      ],
      "id": "9c2937c7-9f6a-448b-a261-02c2098baf1d",
      "name": "Code in JavaScript20"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_lista": "={{ $('Code in JavaScript19').item.json.id_lista }}",
            "nombre_lista": "={{ $json.datos_parciales_1 }}",
            "tipo": "={{ $json.datos_parciales_2 }}",
            "creado_por": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_lista",
              "displayName": "id_lista",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre_lista",
              "displayName": "nombre_lista",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "tipo",
              "displayName": "tipo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29856,
        11760
      ],
      "id": "f456f0a3-25ab-460c-9c67-e3361d142480",
      "name": "Append row in sheet4",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "estado": "Pendiente",
            "id_item": "={{ $('Code in JavaScript20').item.json.id_item }}",
            "id_lista": "={{ $('Code in JavaScript19').item.json.id_lista }}",
            "item": "={{ $('Get row(s) in sheet48').item.json.datos_parciales_3 }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_item",
              "displayName": "id_item",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "id_lista",
              "displayName": "id_lista",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "item",
              "displayName": "item",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        30080,
        11760
      ],
      "id": "d266fe2e-5880-4e2f-bc0b-1d07641bf06c",
      "name": "Append row in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28704,
        10304
      ],
      "id": "1482488a-7721-4d12-82fa-f4c040a0a35e",
      "name": "Get row(s) in sheet51",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "060fe614-7a44-4939-9a05-d30b3cec05ea",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        24224,
        14608
      ],
      "id": "9a768cad-33e9-43aa-ad3c-d88ed3859a1e",
      "name": "If28"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no valida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        24464,
        14768
      ],
      "id": "8a89c863-49b1-439e-af70-61aa133462d4",
      "name": "Send a text message100",
      "webhookId": "348071f9-f5ba-41fb-8d13-fc67affba289",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "060fe614-7a44-4939-9a05-d30b3cec05ea",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        24288,
        13280
      ],
      "id": "0dc3330f-8248-4599-97bb-463e33c9b430",
      "name": "If29"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no valida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        24592,
        13472
      ],
      "id": "3a093062-60b8-4452-b0b4-9de9d5715c5b",
      "name": "Send a text message101",
      "webhookId": "348071f9-f5ba-41fb-8d13-fc67affba289",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "content": "### Habitos",
        "width": 230
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        23920,
        10624
      ],
      "typeVersion": 1,
      "id": "34d7bffa-3fb0-43ca-bc9f-6ba3b5e2c881",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "jsCode": "// Normalizar inputs a arrays\nconst listas = Array.isArray($node[\"Get row(s) in sheet45\"].json)\n  ? $node[\"Get row(s) in sheet45\"].json\n  : [$node[\"Get row(s) in sheet45\"].json];\n\nconst itemsLista = Array.isArray($node[\"Get row(s) in sheet51\"].json)\n  ? $node[\"Get row(s) in sheet51\"].json\n  : [$node[\"Get row(s) in sheet51\"].json];\n\n// Agrupar items por id_lista\nconst itemsPorLista = {};\nitemsLista.forEach(item => {\n  if (!itemsPorLista[item.id_lista]) {\n    itemsPorLista[item.id_lista] = [];\n  }\n  // Separar items por coma\n  const subItems = item.item.split(',').map(i => i.trim());\n  subItems.forEach(subItem => {\n    itemsPorLista[item.id_lista].push({\n      item: subItem,\n      estado: item.estado.trim().toLowerCase() // normalizar\n    });\n  });\n});\n\n// Clasificar listas\nconst listasPendientes = [];\nconst listasCompletadas = [];\n\nlistas.forEach(lista => {\n  const items = itemsPorLista[lista.id_lista] || [];\n  \n  // Lista es pendiente si al menos un item est√° pendiente\n  const tienePendientes = items.some(it => it.estado === 'pendiente');\n\n  const data = { ...lista, items };\n\n  if (tienePendientes || items.length === 0) {\n    listasPendientes.push(data);\n  } else {\n    listasCompletadas.push(data);\n  }\n});\n\n// Construir mensaje\nlet mensaje = 'üóÇÔ∏è *Resumen de listas*\\n\\n';\n\n// Bloque de listas pendientes\nmensaje += 'üìå *Listas pendientes*\\n\\n';\nif (listasPendientes.length === 0) {\n  mensaje += 'No tienes listas pendientes.\\n\\n';\n} else {\n  listasPendientes.forEach((l, i) => {\n    mensaje += `${i + 1}. ${l.id_lista}\\n`;\n    mensaje += `üìù ${l.nombre_lista}\\n`;\n    mensaje += `üè∑Ô∏è ${l.tipo}\\n`;\n    if (l.items.length === 0) {\n      mensaje += '- (Sin items)\\n';\n    } else {\n      l.items\n        .filter(it => it.estado === 'pendiente')\n        .forEach(it => {\n          mensaje += `‚¨ú ${it.item}\\n`;\n        });\n    }\n    mensaje += '\\n';\n  });\n}\n\n// Bloque de listas completadas\nmensaje += '‚úÖ *Listas completadas*\\n\\n';\nif (listasCompletadas.length === 0) {\n  mensaje += 'No tienes listas completadas.';\n} else {\n  listasCompletadas.forEach((l, i) => {\n    mensaje += `${i + 1}. ${l.id_lista}\\n`;\n    mensaje += `üìù ${l.nombre_lista}\\n`;\n    mensaje += `üè∑Ô∏è ${l.tipo}\\n`;\n    if (l.items.length === 0) {\n      mensaje += '- (Sin items)\\n';\n    } else {\n      l.items\n        .filter(it => it.estado === 'completada')\n        .forEach(it => {\n          mensaje += `‚òëÔ∏è ${it.item}\\n`;\n        });\n    }\n    mensaje += '\\n';\n  });\n}\n\n// Chat ID\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Output\nreturn [{\n  json: {\n    mensaje,\n    chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        28912,
        10304
      ],
      "id": "92c4f4b4-6715-40a3-b4fe-0e291a896050",
      "name": "Code in JavaScript22"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la lista que deseas marcar como completada.\nEjemplo: LISTA-001\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        28480,
        10672
      ],
      "id": "e15926dd-0268-4d25-b075-9793ec664ab9",
      "name": "Send a text message102",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28688,
        10672
      ],
      "id": "8f127178-a655-47ae-a4f9-b1e087d537f5",
      "name": "Update row in sheet87",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28656,
        12688
      ],
      "id": "a9becdfd-5858-46e5-bc38-10be1c04a24d",
      "name": "Get row(s) in sheet52",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "LISTA_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE2"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29696,
        12752
      ],
      "id": "8fe71e19-5820-4f5c-a88a-cd49b7b2e9b7",
      "name": "Update row in sheet88",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript18').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        29696,
        12544
      ],
      "id": "bef79dc9-7f5c-4778-8d6b-70f7d75a5f07",
      "name": "Send a text message103",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar la lista con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        29936,
        12752
      ],
      "id": "28f4cecb-032f-422f-8a8a-13856dfc77a2",
      "name": "Send a text message104",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "startIndex": "={{ $('Get row(s) in sheet54').item.json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29744,
        13264
      ],
      "id": "62a84a4c-9012-4ca2-813f-13980cbc3286",
      "name": "Delete rows or columns from sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        28800,
        13408
      ],
      "id": "0d9f35ba-7564-42a8-bb43-6eb03575fae0",
      "name": "If30"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_lista",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29312,
        13264
      ],
      "id": "011682bb-df0e-4e36-92fc-7e896aca4723",
      "name": "Get row(s) in sheet53",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29072,
        13264
      ],
      "id": "b2d1960e-fb10-4772-a1b4-d892495406f2",
      "name": "Get row(s) in sheet54",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Registro eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        30544,
        13264
      ],
      "id": "4a59cdea-fca0-4b69-adab-41e03a68d143",
      "name": "Send a text message105",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        30752,
        13264
      ],
      "id": "bddda82e-0e2f-4e9a-96fc-cb2ea9b3f092",
      "name": "Send a text message106",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        29056,
        13536
      ],
      "id": "0018807a-d457-4d76-ba7d-ff4adb7409ad",
      "name": "Send a text message107",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        29744,
        13536
      ],
      "id": "9fdf6f83-5087-40c9-a825-019b212834fd",
      "name": "Send a text message108",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        30352,
        13264
      ],
      "id": "a0ce538f-4efb-45cb-829c-92a0ba54ed53",
      "name": "Update row in sheet89",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        30160,
        13264
      ],
      "id": "ab9b0efd-4cdf-4edf-a706-84ca738b5cbd",
      "name": "Edit Fields20"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29504,
        13536
      ],
      "id": "5ed39d83-8f4b-46dd-b669-a74dd6445c1c",
      "name": "Update row in sheet90",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        29296,
        13536
      ],
      "id": "5fba31fd-5942-4333-a50c-0c90a90b9268",
      "name": "Edit Fields21"
    },
    {
      "parameters": {
        "jsCode": "// ID de lista ingresado desde Telegram\nconst idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\n\n// Normalizar listas y items a arrays\nconst listas = Array.isArray($node[\"Get row(s) in sheet52\"].json)\n  ? $node[\"Get row(s) in sheet52\"].json\n  : [$node[\"Get row(s) in sheet52\"].json];\n\nconst itemsLista = Array.isArray($node[\"Get row(s) in sheet55\"].json)\n  ? $node[\"Get row(s) in sheet55\"].json\n  : [$node[\"Get row(s) in sheet55\"].json];\n\n// Buscar la lista por ID\nconst lista = listas.find(l => l.id_lista.toUpperCase() === idIngresado);\n\nif (!lista) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ ninguna lista con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\n// Filtrar items que pertenecen a esta lista\nconst items = itemsLista.filter(i => i.id_lista.toUpperCase() === idIngresado);\n\nif (items.length === 0) {\n  return [{\n    json: {\n      error: 'La lista no tiene items para eliminar.'\n    }\n  }];\n}\n\n// Verificar si todos los items est√°n en estado Pendiente\nconst todosPendientes = items.every(i => i.estado.trim().toLowerCase() === 'pendiente');\n\nif (!todosPendientes) {\n  return [{\n    json: {\n      error: 'No se puede eliminar la lista porque tiene items que no est√°n pendientes.'\n    }\n  }];\n}\n\n// Preparar rowNumbers para borrar\nconst rowNumbersItems = items.map(i => i.row_number); // filas de items\nconst rowNumberLista = lista.row_number;             // fila de la lista\n\n// Mensaje de √©xito\nreturn [{\n  json: {\n    mensaje: `‚úÖ La lista \"${lista.nombre_lista}\" (ID: ${lista.id_lista}) y sus items pendientes se pueden eliminar.`,\n    rowNumberLista: rowNumberLista,\n    rowNumbersItems: rowNumbersItems\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        29072,
        12688
      ],
      "id": "a8cc0d99-fe0b-4508-8d3e-59434991029f",
      "name": "Code in JavaScript18"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        29280,
        12688
      ],
      "id": "d703b2ef-5995-4faa-a6ea-1404bb65264e",
      "name": "If31"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": "={{ false }}",
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        28256,
        13040
      ],
      "id": "aa9148bb-389e-4f0c-b38e-651a51acc069",
      "name": "If32"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        28864,
        12688
      ],
      "id": "d2732456-966f-4228-b441-6f3c91436ea0",
      "name": "Get row(s) in sheet55",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "startIndex": "={{ $('Get row(s) in sheet56').item.json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29952,
        13264
      ],
      "id": "0e0f209a-81c3-4140-b27d-590013fddd81",
      "name": "Delete rows or columns from sheet4",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_lista",
              "lookupValue": "={{ $('Get row(s) in sheet54').item.json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29520,
        13264
      ],
      "id": "11b7a267-af7d-4a76-89a7-ce4eb4cfccfe",
      "name": "Get row(s) in sheet56",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        28784,
        14128
      ],
      "id": "2d7a8b00-e5f4-4254-b940-32e25b04d74c",
      "name": "If33"
    },
    {
      "parameters": {
        "jsCode": "// ID de lista ingresado desde Telegram\nconst idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\n\n// Normalizar inputs a arrays\nconst listas = Array.isArray($node[\"Get row(s) in sheet57\"].json)\n  ? $node[\"Get row(s) in sheet57\"].json\n  : [$node[\"Get row(s) in sheet57\"].json];\n\nconst itemsLista = Array.isArray($node[\"Get row(s) in sheet59\"].json)\n  ? $node[\"Get row(s) in sheet59\"].json\n  : [$node[\"Get row(s) in sheet59\"].json];\n\n// Buscar la lista\nconst lista = listas.find(l => l.id_lista.toUpperCase() === idIngresado);\n\nif (!lista) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ ninguna lista con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\n// Filtrar items que pertenecen a esta lista\nconst items = itemsLista.filter(i => i.id_lista.toUpperCase() === idIngresado);\n\nif (items.length === 0) {\n  return [{\n    json: {\n      error: 'La lista no tiene items para marcar como completada.'\n    }\n  }];\n}\n\n// Verificar si todos los items est√°n pendientes\nconst todosPendientes = items.every(i => i.estado.trim().toLowerCase() === 'pendiente');\n\nif (!todosPendientes) {\n  return [{\n    json: {\n      error: 'Solo se pueden marcar listas como completadas si todos sus items est√°n pendientes.'\n    }\n  }];\n}\n\n// Preparar rowNumbers para actualizar\nconst rowNumbersItems = items.map(i => i.row_number); // filas de items\nconst rowNumberLista = lista.row_number;             // fila de la lista\n\n// Mensaje de √©xito\nreturn [{\n  json: {\n    mensaje: `‚úÖ La lista \"${lista.nombre_lista}\" (ID: ${lista.id_lista}) se puede marcar como completada.`,\n    rowNumberLista,\n    rowNumbersItems\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        29552,
        13952
      ],
      "id": "e7f9491d-bb88-434a-aa39-ceccb74bb428",
      "name": "Code in JavaScript21"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        29760,
        13952
      ],
      "id": "9773f159-17eb-425d-9d8d-9fadd325e2c3",
      "name": "If34"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "LISTA_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        30176,
        14016
      ],
      "id": "89528652-0d84-4d38-ab22-357691cc6225",
      "name": "Update row in sheet91",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript21').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        30176,
        13808
      ],
      "id": "e8d8b098-79b7-4bd4-bb1e-07c9c98c74be",
      "name": "Send a text message109",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la lista con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        30416,
        14016
      ],
      "id": "af00030e-9b17-4917-828a-d0487afbda55",
      "name": "Send a text message110",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29392,
        14320
      ],
      "id": "bf071e2f-5d92-49a2-a13a-178ece34c116",
      "name": "Get row(s) in sheet58",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        30496,
        14320
      ],
      "id": "89fd6f6d-896f-45f0-add2-1063a0f1a99d",
      "name": "Send a text message111",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        30704,
        14320
      ],
      "id": "b843ebac-def8-448e-8be8-5b99ff002357",
      "name": "Send a text message112",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        30304,
        14320
      ],
      "id": "bc74a2c3-fee2-4995-a200-ef9199ec6d3e",
      "name": "Update row in sheet92",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        30112,
        14320
      ],
      "id": "4e4dfd57-406d-4b0c-90f1-af88d4190b94",
      "name": "Edit Fields22"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_tarea": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "titulo": "={{ $json.titulo }}",
            "prioridad": "={{ $json.prioridad }}",
            "fecha_objetivo": "={{ $json.fecha_objetivo }}",
            "creado_por": "={{ $json.creado_por }}",
            "estado": "Completada"
          },
          "matchingColumns": [
            "id_tarea"
          ],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29856,
        14320
      ],
      "id": "501fb6cb-ab16-4437-bce6-71d5f1b116d3",
      "name": "Update row in sheet93",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29136,
        13952
      ],
      "id": "32a55a8d-da92-4dfe-8ac4-72da5a05f633",
      "name": "Get row(s) in sheet57",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29344,
        13952
      ],
      "id": "94bdc16f-1ffe-4faa-85dc-e1a676c821fd",
      "name": "Get row(s) in sheet59",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        21056,
        16784
      ],
      "id": "18b02fe3-c12c-4f55-8a53-e0f2335e9c05",
      "name": "If35"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        21408,
        16928
      ],
      "id": "175cefae-8ef8-40bb-9931-d4ef6f349793",
      "name": "Send a text message113",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        22096,
        16928
      ],
      "id": "541e1a13-35b7-4b4c-8409-5658a3e82632",
      "name": "Send a text message114",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        21856,
        16928
      ],
      "id": "c1567381-0e49-4ba7-b8f4-7430db0a87dd",
      "name": "Update row in sheet94",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        21648,
        16928
      ],
      "id": "df1f511e-5b22-4655-85a9-57349a368c84",
      "name": "Edit Fields23"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        29136,
        14480
      ],
      "id": "20ff5ade-a213-4988-92de-ee2aaf9f53be",
      "name": "If36"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        29392,
        14608
      ],
      "id": "86a6a2e6-c334-47c7-91a2-ca8b1a0f0902",
      "name": "Send a text message115",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        30080,
        14608
      ],
      "id": "ca403b11-5fb6-4dbf-9aeb-66bd9834cd62",
      "name": "Send a text message116",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "hVjBqvfgRpLuO6yl",
          "name": "AgendaBot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29840,
        14608
      ],
      "id": "d28d6576-1f36-4cbf-9e28-d9d2c575a443",
      "name": "Update row in sheet95",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        29632,
        14608
      ],
      "id": "cb8a89fb-cfcb-4d88-b878-833983d4a5f2",
      "name": "Edit Fields24"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_lista",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        29616,
        14320
      ],
      "id": "5d1b3832-3bc3-4d93-80ef-d861d5fd49c4",
      "name": "Get row(s) in sheet60",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "AEp8mRuxGWXlRjq0",
          "name": "GoogleBot"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If24",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If17",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If21",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If27",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If33",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Send a text message2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet42",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message65",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message66",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message64",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message63",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message62",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message2": {
      "main": [
        [
          {
            "node": "Send a text message3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message5": {
      "main": [
        [
          {
            "node": "Send a text message6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message4": {
      "main": [
        [
          {
            "node": "Update row in sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Send a text message9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message24",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message39",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message7": {
      "main": [
        [
          {
            "node": "Send a text message8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message9": {
      "main": [
        [
          {
            "node": "Update row in sheet4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD": {
      "main": [
        [
          {
            "node": "Code in JavaScript9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch3": {
      "main": [
        [
          {
            "node": "Validar formato YYYY-MM-DD",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato HH:MM",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet5": {
      "main": [
        [
          {
            "node": "Telegram OK",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato HH:MM": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet1": {
      "main": [
        [
          {
            "node": "Update row in sheet6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet6": {
      "main": [
        [
          {
            "node": "Telegram OK1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet7": {
      "main": [
        [
          {
            "node": "Telegram OK2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet2": {
      "main": [
        [
          {
            "node": "Update row in sheet7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet8": {
      "main": [
        [
          {
            "node": "Telegram OK3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet3": {
      "main": [
        [
          {
            "node": "Update row in sheet8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet10": {
      "main": [
        [
          {
            "node": "Telegram OK5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet5": {
      "main": [
        [
          {
            "node": "Update row in sheet10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch5": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet11": {
      "main": [
        [
          {
            "node": "Telegram OK6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet6": {
      "main": [
        [
          {
            "node": "Update row in sheet11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet12": {
      "main": [
        [
          {
            "node": "Telegram OK7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet7": {
      "main": [
        [
          {
            "node": "Update row in sheet12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch4": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet8": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "Send a text message11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message11": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet14": {
      "main": [
        [
          {
            "node": "Send a text message12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet15": {
      "main": [
        [
          {
            "node": "Send a text message13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message14": {
      "main": [
        [
          {
            "node": "Update row in sheet16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet4": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message": {
      "main": [
        [
          {
            "node": "Edit Fields5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message1": {
      "main": [
        [
          {
            "node": "Update row in sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet13": {
      "main": [
        [
          {
            "node": "Send a text message22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Update row in sheet13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet14": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Send a text message23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message23": {
      "main": [
        [
          {
            "node": "Update row in sheet9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message24": {
      "main": [
        [
          {
            "node": "Update row in sheet20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet15": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "Send a text message25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet21": {
      "main": [
        [
          {
            "node": "Send a text message26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet16",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch10": {
      "main": [
        [
          {
            "node": "Send a text message27",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message28",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message29",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD2": {
      "main": [
        [
          {
            "node": "Update row in sheet23",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet23": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message27": {
      "main": [
        [
          {
            "node": "Update row in sheet29",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet16": {
      "main": [
        [
          {
            "node": "Switch10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message28": {
      "main": [
        [
          {
            "node": "Update row in sheet30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message29": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Update row in sheet31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch11": {
      "main": [
        [
          {
            "node": "Validar formato YYYY-MM-DD2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato HH:MM1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato HH:MM1": {
      "main": [
        [
          {
            "node": "Update row in sheet32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet33": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet32": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet34": {
      "main": [
        [
          {
            "node": "Edit Fields4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Update row in sheet35",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet35": {
      "main": [
        [
          {
            "node": "Telegram OK4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields4": {
      "main": [
        [
          {
            "node": "Update row in sheet36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet36": {
      "main": [
        [
          {
            "node": "Telegram OK13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram OK4": {
      "main": [
        [
          {
            "node": "Send a text message30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram OK13": {
      "main": [
        [
          {
            "node": "Send a text message31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields5": {
      "main": [
        [
          {
            "node": "Update row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet17": {
      "main": [
        [
          {
            "node": "Update row in sheet34",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet18": {
      "main": [
        [
          {
            "node": "Update row in sheet33",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message32": {
      "main": [
        [
          {
            "node": "Update row in sheet37",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet19": {
      "main": [
        [
          {
            "node": "Code in JavaScript4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript4": {
      "main": [
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "Send a text message33",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet38",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet38": {
      "main": [
        [
          {
            "node": "Send a text message34",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If6": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet": {
      "main": [
        [
          {
            "node": "Edit Fields6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If7": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet21",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message37",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet20": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet21": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message35": {
      "main": [
        [
          {
            "node": "Send a text message36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message37": {
      "main": [
        [
          {
            "node": "Edit Fields7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet39": {
      "main": [
        [
          {
            "node": "Send a text message35",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields6": {
      "main": [
        [
          {
            "node": "Update row in sheet39",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields7": {
      "main": [
        [
          {
            "node": "Update row in sheet40",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet40": {
      "main": [
        [
          {
            "node": "Send a text message38",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet22": {
      "main": [
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript5": {
      "main": [
        [
          {
            "node": "If9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If9": {
      "main": [
        [
          {
            "node": "Send a text message40",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet42",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet42": {
      "main": [
        [
          {
            "node": "Send a text message41",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If8": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet22",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet23": {
      "main": [
        [
          {
            "node": "Update row in sheet44",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message42": {
      "main": [
        [
          {
            "node": "Send a text message43",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet43": {
      "main": [
        [
          {
            "node": "Send a text message42",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields8": {
      "main": [
        [
          {
            "node": "Update row in sheet43",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message39": {
      "main": [
        [
          {
            "node": "Update row in sheet41",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet44": {
      "main": [
        [
          {
            "node": "Edit Fields8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If10": {
      "main": [
        [
          {
            "node": "Update row in sheet5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript9": {
      "main": [
        [
          {
            "node": "If10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Switch6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch6": {
      "main": [
        [
          {
            "node": "Send a text message15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet26",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message47",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message59",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message86",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message15": {
      "main": [
        [
          {
            "node": "Update row in sheet22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message16": {
      "main": [
        [
          {
            "node": "Send a text message17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript6": {
      "main": [
        [
          {
            "node": "Send a text message46",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet26": {
      "main": [
        [
          {
            "node": "Code in JavaScript6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message46": {
      "main": [
        [
          {
            "node": "Update row in sheet17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message47": {
      "main": [
        [
          {
            "node": "Update row in sheet46",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message59": {
      "main": [
        [
          {
            "node": "Update row in sheet56",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch7": {
      "main": [
        [
          {
            "node": "Update row in sheet25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato YYYY-MM-DD1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch8": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet10",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet11",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet9": {
      "main": [
        [
          {
            "node": "Update row in sheet26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet10": {
      "main": [
        [
          {
            "node": "Update row in sheet27",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet11": {
      "main": [
        [
          {
            "node": "Update row in sheet28",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD1": {
      "main": [
        [
          {
            "node": "Code in JavaScript16",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet12": {
      "main": [
        [
          {
            "node": "Update row in sheet24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet24": {
      "main": [
        [
          {
            "node": "Telegram OK12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet25": {
      "main": [
        [
          {
            "node": "Telegram OK8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet26": {
      "main": [
        [
          {
            "node": "Telegram OK9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet27": {
      "main": [
        [
          {
            "node": "Telegram OK10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet28": {
      "main": [
        [
          {
            "node": "Telegram OK11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch9": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet18": {
      "main": [
        [
          {
            "node": "Send a text message20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet19": {
      "main": [
        [
          {
            "node": "Send a text message21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet2": {
      "main": [
        [
          {
            "node": "Send a text message44",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet24": {
      "main": [
        [
          {
            "node": "Code in JavaScript8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message44": {
      "main": [
        [
          {
            "node": "Edit Fields9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet45": {
      "main": [
        [
          {
            "node": "Send a text message45",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet25": {
      "main": [
        [
          {
            "node": "Code in JavaScript7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript7": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript8": {
      "main": [
        [
          {
            "node": "Append row in sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields9": {
      "main": [
        [
          {
            "node": "Update row in sheet45",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If17": {
      "main": [
        [
          {
            "node": "Switch13",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message60": {
      "main": [
        [
          {
            "node": "Send a text message61",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch13": {
      "main": [
        [
          {
            "node": "Send a text message67",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message68",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message69",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message60",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message65": {
      "main": [
        [
          {
            "node": "Update row in sheet57",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message67": {
      "main": [
        [
          {
            "node": "Update row in sheet58",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message68": {
      "main": [
        [
          {
            "node": "Update row in sheet59",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message69": {
      "main": [
        [
          {
            "node": "Update row in sheet60",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet61": {
      "main": [
        [
          {
            "node": "Telegram OK15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch14": {
      "main": [
        [
          {
            "node": "Update row in sheet61",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet13",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato HH:MM2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet62": {
      "main": [
        [
          {
            "node": "Telegram OK16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet13": {
      "main": [
        [
          {
            "node": "Update row in sheet62",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet33": {
      "main": [
        [
          {
            "node": "Append row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet1": {
      "main": [
        [
          {
            "node": "Send a text message70",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message70": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet63": {
      "main": [
        [
          {
            "node": "Send a text message71",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet34": {
      "main": [
        [
          {
            "node": "Code in JavaScript12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript12": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet33",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Update row in sheet63",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato HH:MM2": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet34",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram OK17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet35": {
      "main": [
        [
          {
            "node": "Code in JavaScript13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript13": {
      "main": [
        [
          {
            "node": "If18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If18": {
      "main": [
        [
          {
            "node": "Send a text message72",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet64",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet64": {
      "main": [
        [
          {
            "node": "Send a text message73",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If19": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet35",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If29",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet2": {
      "main": [
        [
          {
            "node": "Edit Fields14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If20": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet37",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message76",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet36": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet37": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message74": {
      "main": [
        [
          {
            "node": "Send a text message75",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message76": {
      "main": [
        [
          {
            "node": "Edit Fields15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet65": {
      "main": [
        [
          {
            "node": "Send a text message74",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields14": {
      "main": [
        [
          {
            "node": "Update row in sheet65",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet66": {
      "main": [
        [
          {
            "node": "Send a text message77",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields15": {
      "main": [
        [
          {
            "node": "Update row in sheet66",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If21": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet38",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If28",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet38": {
      "main": [
        [
          {
            "node": "Code in JavaScript14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript14": {
      "main": [
        [
          {
            "node": "If22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If22": {
      "main": [
        [
          {
            "node": "Send a text message78",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet67",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet67": {
      "main": [
        [
          {
            "node": "Send a text message79",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet39": {
      "main": [
        [
          {
            "node": "If23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message80": {
      "main": [
        [
          {
            "node": "Send a text message81",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet68": {
      "main": [
        [
          {
            "node": "Send a text message80",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields16": {
      "main": [
        [
          {
            "node": "Update row in sheet68",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet69": {
      "main": [
        [
          {
            "node": "Edit Fields16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If23": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet40",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet41",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet40": {
      "main": [
        [
          {
            "node": "Update row in sheet69",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message82": {
      "main": [
        [
          {
            "node": "Send a text message83",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet70": {
      "main": [
        [
          {
            "node": "Send a text message82",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields17": {
      "main": [
        [
          {
            "node": "Update row in sheet70",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet41": {
      "main": [
        [
          {
            "node": "Update row in sheet71",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet71": {
      "main": [
        [
          {
            "node": "Edit Fields17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet42": {
      "main": [
        [
          {
            "node": "Code in JavaScript15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript15": {
      "main": [
        [
          {
            "node": "Send a text message84",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message84": {
      "main": [
        [
          {
            "node": "Update row in sheet72",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet29": {
      "main": [
        [
          {
            "node": "Code in JavaScript11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet50": {
      "main": [
        [
          {
            "node": "Send a text message54",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet1": {
      "main": [
        [
          {
            "node": "Edit Fields12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If15": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message57",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet31": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet32": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message55": {
      "main": [
        [
          {
            "node": "Send a text message56",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message57": {
      "main": [
        [
          {
            "node": "Edit Fields13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet53": {
      "main": [
        [
          {
            "node": "Send a text message55",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields12": {
      "main": [
        [
          {
            "node": "Update row in sheet53",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet54": {
      "main": [
        [
          {
            "node": "Send a text message58",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields13": {
      "main": [
        [
          {
            "node": "Update row in sheet54",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript11": {
      "main": [
        [
          {
            "node": "If16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If16": {
      "main": [
        [
          {
            "node": "Send a text message51",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet50",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If24": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet29",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet27": {
      "main": [
        [
          {
            "node": "Code in JavaScript10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet47": {
      "main": [
        [
          {
            "node": "Send a text message49",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch12": {
      "main": [
        [
          {
            "node": "Send a text message50",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message52",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If12": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet28",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato YYYY-MM-DD3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD3": {
      "main": [
        [
          {
            "node": "Update row in sheet48",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram OK14": {
      "main": [
        [
          {
            "node": "Send a text message53",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet48": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message50": {
      "main": [
        [
          {
            "node": "Update row in sheet49",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet28": {
      "main": [
        [
          {
            "node": "Switch12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message52": {
      "main": [
        [
          {
            "node": "Edit Fields10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields10": {
      "main": [
        [
          {
            "node": "Update row in sheet51",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet52": {
      "main": [
        [
          {
            "node": "Edit Fields11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields11": {
      "main": [
        [
          {
            "node": "Update row in sheet55",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet55": {
      "main": [
        [
          {
            "node": "Telegram OK14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet30": {
      "main": [
        [
          {
            "node": "Update row in sheet52",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript10": {
      "main": [
        [
          {
            "node": "If13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If13": {
      "main": [
        [
          {
            "node": "Send a text message48",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet47",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If14": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet27",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript16": {
      "main": [
        [
          {
            "node": "If11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If11": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet12",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message85",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message86": {
      "main": [
        [
          {
            "node": "Update row in sheet73",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If25": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet43",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If35",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet43": {
      "main": [
        [
          {
            "node": "Code in JavaScript17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript17": {
      "main": [
        [
          {
            "node": "If26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If26": {
      "main": [
        [
          {
            "node": "Send a text message87",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet74",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet74": {
      "main": [
        [
          {
            "node": "Send a text message88",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet44": {
      "main": [
        [
          {
            "node": "Update row in sheet76",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message89": {
      "main": [
        [
          {
            "node": "Send a text message90",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet75": {
      "main": [
        [
          {
            "node": "Send a text message89",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields18": {
      "main": [
        [
          {
            "node": "Update row in sheet75",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet76": {
      "main": [
        [
          {
            "node": "Edit Fields18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message66": {
      "main": [
        [
          {
            "node": "Update row in sheet77",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message91": {
      "main": [
        [
          {
            "node": "Update row in sheet78",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet45": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet51",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message92": {
      "main": [
        [
          {
            "node": "Update row in sheet79",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message93": {
      "main": [
        [
          {
            "node": "Update row in sheet80",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If27": {
      "main": [
        [
          {
            "node": "Switch16",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch16": {
      "main": [
        [
          {
            "node": "Send a text message91",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet45",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message93",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message102",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message94",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message94": {
      "main": [
        [
          {
            "node": "Send a text message95",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch15": {
      "main": [
        [
          {
            "node": "Update row in sheet81",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet46",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet47",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet81": {
      "main": [
        [
          {
            "node": "Telegram OK18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet46": {
      "main": [
        [
          {
            "node": "Update row in sheet82",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet82": {
      "main": [
        [
          {
            "node": "Telegram OK19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet47": {
      "main": [
        [
          {
            "node": "Update row in sheet83",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet83": {
      "main": [
        [
          {
            "node": "Telegram OK20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch17": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet49",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet85",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet84",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet84": {
      "main": [
        [
          {
            "node": "Send a text message96",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet85": {
      "main": [
        [
          {
            "node": "Send a text message97",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet48": {
      "main": [
        [
          {
            "node": "Append row in sheet4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message98": {
      "main": [
        [
          {
            "node": "Edit Fields19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet86": {
      "main": [
        [
          {
            "node": "Send a text message99",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet49": {
      "main": [
        [
          {
            "node": "Code in JavaScript19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript19": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet50",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields19": {
      "main": [
        [
          {
            "node": "Update row in sheet86",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript20": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet48",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet50": {
      "main": [
        [
          {
            "node": "Code in JavaScript20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet4": {
      "main": [
        [
          {
            "node": "Append row in sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet3": {
      "main": [
        [
          {
            "node": "Send a text message98",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet51": {
      "main": [
        [
          {
            "node": "Code in JavaScript22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If28": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet39",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message100",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If29": {
      "main": [
        [
          {
            "node": "If20",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message101",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript22": {
      "main": [
        [
          {
            "node": "Send a text message92",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message102": {
      "main": [
        [
          {
            "node": "Update row in sheet87",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet52": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet55",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet88": {
      "main": [
        [
          {
            "node": "Send a text message104",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet3": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If30": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet54",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message107",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet53": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet56",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet54": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet53",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message105": {
      "main": [
        [
          {
            "node": "Send a text message106",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message107": {
      "main": [
        [
          {
            "node": "Edit Fields21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet89": {
      "main": [
        [
          {
            "node": "Send a text message105",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields20": {
      "main": [
        [
          {
            "node": "Update row in sheet89",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet90": {
      "main": [
        [
          {
            "node": "Send a text message108",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields21": {
      "main": [
        [
          {
            "node": "Update row in sheet90",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript18": {
      "main": [
        [
          {
            "node": "If31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If31": {
      "main": [
        [
          {
            "node": "Send a text message103",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet88",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If32": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet52",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet55": {
      "main": [
        [
          {
            "node": "Code in JavaScript18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet4": {
      "main": [
        [
          {
            "node": "Edit Fields20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet56": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If33": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet57",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript21": {
      "main": [
        [
          {
            "node": "If34",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If34": {
      "main": [
        [
          {
            "node": "Send a text message109",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet91",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet91": {
      "main": [
        [
          {
            "node": "Send a text message110",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet58": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet60",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message111": {
      "main": [
        [
          {
            "node": "Send a text message112",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet92": {
      "main": [
        [
          {
            "node": "Send a text message111",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields22": {
      "main": [
        [
          {
            "node": "Update row in sheet92",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet93": {
      "main": [
        [
          {
            "node": "Edit Fields22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet57": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet59",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet59": {
      "main": [
        [
          {
            "node": "Code in JavaScript21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If35": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet44",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message113",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message113": {
      "main": [
        [
          {
            "node": "Edit Fields23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet94": {
      "main": [
        [
          {
            "node": "Send a text message114",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields23": {
      "main": [
        [
          {
            "node": "Update row in sheet94",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If36": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet58",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message115",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message115": {
      "main": [
        [
          {
            "node": "Edit Fields24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet95": {
      "main": [
        [
          {
            "node": "Send a text message116",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields24": {
      "main": [
        [
          {
            "node": "Update row in sheet95",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet60": {
      "main": [
        [
          {
            "node": "Update row in sheet93",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "13e34f1e-b119-4613-a876-55cfac0c5975",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "9074f108d8db127b26f4aa6ef5f25ee50aadf1b812ecf4cf9b0b39aed5dfbac1"
  },
  "id": "5sysZ3e4iy-kC8_qZrT6F",
  "tags": []
}