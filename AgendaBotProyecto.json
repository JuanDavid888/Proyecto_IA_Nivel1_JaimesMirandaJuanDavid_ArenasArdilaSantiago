{
  "name": "AgendaBot",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        1328,
        13792
      ],
      "id": "9e7a8f1b-dd43-4816-ace6-eff5fe6e11f6",
      "name": "Telegram Trigger",
      "webhookId": "c417538b-5766-4202-88a3-1dd12713d5ef",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.message.chat.first_name }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1536,
        13792
      ],
      "id": "66b8d881-723b-491a-b6da-aeb432855253",
      "name": "Update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1744,
        13792
      ],
      "id": "86897c3d-8889-40eb-a979-24039951d0e6",
      "name": "Get row(s) in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "186bad57-c7b2-4213-9622-8703c693f1ea"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "72a54972-047c-4a0d-918e-ade3f6c74074",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "9",
                    "operator": {
                      "type": "string",
                      "operation": "empty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "8abed294-fd72-4894-9012-22363b325ad7",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "MENU",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "aeafb69b-8506-4933-86e2-a2cb79f7967e",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "6d37cf9b-3ea7-4aa2-a6ed-58e4c2c4bf5e",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA_EDIT",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "937947ba-45cb-4229-b13e-7421e3a92314",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "eb2a8ce0-3b63-4d7f-a472-e94f0775ef14",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "AGENDA_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "472d10a6-cf31-4632-830f-8f5a2f6315ea",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREAS",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "5b9c839b-26e1-4d3f-8181-4d955c6d5d68",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREA_EDIT",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "8da963bd-52aa-41ac-9e5d-74c2c49810fc",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREA_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "3259c32f-a4f1-4da4-93fb-b7143a9b6c4a",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "TAREA_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0e4bcae4-f384-4d05-9124-ccc3f6e3586a",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "HABITOS",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "cf4d8a0a-683d-4f7c-8509-bcaf3ac1b8ff",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "HABITO_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "6cc4bb38-5a0b-4778-ae3e-eb9d43fa6809",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "HABITO_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9dd7a314-04b1-422d-b6f9-3f65e8b90d9a",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "LISTA",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "56261382-b2cf-4a4c-8d1f-487fc7d9dc46",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "LISTA_DELETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9f3460a4-2616-4ca7-b4d2-5ab8ef7fe62d",
                    "leftValue": "={{ $json.pantalla_actual }}",
                    "rightValue": "LISTA_COMPLETE",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        1968,
        12992
      ],
      "id": "b76c177d-2ad8-4afc-9d9d-f9350e6a01c7",
      "name": "Switch"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2832,
        10896
      ],
      "id": "9263ebbe-b518-4f5a-acf9-a5f7ff7fb7ef",
      "name": "Update row in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2528,
        11408
      ],
      "id": "fa549c79-2b34-40c2-b903-8485272e0e21",
      "name": "Send a text message",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "content": "Si el usuario ingresa \"9\" se retornar√° el mensaje de MEN√ö PRINCIPAL en cualquier parte del programa",
        "height": 96,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2176,
        11376
      ],
      "typeVersion": 1,
      "id": "65c40e92-9e33-4a5d-8be3-36ad0e8d803c",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Hola, soy AgendaBot üëã\n\nEstoy aqu√≠ para ayudarte a organizar tus citas, tareas y recordatorios\nde forma sencilla y sin complicaciones.\n\nPuedes escribirme en cualquier momento.\nPara avanzar, solo tienes que escribir el n√∫mero de la opci√≥n que quieras usar.\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nMensaje de orientaci√≥n:\n\nTip r√°pido: escribe solo el n√∫mero (por ejemplo: 1) y presiona enviar.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2528,
        11600
      ],
      "id": "757778ec-3e0f-4ab3-8071-77ecc99c8230",
      "name": "Send a text message1",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "content": "Cuando el usuario inicia por primera vez se otorgar√° el estado de BIENVENIDA, que es el mensaje de MEN√ö PRINCIPAL con un mensaje especial",
        "height": 112,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2176,
        11568
      ],
      "typeVersion": 1,
      "id": "082e8368-554f-446b-b6fd-b9555c417105",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "0",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "7b4ea7af-adc0-4372-b1ab-6544558c5fe0"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "4f23485a-7f79-47b0-8ab9-0251efd9c614",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "30afad59-fb6a-488e-ae09-a9fb3bab0499",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a8cb77bc-3bbd-4860-848a-687f4370ea7b",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "d6851864-6261-491d-bdb6-a2d2b809bd1b",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0ef506af-ce13-4342-a5d2-a95da5c228ad",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "52dfa6a5-59e1-4f91-a6ec-26f5f5bde465",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "6",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "32470be4-638a-4031-8607-9491ea88d98f",
                    "leftValue": "",
                    "rightValue": "7",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "585d96b9-2639-4e90-83b2-a683e1581626",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "8",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "580946f9-9f32-4ed2-80f1-2e9bc69af212",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "0, 1, 2, 3, 4, 5, 6, 7, 8",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        2960,
        11536
      ],
      "id": "961c6586-0412-4201-b6b5-6f416618eb1f",
      "name": "Switch1"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Este bot funciona con men√∫s num√©ricos y pasos guiados, para que todo sea claro y sin complicaciones. Ten en cuenta lo siguiente:\n\n1Ô∏è‚É£ C√≥mo navegar por los men√∫s\n\nCuando veas un men√∫, responde solo con el n√∫mero de la opci√≥n que quieras usar\nüëâ Ejemplo: 1, 3, 6\n\nNo escribas texto adicional ni comandos como /start.\n\nEl bot siempre te dir√° d√≥nde est√°s y qu√© opciones tienes.\n\nüí° Recomendaci√≥n: si no sabes por d√≥nde empezar, el bot siempre te sugerir√° una opci√≥n.\n\n2Ô∏è‚É£ Ingreso de datos paso a paso\n\nCuando se pida una fecha, usa el formato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\nPara hora, usa formato 24 horas: HH:MM\nEjemplo: 14:30\n\nSi se pide texto (nombre, motivo, t√≠tulo), escribe la informaci√≥n tal cual.\n\nCuando haya opciones, elige solo el n√∫mero correspondiente.\n\nEl bot validar√° la informaci√≥n y te avisar√° si algo no es correcto.\n\n3Ô∏è‚É£ Cancelar o volver atr√°s\n\nEn la mayor√≠a de los pasos puedes escribir:\n9 ‚Üí Cancelar o volver\n\nEl bot nunca guardar√° nada sin pedirte confirmaci√≥n previa.\n\n4Ô∏è‚É£ Si algo no sale como esperas\n\nSi ingresas una opci√≥n inv√°lida, el bot te avisar√° y te mostrar√° nuevamente el men√∫.\n\nTodas las acciones quedan registradas para mantener el control y evitar errores.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3168,
        10704
      ],
      "id": "4d49d2ab-40fe-4640-83c0-476af9be612c",
      "name": "Send a text message2",
      "webhookId": "2f72050a-901e-4314-9988-37623d8cb50d",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3344,
        10704
      ],
      "id": "8b49339e-6606-4a97-8a38-214b005524fa",
      "name": "Send a text message3",
      "webhookId": "e1b34d6a-5286-4830-a7ee-7e8c8ee6f4f6",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "content": "### Opciones Mne√∫\nIndicaciones iniciales de cada opci√≥n",
        "height": 96,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3136,
        10576
      ],
      "typeVersion": 1,
      "id": "3c8e92a6-964a-46f3-83d3-9d37878df940",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2704,
        11600
      ],
      "id": "837eb0a5-2338-4146-8864-e2760cdb2dc4",
      "name": "Update row in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3168,
        10896
      ],
      "id": "5f0218a4-6c98-40ca-94e2-4b425d011a08",
      "name": "Send a text message4",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "retryOnFail": true,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ principal\nOpciones disponibles: 0 al 8",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3280,
        12432
      ],
      "id": "fea8cb0d-f5cd-42a6-a433-0ed3005849a9",
      "name": "Send a text message5",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3536,
        12432
      ],
      "id": "47cc7a11-1d28-4c64-8a88-44b6a2b83dc6",
      "name": "Send a text message6",
      "webhookId": "e1b34d6a-5286-4830-a7ee-7e8c8ee6f4f6",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "AGENDA"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3376,
        10896
      ],
      "id": "bf1c1f2e-e431-40c9-82f6-db4e7bcbb97c",
      "name": "Update row in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c0f971a3-78c3-47f7-bd13-0ccf2ee00f7a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b974eb1-a693-4df3-989d-f7de83649604",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "bcb58231-fbde-4cbf-a34e-0210b6ce55d1",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 4, 5, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        4288,
        11104
      ],
      "id": "7eedff2d-591e-480f-a62e-63c15e14c6d7",
      "name": "Switch2"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ agenda\nOpciones disponibles: 1 al 5 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4544,
        11488
      ],
      "id": "f70af2bc-ec22-4ead-956a-f69092c08b0b",
      "name": "Send a text message7",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4800,
        11488
      ],
      "id": "02a2b053-d6ed-4611-bab9-f6769802d86f",
      "name": "Send a text message8",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu cita.\n\nPaso 1 de 6\n¬øCu√°l es la fecha de la cita?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4544,
        10576
      ],
      "id": "dcaab2d1-f16b-4b9a-a729-5377fca4b440",
      "name": "Send a text message9",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4800,
        10576
      ],
      "id": "974da622-cf74-4396-b29b-eca1db02fc87",
      "name": "Update row in sheet4",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        3888,
        12176
      ],
      "id": "89ec85b6-e372-46df-8f2f-57f377cdcfb4",
      "name": "If"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9b0b7bf2-3274-407a-950e-8392c39aa912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0a90db21-1ee3-4016-ae6e-4dfd7eb90912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 5,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b6c711aa-8613-45b0-8d4a-cdfe694a3fb5",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 6,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        4848,
        11808
      ],
      "id": "72094dd8-f00a-47ca-acd2-8b88eefd07b8",
      "name": "Switch3"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "ae0a947f-a718-441e-a3ed-8ee1a594eb56",
      "name": "Validar formato YYYY-MM-DD",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        5696,
        11312
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 6\n¬øA qu√© hora ser√° la cita?\n\nFormato 24 horas (HH:MM)\nEjemplo: 14:30\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "5c011d05-52a8-487e-81bf-f74bb64ada9c",
      "name": "Telegram OK",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        6672,
        10992
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "c4d686cc-7598-4d28-99b1-06bafe1919e8",
      "name": "Telegram Error",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        6176,
        11424
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6416,
        10992
      ],
      "id": "570630d5-0934-42e3-8493-eb6037fdbf10",
      "name": "Update row in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^([01]\\d|2[0-3]):([0-5]\\d)$"
            }
          ]
        }
      },
      "id": "641ca7f5-62f3-4270-8f6d-62a82b5dcc12",
      "name": "Validar formato HH:MM",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        5680,
        11744
      ]
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6432,
        11632
      ],
      "id": "e40ced0e-e4d8-46da-bc92-5b1a9ae41186",
      "name": "Update row in sheet6",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6176,
        11632
      ],
      "id": "389b21ec-a54c-46cc-b118-49da437ba48f",
      "name": "Get row(s) in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:HH:MM\nEjemplo: 14:20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "055794f3-f561-47dc-9036-bd4febf49b2c",
      "name": "Telegram Error1",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        6176,
        11824
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6112,
        11984
      ],
      "id": "b4bc17cd-fc18-475a-978a-310eefea8c74",
      "name": "Update row in sheet7",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5856,
        11984
      ],
      "id": "8fd2b141-2df8-4a45-998c-c94cf13ce1be",
      "name": "Get row(s) in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 4 de 6\nCu√©ntame brevemente el motivo de la cita.\n\nEjemplo: Asesor√≠a t√©cnica\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "33106136-4244-4eae-88eb-d4de1bc23b0c",
      "name": "Telegram OK2",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        6352,
        11984
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "5",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6336,
        12192
      ],
      "id": "00f77a47-e123-4788-97fa-00940e81f0b9",
      "name": "Update row in sheet8",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6080,
        12192
      ],
      "id": "dc61b8df-f178-40c3-a3fc-25d65519c2fb",
      "name": "Get row(s) in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 5 de 6\n¬øC√≥mo ser√° la atenci√≥n?\n\n1. Presencial\n2. Virtual\n3. Llamada\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "5d8ca0e4-0040-4e72-a706-5eccce386144",
      "name": "Telegram OK3",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        6576,
        12192
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "6",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $json.datos_parciales_4 }}",
            "datos_parciales_5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_6": "=Presencial"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6288,
        12416
      ],
      "id": "4da1b031-05f0-49d8-b3de-25458cd062ff",
      "name": "Update row in sheet10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6048,
        12416
      ],
      "id": "f1257868-c919-4cb0-a02b-d79dd4ac85b1",
      "name": "Get row(s) in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu cita:\n\nFecha: {{ $json.datos_parciales_1 }}\nHora: {{ $json.datos_parciales_2 }}\nCliente: {{ $json.datos_parciales_3 }}\nMotivo: {{ $json.datos_parciales_4 }}\nCanal: Presencial\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "fbf95a91-2e39-4fa1-a3c5-3e249d4f28c1",
      "name": "Telegram OK5",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        6528,
        12416
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "2149ed1c-6fc1-4214-9bb6-9d73396df7e2"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c3020235-3026-4758-ba53-3259646bba63",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "81655df1-f7a4-4730-bcb6-91267c74645f",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        5264,
        13408
      ],
      "id": "a66c8b29-320a-4f9b-ac4d-75f1104707d6",
      "name": "Switch4",
      "executeOnce": true
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e49fdbbd-e95e-42b7-8e48-8b3cb29491bd"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "58855023-5cd0-49ff-8a4e-042adcdf4212",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b8fa012e-27ac-4322-82c7-41c4c9cad1fa",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "40cb23eb-e6be-426c-a651-7940bc7f2264",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        5664,
        12608
      ],
      "id": "499af5ef-b2ba-4ece-b6d2-2a9a58fc1ceb",
      "name": "Switch5"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "6",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $json.datos_parciales_4 }}",
            "datos_parciales_5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_6": "=Virtual"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6288,
        12592
      ],
      "id": "698f66fc-9502-4f36-8ef6-47a1b5607f5f",
      "name": "Update row in sheet11",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6032,
        12592
      ],
      "id": "2d3c2543-24fa-45ae-9856-380069f27b16",
      "name": "Get row(s) in sheet6",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu cita:\n\nFecha: {{ $json.datos_parciales_1 }}\nHora: {{ $json.datos_parciales_2 }}\nCliente: {{ $json.datos_parciales_3 }}\nMotivo: {{ $json.datos_parciales_4 }}\nCanal: Virtual\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "34f056ce-2493-4479-8360-4c348a6eef33",
      "name": "Telegram OK6",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        6528,
        12592
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "6",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $json.datos_parciales_3 }}",
            "datos_parciales_4": "={{ $json.datos_parciales_4 }}",
            "datos_parciales_5": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_6": "=Llamada"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6288,
        12784
      ],
      "id": "89c85b4e-e6cf-4a7d-b047-14eac6814722",
      "name": "Update row in sheet12",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6032,
        12784
      ],
      "id": "29dca439-eb5a-4eb5-a382-c87479e19c69",
      "name": "Get row(s) in sheet7",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu cita:\n\nFecha: {{ $json.datos_parciales_1 }}\nHora: {{ $json.datos_parciales_2 }}\nCliente: {{ $json.datos_parciales_3 }}\nMotivo: {{ $json.datos_parciales_4 }}\nCanal: Llamada\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "f08a1d8c-7578-47aa-b8a7-99f4aed83274",
      "name": "Telegram OK7",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        6528,
        12784
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no v√°lida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6032,
        12976
      ],
      "id": "b522be22-41bc-4d1a-ac66-a9f689faa862",
      "name": "Send a text message10",
      "webhookId": "537b6979-63b9-49c5-8610-35f1ef19571a",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6144,
        13312
      ],
      "id": "d8072fbd-b045-4573-8371-f8b91e42bafc",
      "name": "Get row(s) in sheet8",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "hora": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_2 }}",
            "fecha": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_1 }}",
            "nombre": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_3 }}",
            "motivo": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_4 }}",
            "canal": "={{ $('Get row(s) in sheet8').item.json.datos_parciales_6 }}",
            "timestamp_creacion": "={{ $now }}",
            "estado": "={{ $json.estado }}",
            "creado_por": "={{ $('Get row(s) in sheet8').item.json.telegram_user }}",
            "id_cita": "={{ $('Code in JavaScript').item.json.id_cita }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        6656,
        13312
      ],
      "id": "9e5780ab-04fa-4ed8-985a-719992ed0837",
      "name": "Append row in sheet",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}\n",
        "text": "Agenda completada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6880,
        13296
      ],
      "id": "29e33f47-dd32-4330-ac5b-d222a1d3d22f",
      "name": "Send a text message11",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        7296,
        13312
      ],
      "id": "05fdbf53-658f-428c-866a-db447b41b07c",
      "name": "Update row in sheet13",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5664,
        13680
      ],
      "id": "da63152c-ed67-4003-83e5-d85f7e41cbb4",
      "name": "Update row in sheet14",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Cancelado",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5920,
        13680
      ],
      "id": "fc7aabed-9882-49a5-8c47-18c5b89f0d91",
      "name": "Send a text message12",
      "webhookId": "dc8a9a45-0711-45a4-829a-7ab666828377",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5664,
        13488
      ],
      "id": "9557ccdd-fda4-40f2-ad1d-dc43ceefdcb7",
      "name": "Update row in sheet15",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu cita.\n\nPaso 1 de 6\n¬øCu√°l es la fecha de la cita?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5872,
        13488
      ],
      "id": "71ac2492-4c6f-4c8d-912b-632e5fcc0b66",
      "name": "Send a text message13",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 6\n¬øA nombre de qui√©n es la cita?\n\nEscribe el nombre completo.\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "699dd3e6-aec3-45a4-80c8-c7b2a5d97327",
      "name": "Telegram OK1",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        6672,
        11632
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu tarea.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva tarea\n2. Consultar tus tareas\n3. Reprogramar una tarea\n4. Cancelar una tarea\n5. Marcar una tarea como completada\n9. Volver al men√∫ principal",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3168,
        11104
      ],
      "id": "ad544d50-8e43-4db2-a7e9-16342d5ea27b",
      "name": "Send a text message14",
      "webhookId": "928178ae-ec5a-433b-af9a-0e3142214c88",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "TAREAS"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3376,
        11104
      ],
      "id": "33622d5b-3591-472b-90b9-499d448cfc09",
      "name": "Update row in sheet16",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5664,
        13312
      ],
      "id": "36899533-ad77-4efb-b337-abf4df8b50de",
      "name": "Get row(s) in sheet4",
      "alwaysOutputData": true,
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\n\n// Extraer IDs v√°lidos\nconst ids = rows\n  .map(r => r.json.id_cita)\n  .filter(id => typeof id === 'string' && /^CITA-\\d+$/.test(id));\n\n// Si no hay IDs v√°lidos, iniciar contador\nif (ids.length === 0) {\n  return [{\n    json: {\n      id_cita: 'CITA-001'\n    }\n  }];\n}\n\n// Ordenar y obtener el √∫ltimo\nids.sort((a, b) => {\n  const numA = parseInt(a.split('-')[1], 10);\n  const numB = parseInt(b.split('-')[1], 10);\n  return numA - numB;\n});\n\nconst lastId = ids[ids.length - 1];\nconst lastNumber = parseInt(lastId.split('-')[1], 10);\nconst newNumber = lastNumber + 1;\n\n// Formato final\nconst newId = `CITA-${String(newNumber).padStart(3, '0')}`;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    id_cita: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5872,
        13312
      ],
      "id": "3ebcabf5-69bf-4f64-8511-00e45aa16398",
      "name": "Code in JavaScript",
      "executeOnce": true
    },
    {
      "parameters": {
        "jsCode": "\nconst fecha = $input.first().json.datos_parciales_1; // YYYY-MM-DD\nconst hora = $input.first().json.datos_parciales_2;  // HH:mm\n\nif (!fecha || !hora) {\n  return [{\n    json: {\n      estado: 'Pendiente'\n    }\n  }];\n}\n\nconst fechaCita = new Date(`${fecha}T${hora}:00`);\n\nconst ahora = new Date();\n\nconst estado = fechaCita < ahora ? 'Completada' : 'Pendiente';\n\n\nreturn [{\n  json: {\n    estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        6384,
        13312
      ],
      "id": "347f7b9c-f8f4-43e2-9795-5dd8353d0c3e",
      "name": "Code in JavaScript1",
      "executeOnce": true
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        7552,
        13232
      ],
      "id": "3acc2900-c57d-4c9d-ba0b-8e5d16e967f2",
      "name": "Send a text message22",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        7104,
        13312
      ],
      "id": "e5f42304-68c9-4d1b-a8f0-628dd20b4c53",
      "name": "Edit Fields",
      "executeOnce": true
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4576,
        10784
      ],
      "id": "d4388edb-da9e-468b-8308-f8d1c88e8c9f",
      "name": "Get row(s) in sheet14",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "\nconst pendientes = items\n  .map(i => i.json)\n  .filter(cita => cita.estado === 'Pendiente');\n\nif (pendientes.length === 0) {\n  return [{\n    json: {\n      mensaje: 'No tienes citas pendientes en la agenda.'\n    }\n  }];\n}\n\nlet mensaje = 'üìÖ *Citas pendientes*\\n\\n';\n\npendientes.forEach((cita, index) => {\n  mensaje +=\n    `${index + 1}. *${cita.id_cita}*\\n` +\n    `${cita.nombre}\\n` +\n    `${cita.fecha} ‚è∞ ${cita.hora}\\n` +\n    `${cita.motivo}\\n` +\n    `${cita.canal}\\n\\n`;\n});\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4816,
        10784
      ],
      "id": "d97c34d9-e848-4065-8cdc-2ab64a631591",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5024,
        10784
      ],
      "id": "1f439554-dd9d-411a-ad86-be315c8296bd",
      "name": "Send a text message23",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        5232,
        10784
      ],
      "id": "e9c85fea-45c0-4c08-89b9-335cb23da442",
      "name": "Update row in sheet9",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "content": "Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "height": 80,
        "width": 368
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        4064,
        10848
      ],
      "typeVersion": 1,
      "id": "4bce1c1b-2575-4fd4-bb91-f76f184f6678",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la cita que deseas reprogramar.\nEjemplo: CITA-003\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4576,
        10976
      ],
      "id": "8a226257-6003-4499-ac41-4bc29d6896c4",
      "name": "Send a text message24",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": ""
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4784,
        10976
      ],
      "id": "5a81d4eb-8631-4d6e-b66c-b11e87209580",
      "name": "Update row in sheet20",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2688,
        14736
      ],
      "id": "cb508a90-f1f0-4794-9864-678a9ab08422",
      "name": "Get row(s) in sheet15",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst citas = items.map(i => i.json);\n\nconst cita = citas.find(c => c.id_cita === idIngresado);\n\nif (!cita) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una cita con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (cita.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar citas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_cita: cita.id_cita,\n    rowNumber: cita.rowNumber,\n    estado_actual: cita.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2928,
        14736
      ],
      "id": "f7aa62ce-842d-4e0d-9b01-93a167121a28",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        3136,
        14736
      ],
      "id": "ee3bd16f-c597-4733-8dd3-4132d4865884",
      "name": "If2"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "AGENDA_EDIT",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "AGENDA_EDICION"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3552,
        14800
      ],
      "id": "91b3de73-cabb-424a-b125-9be7e472c077",
      "name": "Update row in sheet21",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2288,
        15088
      ],
      "id": "a6876d2e-9909-4367-bf85-769952d3a632",
      "name": "If3"
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript3').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3552,
        14592
      ],
      "id": "da5fa755-b89d-4bef-ba58-e7a1a2dc7a76",
      "name": "Send a text message25",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øQu√© deseas modificar de la cita {{$json.datos_parciales_1}}?\n\n1) Fecha\n2) Hora\n3) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3792,
        14800
      ],
      "id": "743fe588-7cac-4df3-8fb2-69598aa25725",
      "name": "Send a text message26",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "ec675a21-b990-4a0b-b606-021f5e25e71e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "7b9cae24-63de-4dba-82a2-9102b9d8c34b",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "dca7b002-8fba-4618-add1-6e508cc3f0ef",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        3200,
        15216
      ],
      "id": "81849e3b-b94d-4ad7-9569-1de60a86cc96",
      "name": "Switch10"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d9a64f2e-d27d-4b36-9cb0-93827b2a3636",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2704,
        15504
      ],
      "id": "c06860fe-0a2c-4f77-9769-cb57bf9b440c",
      "name": "If4"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "cdedb9d9-9211-4a72-bf39-4369cf907917",
      "name": "Validar formato YYYY-MM-DD2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3520,
        15680
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha actualizada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "985a8d66-ce54-4dd7-9e57-612654d40111",
      "name": "Telegram OK4",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        5232,
        15552
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20\nIntenta nuevamente.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "0920f690-8502-4962-88ce-b8d0cdd8e0f6",
      "name": "Telegram Error3",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        4000,
        15792
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4000,
        15552
      ],
      "id": "0b512701-1084-4594-8831-0f661c4710c0",
      "name": "Update row in sheet23",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ingrese la fecha.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3568,
        14992
      ],
      "id": "dae1b045-3402-4324-9dbb-262da51466a8",
      "name": "Send a text message27",
      "webhookId": "091ffb67-df42-49eb-a2b1-1e8a031acfc4",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet16').item.json.datos_parciales_1 }}",
            "row_number": 2,
            "datos_parciales_2": "1",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3792,
        14992
      ],
      "id": "79a0c73d-f0b9-4747-b96b-baf098c6a8fc",
      "name": "Update row in sheet29",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2992,
        15232
      ],
      "id": "f729b47d-33f8-46d5-a3f2-c20971872311",
      "name": "Get row(s) in sheet16",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ingrese la hora.\nFormato requerido:HH:MM\nEjemplo: 12:20",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3568,
        15200
      ],
      "id": "9e4411f8-5717-4f9d-88a0-4841e92e22b4",
      "name": "Send a text message28",
      "webhookId": "091ffb67-df42-49eb-a2b1-1e8a031acfc4",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet16').item.json.datos_parciales_1 }}",
            "row_number": 2,
            "datos_parciales_2": "2",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3776,
        15200
      ],
      "id": "22fdb2e9-d29e-4a5f-b5c9-69823ec04ae7",
      "name": "Update row in sheet30",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4016,
        15392
      ],
      "id": "7b65f889-e755-4920-a316-2c7ba1671a03",
      "name": "Update row in sheet31",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3568,
        15392
      ],
      "id": "719e2421-ba6b-45c9-b2fe-988ef7ff6f26",
      "name": "Send a text message29",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6ec5bccf-438b-4d68-8947-62e86d961fc3",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3808,
        15392
      ],
      "id": "e7697178-e54e-44c1-a2ce-4b7d3c52902a",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "74aab308-0919-4efd-b14d-4c702a1df543"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "df6b2b69-9f3c-4db6-ba69-cf31f436ee23",
                    "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        3024,
        15888
      ],
      "id": "0d91dfb7-dba7-42cc-8d19-5c94570fdc9c",
      "name": "Switch11"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^([01]\\d|2[0-3]):([0-5]\\d)$"
            }
          ]
        }
      },
      "id": "0660b743-a344-4825-b1b3-464c16ecfd2d",
      "name": "Validar formato HH:MM1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        3504,
        16096
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:HH:MM\nEjemplo: 14:20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "eb1a07a3-967c-4514-8e92-70c25341f96a",
      "name": "Telegram Error4",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        4000,
        16176
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Hora actualizada.",
        "additionalFields": {}
      },
      "id": "9b53f8ef-6478-496d-b9a7-398039699e50",
      "name": "Telegram OK13",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        5264,
        15984
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_cita": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "fecha": "={{ $('Update row in sheet23').item.json.datos_parciales_2 }}",
            "hora": "={{ $json.hora }}",
            "nombre": "={{ $json.nombre }}",
            "motivo": "={{ $json.motivo }}",
            "canal": "={{ $json.canal }}",
            "estado": "={{ $json.estado }}",
            "creado_por": "={{ $json.creado_por }}",
            "timestamp_creacion": "={{ $json.timestamp_creacion }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4480,
        15552
      ],
      "id": "0bea7abb-f324-4024-ab2a-47d3492902e6",
      "name": "Update row in sheet33",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_EDIT",
            "paso_actual": "AGENDA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3984,
        15984
      ],
      "id": "b410c66d-4553-494f-96b7-29e8fb59fe0c",
      "name": "Update row in sheet32",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_cita": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "fecha": "={{ $json.fecha }}",
            "hora": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2 }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4480,
        15984
      ],
      "id": "c9ca182f-1776-4457-99b6-9e75a74406ff",
      "name": "Update row in sheet34",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a039b49-2c5e-4e19-8dc1-35eabd92e9e2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4736,
        15552
      ],
      "id": "c4f23b75-0e4b-4f99-91cd-2b6dc6812323",
      "name": "Edit Fields3"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4992,
        15552
      ],
      "id": "43419c2d-97fe-4845-bbca-24ecb6217b24",
      "name": "Update row in sheet35",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a039b49-2c5e-4e19-8dc1-35eabd92e9e2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4736,
        15984
      ],
      "id": "096f59fe-6a47-451c-b3db-f5e8524f63c5",
      "name": "Edit Fields4"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4992,
        15984
      ],
      "id": "e1038017-cd05-4cbb-918f-ebdc7217d556",
      "name": "Update row in sheet36",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5456,
        15552
      ],
      "id": "bcd83969-7dc3-40e9-909f-78cfae616c48",
      "name": "Send a text message30",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5488,
        15984
      ],
      "id": "5020ad66-387e-477f-ae3f-eace25f85ad5",
      "name": "Send a text message31",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9825738e-fa38-494e-9dec-f8d4c8bff8d2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2672,
        11136
      ],
      "id": "ce4bf3b6-1e0b-47d1-8795-1a676d54e8bf",
      "name": "Edit Fields5"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4224,
        15984
      ],
      "id": "1257e056-4df9-4f95-846b-e31d056f428d",
      "name": "Get row(s) in sheet17",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4240,
        15552
      ],
      "id": "f7a8ad19-2f74-43c7-aeb2-4f8636d066ff",
      "name": "Get row(s) in sheet18",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la cita que deseas eliminar.\nEjemplo: CITA-003\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4576,
        11152
      ],
      "id": "10288eb7-97fc-40e0-9bf2-790c46192171",
      "name": "Send a text message32",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4784,
        11152
      ],
      "id": "bbf06ed1-a827-4272-b27a-a546eb4b81c2",
      "name": "Update row in sheet37",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2608,
        16544
      ],
      "id": "d644d0f9-678e-4048-9877-bf56bd05ad0a",
      "name": "Get row(s) in sheet19",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst citas = items.map(i => i.json);\n\nconst cita = citas.find(c => c.id_cita === idIngresado);\n\nif (!cita) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una cita con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (cita.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar citas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_cita: cita.id_cita,\n    rowNumber: cita.rowNumber,\n    estado_actual: cita.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2848,
        16544
      ],
      "id": "8a221ffd-862b-409a-a7e4-803495ba15e2",
      "name": "Code in JavaScript4"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        3056,
        16544
      ],
      "id": "9c90f081-6f58-4b2e-ade8-4ca91ffddb4b",
      "name": "If5"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "AGENDA_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE2"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3472,
        16608
      ],
      "id": "6e66f078-f4be-4be9-b32f-01e90feef1c4",
      "name": "Update row in sheet38",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2208,
        16896
      ],
      "id": "df0c4793-ee34-44ac-9787-6d87b81aaa8c",
      "name": "If6"
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript4').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3472,
        16400
      ],
      "id": "20b3598d-4c81-455b-bd5b-b56686f13771",
      "name": "Send a text message33",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3712,
        16608
      ],
      "id": "204c198a-52fe-4648-98d0-f4c1b0615ca9",
      "name": "Send a text message34",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3488,
        17120
      ],
      "id": "05220dd6-6ab7-4a30-9632-2dcabaa14c0f",
      "name": "Delete rows or columns from sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2752,
        17264
      ],
      "id": "16198256-9826-48d4-aeef-985242ecd742",
      "name": "If7"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3264,
        17120
      ],
      "id": "fe18388f-420c-4c91-bfee-f5b5d640c695",
      "name": "Get row(s) in sheet20",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3024,
        17120
      ],
      "id": "e97dd43a-0ceb-49f2-9337-f9baeb1a80e7",
      "name": "Get row(s) in sheet21",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Registro eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4080,
        17120
      ],
      "id": "0a34edee-d875-4e3f-8666-825df7deeb4a",
      "name": "Send a text message35",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4288,
        17120
      ],
      "id": "e77e0c44-e15d-40be-a9b4-b123eb5bd853",
      "name": "Send a text message36",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3008,
        17392
      ],
      "id": "94a50298-73e7-4582-a563-96e8bb2bde00",
      "name": "Send a text message37",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3696,
        17392
      ],
      "id": "63fd2517-bfdd-41cd-9154-8e73bf2fbbf5",
      "name": "Send a text message38",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3888,
        17120
      ],
      "id": "97e56346-70e7-412d-aca9-d04147e09a8c",
      "name": "Update row in sheet39",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3696,
        17120
      ],
      "id": "0935bfa0-277d-45a0-900f-05a27c11437b",
      "name": "Edit Fields6"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3456,
        17392
      ],
      "id": "53d95531-6e3d-47d7-9b8d-a515ff403715",
      "name": "Update row in sheet40",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3264,
        17392
      ],
      "id": "f208cf34-a400-4036-baac-7e1f0df2ae41",
      "name": "Edit Fields7"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "AGENDA_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        4768,
        11328
      ],
      "id": "0135a077-3f89-4a86-9d84-5989443537d1",
      "name": "Update row in sheet41",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        2160,
        18016
      ],
      "id": "8cfc9257-0f5f-45c0-9dc6-a9475aa35a19",
      "name": "If8"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "estado",
              "lookupValue": "Pendiente"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2688,
        17840
      ],
      "id": "d84f530a-fea0-4df5-8b4f-1d2a1fa24225",
      "name": "Get row(s) in sheet22",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst citas = items.map(i => i.json);\n\nconst cita = citas.find(c => c.id_cita === idIngresado);\n\nif (!cita) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una cita con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (cita.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar citas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_cita: cita.id_cita,\n    rowNumber: cita.rowNumber,\n    estado_actual: cita.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2928,
        17840
      ],
      "id": "4db3e8aa-73a5-471e-9111-70eabf7285ec",
      "name": "Code in JavaScript5"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        3136,
        17840
      ],
      "id": "5ddc17ef-1732-4315-b5f3-0c61c2674117",
      "name": "If9"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "AGENDA_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3552,
        17904
      ],
      "id": "3c86a1f9-4c7c-40d3-ba3f-0c3edd5b5660",
      "name": "Update row in sheet42",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript5').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3552,
        17696
      ],
      "id": "50f5429a-dbc1-413d-bd5a-fd53f549e916",
      "name": "Send a text message40",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3792,
        17904
      ],
      "id": "a65754e4-3805-4c91-acea-cf4e71736b58",
      "name": "Send a text message41",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_cita",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2736,
        18192
      ],
      "id": "42d0a186-d201-46aa-9cb3-9995c4311cad",
      "name": "Get row(s) in sheet23",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3744,
        18192
      ],
      "id": "3703b5d9-479b-4e4e-8e13-a41b00c76f10",
      "name": "Send a text message42",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3952,
        18192
      ],
      "id": "26757ff5-2641-4bde-a786-9b8b9eb52b4d",
      "name": "Send a text message43",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3552,
        18192
      ],
      "id": "9d8e9476-7333-4a35-8422-5a4217bd95ec",
      "name": "Update row in sheet43",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3360,
        18192
      ],
      "id": "c55a1a73-bebe-4703-ba3c-a518a5789943",
      "name": "Edit Fields8"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la cita que deseas completar.\nEjemplo: CITA-003\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        4560,
        11328
      ],
      "id": "79e7331c-d4ef-43c5-8248-c1e167a7dfd8",
      "name": "Send a text message39",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "CITAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_cita": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "estado": "Completada",
            "fecha": "={{ $json.fecha }}",
            "hora": "={{ $json.hora }}",
            "nombre": "={{ $json.nombre }}",
            "motivo": "={{ $json.motivo }}",
            "canal": "={{ $json.canal }}",
            "creado_por": "={{ $json.creado_por }}",
            "timestamp_creacion": "={{ $json.timestamp_creacion }}"
          },
          "matchingColumns": [
            "id_cita"
          ],
          "schema": [
            {
              "id": "id_cita",
              "displayName": "id_cita",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "fecha",
              "displayName": "fecha",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora",
              "displayName": "hora",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "motivo",
              "displayName": "motivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "canal",
              "displayName": "canal",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_creacion",
              "displayName": "timestamp_creacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3056,
        18192
      ],
      "id": "7c007c97-2533-47de-a034-fb7de5506cd5",
      "name": "Update row in sheet44",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "30a49837-b923-41ce-88cb-942693e24e67",
              "leftValue": "={{ $json.valido }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        6160,
        11152
      ],
      "id": "479a57aa-5792-4679-bba9-3047e1096488",
      "name": "If10"
    },
    {
      "parameters": {
        "jsCode": "const fechaIngresada = new Date($('Telegram Trigger').first().json.message.text);\nconst hoy = new Date();\n\n\nfechaIngresada.setHours(0,0,0,0);\nhoy.setHours(0,0,0,0);\n\nif (fechaIngresada < hoy) {\n  return [{\n    json: {\n      valido: false,\n      error: 'No puedes agendar citas en fechas pasadas'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    valido: true,\n    fecha: $json.fecha\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        6000,
        11152
      ],
      "id": "49b018b2-0cdb-4f93-be9a-935878b03ddc",
      "name": "Code in JavaScript9"
    },
    {
      "parameters": {
        "chatId": "={{ $node['Telegram Trigger'].json.message.chat.id }}",
        "text": "Formato invalido, no puedes agendar citas en el pasado. Int√©ntalo de nuevo o escribe 9 para salir",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6416,
        11248
      ],
      "id": "ff8f9267-2d8e-4283-a418-2bc7fadc7ccc",
      "name": "Send a text message19",
      "webhookId": "48a8ad57-682c-4bfe-b1e6-51ce21ca9c17",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        7968,
        11984
      ],
      "id": "d734c46f-ca86-4d9a-845a-12ba2c957cef",
      "name": "If1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c0f971a3-78c3-47f7-bd13-0ccf2ee00f7a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b974eb1-a693-4df3-989d-f7de83649604",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "bcb58231-fbde-4cbf-a34e-0210b6ce55d1",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "5",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 4, 5, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        8160,
        10944
      ],
      "id": "1a1e2de4-d1fa-47f7-97fb-e8dbf8a37bfd",
      "name": "Switch6"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu tarea.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la tarea?\n\nEjemplo: Estudiar para un examen\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        8368,
        10448
      ],
      "id": "e8e5da5d-b089-4869-99dd-0d14506a5d40",
      "name": "Send a text message15",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ tareas\nOpciones disponibles: 1 al 5 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        8384,
        11440
      ],
      "id": "dd9db607-4900-4d8f-beb8-4fc4f0ad9326",
      "name": "Send a text message16",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu tarea.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva tarea\n2. Consultar tus tareas\n3. Reprogramar una tarea\n4. Cancelar una tarea\n5. Marcar una tarea como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        8592,
        11440
      ],
      "id": "fc5325b5-907f-4dd2-a431-ad1d4a9a90e3",
      "name": "Send a text message17",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "1",
            "datos_parciales_1": "=",
            "timestamp_ultima_interaccion": "{{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        8560,
        10448
      ],
      "id": "988d84ae-fb4d-4f25-9bf5-8852e9701b78",
      "name": "Update row in sheet22",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const tareas = items.map(i => i.json);\n\nconst pendientes = tareas.filter(t => t.estado === 'Pendiente');\nconst completadas = tareas.filter(t => t.estado === 'Completada');\n\nlet mensaje = 'üìã *Resumen de tareas*\\n\\n';\n\nif (pendientes.length === 0 && completadas.length === 0) {\n  mensaje += 'No tienes tareas registradas.';\n} else {\n  if (pendientes.length > 0) {\n    mensaje += 'üìÖ *Tareas pendientes*\\n\\n';\n    pendientes.forEach((tarea, index) => {\n      mensaje +=\n        `${index + 1}. *${tarea.id_tarea}*\\n` +\n        `${tarea.titulo}\\n` +\n        `${tarea.prioridad}\\n` +\n        `${tarea.fecha_objetivo}\\n\\n`;\n    });\n  } else {\n    mensaje += 'üìÖ *Tareas pendientes*\\n\\nNo tienes tareas pendientes.\\n\\n';\n  }\n\n  if (completadas.length > 0) {\n    mensaje += '‚úÖ *Tareas completadas*\\n\\n';\n    completadas.forEach((tarea, index) => {\n      mensaje +=\n        `${index + 1}. *${tarea.id_tarea}*\\n` +\n        `${tarea.titulo}\\n` +\n        `${tarea.prioridad}\\n` +\n        `${tarea.fecha_objetivo}\\n\\n`;\n    });\n  }\n}\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        8608,
        10672
      ],
      "id": "8cae1fac-f30b-461d-9871-fb8ba8aaa120",
      "name": "Code in JavaScript6"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9040,
        10672
      ],
      "id": "ac38ec9f-5574-431e-b6fe-6621f88ad90c",
      "name": "Update row in sheet17",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "content": "Perfecto, vamos con tu tarea.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva tarea\n2. Consultar tus tareas\n3. Reprogramar una tarea\n4. Cancelar una tarea\n5. Marcar una tarea como completada\n9. Volver al men√∫ principal",
        "height": 256,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        7792,
        10720
      ],
      "typeVersion": 1,
      "id": "a0701c2c-6ee9-42ef-a294-84358dbfe0ba",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        8368,
        10672
      ],
      "id": "a6f72eed-952b-4b86-993e-08b140c0b43e",
      "name": "Get row(s) in sheet26",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        8832,
        10672
      ],
      "id": "7619032b-fc78-41ff-b38a-060d4f658863",
      "name": "Send a text message46",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la tarea que deseas reprogramar.\nEjemplo: TAREA-003\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        8368,
        10864
      ],
      "id": "56a455ad-b3a1-4800-bc17-9c6e6cf33905",
      "name": "Send a text message47",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_EDIT"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        8576,
        10864
      ],
      "id": "b8a88f1c-f6f8-4130-8fc7-a6a0ef046b43",
      "name": "Update row in sheet46",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la tarea que deseas eliminar.\nEjemplo: TAREA-001\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        8368,
        11056
      ],
      "id": "d29b7593-2a70-40bb-8436-911bd2e761f8",
      "name": "Send a text message59",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        8576,
        11056
      ],
      "id": "93a58ea6-9577-4567-8481-8eee672ae354",
      "name": "Update row in sheet56",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9b0b7bf2-3274-407a-950e-8392c39aa912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        8784,
        11664
      ],
      "id": "cbfb65c0-b7f5-4fe7-89cb-4225229d4259",
      "name": "Switch7"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 3\n¬øCu√°l es la fecha objetivo de la tarea?\n\nFormato: YYYY-MM-DD\nEjemplo: 2025-12-20\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "8ef446fb-81f3-4bae-8875-795073927639",
      "name": "Telegram OK8",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        9328,
        11520
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no v√°lida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        9808,
        12800
      ],
      "id": "13a7be0c-b05b-4e6c-8f8c-73e36be3916a",
      "name": "Send a text message18",
      "webhookId": "537b6979-63b9-49c5-8610-35f1ef19571a",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e49fdbbd-e95e-42b7-8e48-8b3cb29491bd"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "58855023-5cd0-49ff-8a4e-042adcdf4212",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b8fa012e-27ac-4322-82c7-41c4c9cad1fa",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "40cb23eb-e6be-426c-a651-7940bc7f2264",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        9568,
        12432
      ],
      "id": "929b5f59-6316-4400-8d2d-ebd435d4f175",
      "name": "Switch8"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9808,
        12160
      ],
      "id": "fec79b27-a3b6-42c3-a7bb-28eee7536a2a",
      "name": "Get row(s) in sheet9",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu tarea:\n\nT√≠tulo: {{ $json.datos_parciales_1 }}\nFecha objetivo: {{ $json.datos_parciales_2 }}\nPrioridad: {{ $json.datos_parciales_4 }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "e83added-0eef-4cac-8bfa-707040a2ec8d",
      "name": "Telegram OK9",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        10272,
        12160
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9808,
        12368
      ],
      "id": "66c8812d-0f6b-4b27-858f-a991419e92d6",
      "name": "Get row(s) in sheet10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu tarea:\n\nT√≠tulo: {{ $json.datos_parciales_1 }}\nFecha objetivo: {{ $json.datos_parciales_2 }}\nPrioridad: {{ $json.datos_parciales_4 }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "b3f7c87d-47f7-4e6c-961d-0b40d718742e",
      "name": "Telegram OK10",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        10272,
        12368
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9808,
        12576
      ],
      "id": "ee3d7b64-b46a-4666-97ed-4a96f2680871",
      "name": "Get row(s) in sheet11",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu tarea:\n\nT√≠tulo: {{ $json.datos_parciales_1 }}\nFecha objetivo: {{ $json.datos_parciales_2 }}\nPrioridad: {{ $json.datos_parciales_4 }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "3ef87fb3-f47e-4e10-868f-ea9ea77ce7c1",
      "name": "Telegram OK11",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        10272,
        12576
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "16ab84e4-1f99-4036-91fd-7ac9f1f22a50",
      "name": "Validar formato YYYY-MM-DD1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        9280,
        11824
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2025-12-20\nIntenta nuevamente.",
        "additionalFields": {}
      },
      "id": "1dda8a4c-f4c1-4bad-8526-b368908521a9",
      "name": "Telegram Error2",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        9616,
        11968
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10096,
        11536
      ],
      "id": "bf82bead-1b40-4aff-a3c0-1fd6f5347be0",
      "name": "Get row(s) in sheet12",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 3\n¬øCu√°l es la prioridad de la tarea?\n\n1. Baja\n2. Media\n3. Alta\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "69adad7f-4100-4eaf-866f-f7c914a48214",
      "name": "Telegram OK12",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        10560,
        11536
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_3": "=",
            "datos_parciales_4": "=",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10320,
        11536
      ],
      "id": "84e871c1-bb53-44c1-bec5-3322ab377b8b",
      "name": "Update row in sheet24",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_2": "=",
            "datos_parciales_3": "=",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9104,
        11520
      ],
      "id": "de2d0e81-78c0-4088-bb6d-d491fa2c090f",
      "name": "Update row in sheet25",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_4": "=Baja",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10032,
        12160
      ],
      "id": "7bd4b813-581e-4e12-a41b-8e1228ea66cf",
      "name": "Update row in sheet26",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_4": "=Media",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10032,
        12368
      ],
      "id": "3812798b-c70d-4c54-996d-722600936fc2",
      "name": "Update row in sheet27",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_4": "=Alta",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10032,
        12576
      ],
      "id": "4ffd286e-ebd5-4cbe-aa57-3119b86e9f22",
      "name": "Update row in sheet28",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "2149ed1c-6fc1-4214-9bb6-9d73396df7e2"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c3020235-3026-4758-ba53-3259646bba63",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "81655df1-f7a4-4730-bcb6-91267c74645f",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        9136,
        13040
      ],
      "id": "7fe44cbc-595d-4af8-9a04-ee7a1e2084ca",
      "name": "Switch9"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9440,
        13440
      ],
      "id": "c49b0371-2ff5-4c96-ae7f-448a530eff5c",
      "name": "Update row in sheet18",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Cancelado",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        9696,
        13440
      ],
      "id": "bea22a92-4e51-45a3-b471-69ec3f0cc27f",
      "name": "Send a text message20",
      "webhookId": "dc8a9a45-0711-45a4-829a-7ab666828377",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREAS",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9456,
        13248
      ],
      "id": "e343fd89-8f24-4ec5-adc2-67fb02a8fce9",
      "name": "Update row in sheet19",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu tarea.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la tarea?\n\nEjemplo: Estudiar para un examen\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        9712,
        13248
      ],
      "id": "3bff4a1d-7d82-48cb-a9ce-36e6798422e9",
      "name": "Send a text message21",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "titulo": "={{ $('Get row(s) in sheet24').item.json.datos_parciales_1 }}",
            "fecha_objetivo": "={{ $('Get row(s) in sheet24').item.json.datos_parciales_2 }}",
            "prioridad": "={{ $('Get row(s) in sheet24').item.json.datos_parciales_4 }}",
            "creado_por": "={{ $('Get row(s) in sheet24').item.json.telegram_user }}",
            "id_tarea": "={{ $('Code in JavaScript7').item.json.id_tarea }}",
            "estado": "={{ $json.estado }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10352,
        13056
      ],
      "id": "4b6ae5b6-064d-4f8b-b866-d5da852f64e6",
      "name": "Append row in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9904,
        13056
      ],
      "id": "21e53ff8-e46f-47db-98f1-4d8402c75dbf",
      "name": "Get row(s) in sheet24",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript7').item.json.chatId }}",
        "text": "Tarea completada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10576,
        13056
      ],
      "id": "b64cd93c-c025-48db-8982-509cddc5f7ff",
      "name": "Send a text message44",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10960,
        13056
      ],
      "id": "fb64c94d-cf1a-47fd-b689-6fc50cc5afca",
      "name": "Update row in sheet45",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9456,
        13056
      ],
      "id": "fff91c34-7fd9-43e9-9a77-8e0255bd54c2",
      "name": "Get row(s) in sheet25",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Extraer n√∫meros v√°lidos de id_tarea\nconst numeros = rows\n  .map(r => r.json.id_tarea)\n  .filter(id => typeof id === 'string' && /^TAREA-\\d+$/.test(id))\n  .map(id => parseInt(id.split('-')[1], 10));\n\n// Si no hay tareas v√°lidas, iniciar en 001\nconst nextNumber = numeros.length > 0\n  ? Math.max(...numeros) + 1\n  : 1;\n\n// Formato final\nconst newId = `TAREA-${String(nextNumber).padStart(3, '0')}`;\n\nreturn [{\n  json: {\n    id_tarea: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        9664,
        13056
      ],
      "id": "3e8a2ce9-c998-406b-9be3-018b04750dd0",
      "name": "Code in JavaScript7"
    },
    {
      "parameters": {
        "jsCode": "\nconst fecha = $input.first().json.datos_parciales_2; // YYYY-MM-DD\n\nif (!fecha) {\n  return [{\n    json: {\n      estado: 'Pendiente'\n    }\n  }];\n}\n\nconst fechaTarea = new Date(`${fecha}`);\n\nconst ahora = new Date();\n\nconst estado = fechaTarea < ahora ? 'Completada' : 'Pendiente';\n\n\nreturn [{\n  json: {\n    estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        10128,
        13056
      ],
      "id": "4abe7692-9df6-4861-a6b0-5c38ff4a6acb",
      "name": "Code in JavaScript8"
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript7').item.json.chatId }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        11184,
        13056
      ],
      "id": "67f44af6-cb7d-4d57-873f-e732512f0404",
      "name": "Send a text message45",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        10768,
        13056
      ],
      "id": "a92adc2c-16b9-4192-a61c-7b3fad91856e",
      "name": "Edit Fields9"
    },
    {
      "parameters": {
        "content": "### TAREAS",
        "height": 80,
        "width": 150,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        8688,
        13936
      ],
      "typeVersion": 1,
      "id": "dc31f468-9f5f-4aa1-833f-74ddfa13ead8",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        12144,
        12112
      ],
      "id": "c66455de-9ac3-4fd0-bc9b-88b0e255d82a",
      "name": "If17"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "cb928993-c3f9-4429-8a0c-c8cec06d5e9e",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 4, 5, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        12464,
        11680
      ],
      "id": "d511ae2c-75a9-40ec-b896-5ffbfe39d3f2",
      "name": "Switch13"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ agenda\nOpciones disponibles: 1 al 2 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        12928,
        11872
      ],
      "id": "2e5f62f3-8586-4fad-8973-f4c8a3d9aeb6",
      "name": "Send a text message60",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu agenda.\n\n¬øQu√© deseas hacer?\n\n1. Agendar una nueva cita\n2. Consultar tu agenda\n3. Reprogramar una cita\n4. Cancelar una cita\n5. Marcar una cita como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        13184,
        11872
      ],
      "id": "dacdbe27-b854-42d1-bdfe-c545204b0791",
      "name": "Send a text message61",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3280,
        12208
      ],
      "id": "b8de52da-27d2-40d2-9885-4b5bde6eb683",
      "name": "Send a text message62",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3280,
        12064
      ],
      "id": "c25ed443-49ce-4813-afad-5949fa489de8",
      "name": "Send a text message63",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=üöß Esta opci√≥n a√∫n no est√° disponible. Estar√° disponible en pr√≥ximas actualizaciones.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3280,
        11904
      ],
      "id": "419263c3-cbe2-4313-9f99-9ccb15029268",
      "name": "Send a text message64",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu habito.\n\n¬øQu√© deseas hacer?\n\n1. Agregar un nuevo habito\n2. Eliminar un habito\n3. Activar/Desactivar habito\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3168,
        11488
      ],
      "id": "afca4e79-2a7f-43ea-a9aa-851ac4dd9575",
      "name": "Send a text message65",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "retryOnFail": true,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "HABITOS"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3376,
        11488
      ],
      "id": "f4cabf89-5cc3-4906-89d6-1c1f4ec4bb0f",
      "name": "Update row in sheet57",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu lista.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva lista\n2. Consultar tus listas\n3. Eliminar una lista\n4. Marcar una lista como completada\n9. Volver al men√∫ principal",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3168,
        11696
      ],
      "id": "cecc8387-a2aa-424d-81f7-fb8c6b88b41b",
      "name": "Send a text message66",
      "webhookId": "84039a37-245c-4461-a82d-5c2373f91715",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu habito.\n\nPaso 1 de 3\n¬øCu√°l es el nombre del habito?\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        12864,
        11328
      ],
      "id": "5f315e02-9874-4f6e-8576-c427b4ae1170",
      "name": "Send a text message67",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITOS",
            "paso_actual": "1",
            "datos_parciales_1": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13120,
        11328
      ],
      "id": "c0c1080d-f0c3-47fa-a7c2-3eb6ac7b62f2",
      "name": "Update row in sheet58",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID del habito que deseas eliminar. (Para consultar los habitos vaya a la seccion de 'Recordatorios')\nEjemplo: HABI-001\n\n9) Cancelar\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        12864,
        11520
      ],
      "id": "bcb0fb34-8ba9-4a33-960e-60cea55d45c4",
      "name": "Send a text message68",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITO_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13072,
        11520
      ],
      "id": "14814e91-5af3-48e8-bdac-2f3acbaf0261",
      "name": "Update row in sheet59",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITO_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13088,
        11696
      ],
      "id": "d5406dc4-0783-424d-b6b4-50481039a2a8",
      "name": "Update row in sheet60",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID del habito que deseas desactivar. (Para consultar los habitos vaya a la seccion de 'Recordatorios')\n\nEjemplo: HABI-001\n\n9) Cancelar\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        12880,
        11696
      ],
      "id": "5ff6d439-35c0-4cd6-9fc3-753ee975f96e",
      "name": "Send a text message69",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        12656,
        12320
      ],
      "id": "9b0867ad-301d-4b1a-bc89-5e57674b01e2",
      "name": "Switch14"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 3\n¬øCon qu√© frecuencia haces este habito??\n\nEjemplo: Diario\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "553af43b-40cb-4cd5-9a1a-ec0e05c955d9",
      "name": "Telegram OK15",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        13376,
        12112
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITOS",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13120,
        12112
      ],
      "id": "08bb1e28-c064-4bfe-8378-60ff9d6600c9",
      "name": "Update row in sheet61",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "HABITOS",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13376,
        12288
      ],
      "id": "2cd380a4-f4bd-4b67-b48e-a77fedb4b151",
      "name": "Update row in sheet62",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13120,
        12288
      ],
      "id": "34ea08c9-5916-43b9-8222-c4e5dd725a3d",
      "name": "Get row(s) in sheet13",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 3\n¬øA qu√© hora te debemos recordar este habito?\n\nEjemplo: 12:20\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "988831c6-cd5a-4f41-b139-903237038f92",
      "name": "Telegram OK16",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        13616,
        12288
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text.trim() }}",
              "operation": "regex",
              "value2": "^([01]\\d|2[0-3]):([0-5]\\d)$"
            }
          ]
        }
      },
      "id": "37f9bff3-4468-4a96-9c9e-c71602afe4f3",
      "name": "Validar formato HH:MM2",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        13136,
        12592
      ]
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13952,
        12512
      ],
      "id": "0aaa55aa-e042-4b4b-bc44-91ec40a51527",
      "name": "Get row(s) in sheet33",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_habito": "={{ $('Code in JavaScript12').item.json.id_habito }}",
            "nombre": "={{ $json.datos_parciales_1 }}",
            "frecuencia": "={{ $json.datos_parciales_2 }}",
            "hora_recordatorio": "={{ $node[\"Telegram Trigger\"].json.message.text }}\n",
            "estado": "Activo"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_habito",
              "displayName": "id_habito",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "frecuencia",
              "displayName": "frecuencia",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora_recordatorio",
              "displayName": "hora_recordatorio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14224,
        12512
      ],
      "id": "1e961bed-73ac-436d-af4a-8b076b98b038",
      "name": "Append row in sheet1",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}\n",
        "text": "Habito registrado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14544,
        12512
      ],
      "id": "8fd16efb-2115-4e63-819f-9163fa5de13a",
      "name": "Send a text message70",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        15104,
        12512
      ],
      "id": "89060bff-0c2b-4513-913f-dfeb348dddcc",
      "name": "Update row in sheet63",
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13472,
        12512
      ],
      "id": "a1f31fc3-685c-4dcb-bc01-ff6450439a59",
      "name": "Get row(s) in sheet34",
      "alwaysOutputData": true,
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\n\n// Extraer IDs v√°lidos\nconst ids = rows\n  .map(r => r.json.id_habito)\n  .filter(id => typeof id === 'string' && /^HABI-\\d+$/.test(id));\n\n// Si no hay IDs v√°lidos, iniciar contador\nif (ids.length === 0) {\n  return [{\n    json: {\n      id_habito: 'HABI-001'\n    }\n  }];\n}\n\n// Ordenar por n√∫mero\nids.sort((a, b) => {\n  const numA = parseInt(a.split('-')[1], 10);\n  const numB = parseInt(b.split('-')[1], 10);\n  return numA - numB;\n});\n\nconst lastId = ids[ids.length - 1];\nconst lastNumber = parseInt(lastId.split('-')[1], 10);\nconst newNumber = lastNumber + 1;\n\n// Formato final\nconst newId = `HABI-${String(newNumber).padStart(3, '0')}`;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    id_habito: newId,\n    chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        13712,
        12512
      ],
      "id": "869c0bc4-26fa-4ff7-83b6-44b03744ed3a",
      "name": "Code in JavaScript12",
      "executeOnce": false,
      "retryOnFail": true
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        15360,
        12512
      ],
      "id": "09824f21-0f58-452d-9d34-776bb314e52d",
      "name": "Send a text message71",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "executeOnce": true,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        14848,
        12512
      ],
      "id": "f0c33fcc-c7a6-482e-accf-1482ffbc8cb9",
      "name": "Edit Fields1",
      "executeOnce": true
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Formato de hora incorrecto, intente de nuevo.\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "292059c4-68c6-42c7-9f08-0d6163bddd2c",
      "name": "Telegram OK17",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        13472,
        12736
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        12640,
        13280
      ],
      "id": "09a5b817-80b5-4e67-9bb6-88affe44e6db",
      "name": "Get row(s) in sheet35",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst habitos = items.map(i => i.json);\n\nconst habito = habitos.find(h => h.id_habito === idIngresado);\n\nif (!habito) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ un habito con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\n\nreturn [{\n  json: {\n    id_habito: habito.id_habito,\n    rowNumber: habito.rowNumber,\n\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        12880,
        13280
      ],
      "id": "a28725ee-47f7-4f87-a989-4a3a23be1173",
      "name": "Code in JavaScript13"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        13088,
        13280
      ],
      "id": "590b70e2-d9b8-4a21-9fe0-d24e14bfdf70",
      "name": "If18"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "HABITO_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE3"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13504,
        13344
      ],
      "id": "215dcb28-a59d-4624-aafd-079be2d1c809",
      "name": "Update row in sheet64",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        12240,
        13632
      ],
      "id": "f357cc12-c5c2-43f1-a9cd-5a548e6851c8",
      "name": "If19"
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript13').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        13504,
        13136
      ],
      "id": "ab4358aa-950b-4c94-bfd4-c9ead45bdb54",
      "name": "Send a text message72",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar el habito con ID {{$json.datos_parciales_1}}?\n\n1) Si\n9) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        13744,
        13344
      ],
      "id": "288028eb-22ca-4637-a641-ec63402392d5",
      "name": "Send a text message73",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13744,
        13712
      ],
      "id": "5e0f370a-be74-4773-ba87-c7ff589756ad",
      "name": "Delete rows or columns from sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        13008,
        13856
      ],
      "id": "f88cdf2e-22fb-498d-b49c-e80652c314c6",
      "name": "If20"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13520,
        13712
      ],
      "id": "a70faff3-ce67-4437-8c6a-d31830d02456",
      "name": "Get row(s) in sheet36",
      "retryOnFail": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13280,
        13712
      ],
      "id": "6d9bec6c-841a-489b-b10a-fdae29ab3214",
      "name": "Get row(s) in sheet37",
      "retryOnFail": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Habito eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14336,
        13712
      ],
      "id": "76cfce73-909f-445b-ba3d-e8fca3888231",
      "name": "Send a text message74",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14544,
        13712
      ],
      "id": "4d63f6a9-be87-45c3-935d-eeadb17af2e9",
      "name": "Send a text message75",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        13264,
        13984
      ],
      "id": "91ccaf12-0128-46fd-9dfc-efdc83719e96",
      "name": "Send a text message76",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        13952,
        13984
      ],
      "id": "3ffec183-2661-4a82-a704-22f24ef064a2",
      "name": "Send a text message77",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14144,
        13712
      ],
      "id": "9f535486-c214-433e-a8c7-976456f0aff5",
      "name": "Update row in sheet65",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        13952,
        13712
      ],
      "id": "f05bd4e8-8f37-42b6-98a6-8711821801f1",
      "name": "Edit Fields14"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13712,
        13984
      ],
      "id": "edd5791b-0332-44a1-bf64-82e5a16800ec",
      "name": "Update row in sheet66",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        13520,
        13984
      ],
      "id": "3da4891c-ccae-4d79-9047-988583f14345",
      "name": "Edit Fields15"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        12288,
        14864
      ],
      "id": "396ad4d0-dc01-4d65-804e-6af8de09e9f5",
      "name": "If21"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "estado",
              "lookupValue": "Activo"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        12816,
        14688
      ],
      "id": "9a7848de-d093-4434-bb48-44993d1156e3",
      "name": "Get row(s) in sheet38",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst habitos = items.map(i => i.json);\n\nconst habito = habitos.find(c => c.id_habito === idIngresado);\n\nif (!habito) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ un habito con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_habito: habito.id_habito,\n    rowNumber: habito.rowNumber,\n    estado_actual: habito.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        13056,
        14688
      ],
      "id": "48e0ea99-f549-4b59-947e-dec6d209518c",
      "name": "Code in JavaScript14"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        13264,
        14688
      ],
      "id": "0706ad1a-32ed-43cb-abaa-3dee67474a4d",
      "name": "If22"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "HABITO_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13680,
        14752
      ],
      "id": "97fdf0c3-16cd-4b61-ae76-21e5fa4c7cf0",
      "name": "Update row in sheet67",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript14').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        13680,
        14544
      ],
      "id": "68bb0a10-2181-43c6-97e5-517477850eef",
      "name": "Send a text message78",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la cita con ID {{$json.datos_parciales_1}}?\n\n1) Si\n9) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        13920,
        14752
      ],
      "id": "6a9e97f4-bd99-4772-8d3a-0057733c7878",
      "name": "Send a text message79",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        12816,
        15200
      ],
      "id": "04c86308-38fe-42da-95aa-65e8eeaf1664",
      "name": "Get row(s) in sheet39",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14304,
        14992
      ],
      "id": "f76458b6-f005-4904-9b77-7b7c0d7849e1",
      "name": "Send a text message80",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14512,
        14992
      ],
      "id": "3c81b856-f74f-4080-8fe0-2a2e11fa34ac",
      "name": "Send a text message81",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14112,
        14992
      ],
      "id": "3ad4e00d-efb2-48c0-b6ad-251ceee85834",
      "name": "Update row in sheet68",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        13920,
        14992
      ],
      "id": "ef931f4f-403e-4cc2-8940-d6641208e90f",
      "name": "Edit Fields16"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_habito": "={{ $json.id_habito }}",
            "nombre": "={{ $json.nombre }}",
            "frecuencia": "={{ $json.frecuencia }}",
            "hora_recordatorio": "={{ $json.hora_recordatorio }}",
            "estado": "Inactivo"
          },
          "matchingColumns": [
            "id_habito"
          ],
          "schema": [
            {
              "id": "id_habito",
              "displayName": "id_habito",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "frecuencia",
              "displayName": "frecuencia",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora_recordatorio",
              "displayName": "hora_recordatorio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13696,
        14992
      ],
      "id": "ee2c86c8-dade-456d-a19e-d74c92be28ef",
      "name": "Update row in sheet69",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "3e492c08-c151-422d-8f5c-958b613ed0e3",
              "leftValue": "={{ $json.estado }}",
              "rightValue": "Activo",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        13104,
        15200
      ],
      "id": "263f9c0d-7f2a-4f7f-a627-8b018fc2deea",
      "name": "If23"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13472,
        14992
      ],
      "id": "534e8967-9605-446e-94b5-edf5485d9866",
      "name": "Get row(s) in sheet40",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14304,
        15312
      ],
      "id": "8f1f0ffb-7e0a-430e-9c3b-f08a96c806ea",
      "name": "Send a text message82",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        14512,
        15312
      ],
      "id": "0307353c-b8e7-42b7-8dd3-7cc2e2b47c4d",
      "name": "Send a text message83",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        14112,
        15312
      ],
      "id": "6fd0cb05-bdd4-4d53-837a-5277fa21ddc1",
      "name": "Update row in sheet70",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        13920,
        15312
      ],
      "id": "ebd62227-6b1f-4576-bbc8-b58b69f525fb",
      "name": "Edit Fields17"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_habito",
              "lookupValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13472,
        15312
      ],
      "id": "07b1c70b-8d31-4d7e-8534-eeff5e490c34",
      "name": "Get row(s) in sheet41",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_habito": "={{ $json.id_habito }}",
            "estado": "Activo",
            "nombre": "={{ $json.nombre }}",
            "frecuencia": "={{ $json.frecuencia }}",
            "hora_recordatorio": "={{ $json.hora_recordatorio }}"
          },
          "matchingColumns": [
            "id_habito"
          ],
          "schema": [
            {
              "id": "id_habito",
              "displayName": "id_habito",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "nombre",
              "displayName": "nombre",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "frecuencia",
              "displayName": "frecuencia",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "hora_recordatorio",
              "displayName": "hora_recordatorio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        13712,
        15312
      ],
      "id": "ed69105e-9977-4551-abca-3ba528a6666f",
      "name": "Update row in sheet71",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1367136760,
          "mode": "list",
          "cachedResultName": "HABITOS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1367136760"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3168,
        11296
      ],
      "id": "597df768-dbe1-418d-a408-01e1adce9ef5",
      "name": "Get row(s) in sheet42",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "\nconst recordatorios = items\n  .map(i => i.json)\n  .filter(habito => habito.estado === 'Activo');\n\nif (recordatorios.length === 0) {\n  return [{\n    json: {\n      mensaje: 'No tienes habitos activos.'\n    }\n  }];\n}\n\nlet mensaje = '*Recordatorio de tus habitos*\\n\\n';\n\nrecordatorios.forEach((habito, index) => {\n  mensaje +=\n    `${index + 1}. *${habito.id_habito}*\\n` +\n    `${habito.nombre}\\n` +\n    `${habito.frecuencia} ` +\n    `${habito.hora_recordatorio}\\n` +\n    `${habito.estado}\\n\\n`;\n});\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3408,
        11296
      ],
      "id": "6d446268-617a-4b49-a1fd-7ee26aa8c359",
      "name": "Code in JavaScript15"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3616,
        11296
      ],
      "id": "c4803f3f-098e-4634-b2ec-ce561e6010bd",
      "name": "Send a text message84",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3824,
        11296
      ],
      "id": "2b0e51ec-2132-4bf4-95a8-ee04df2b6272",
      "name": "Update row in sheet72",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9296,
        15728
      ],
      "id": "4cbe0f16-426d-4743-a0cc-1244718d2691",
      "name": "Get row(s) in sheet29",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "TAREA_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE2"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10160,
        15792
      ],
      "id": "ef45fb5d-a680-4da6-8398-63c9c16ef080",
      "name": "Update row in sheet50",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript11').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10160,
        15584
      ],
      "id": "bf581beb-ce48-45d5-bb31-c3523bebb94e",
      "name": "Send a text message51",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar la tarea con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10400,
        15792
      ],
      "id": "80b78c32-d247-46b4-82e0-8f7b0c582a24",
      "name": "Send a text message54",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10176,
        16304
      ],
      "id": "5fadca1a-d912-4c64-ad04-c0f2a2b885cd",
      "name": "Delete rows or columns from sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        9440,
        16448
      ],
      "id": "e2fc005b-23bd-4d51-893f-ba71c77222d4",
      "name": "If15"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9952,
        16304
      ],
      "id": "f228e15f-ab2a-41fd-bab7-c742993a3ba1",
      "name": "Get row(s) in sheet31",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9712,
        16304
      ],
      "id": "8df002c8-2022-4593-804c-1e33704a8fa8",
      "name": "Get row(s) in sheet32",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Registro eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10768,
        16304
      ],
      "id": "d444908d-f0fb-4c44-8af1-cae981b0c7c5",
      "name": "Send a text message55",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10976,
        16304
      ],
      "id": "0b42df94-08b8-49c6-a45f-109ef55bf532",
      "name": "Send a text message56",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        9696,
        16576
      ],
      "id": "548e98f8-bf2b-4902-b323-a5602b99acdc",
      "name": "Send a text message57",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10384,
        16576
      ],
      "id": "77db932b-d325-4fe4-a601-75215f03f0c4",
      "name": "Send a text message58",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10576,
        16304
      ],
      "id": "403b16d3-da57-4ee9-a192-168e9c730f76",
      "name": "Update row in sheet53",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        10384,
        16304
      ],
      "id": "9f61b25c-671e-4ecf-a292-d29a5d9934bc",
      "name": "Edit Fields12"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10144,
        16576
      ],
      "id": "c1ad701b-dba8-4804-8050-2c98a50dde2e",
      "name": "Update row in sheet54",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        9936,
        16576
      ],
      "id": "49216b9f-e6c4-40a7-be06-7866552e5f02",
      "name": "Edit Fields13"
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst tareas = items.map(i => i.json);\n\nconst tarea = tareas.find(c => c.id_tarea === idIngresado);\n\nif (!tarea) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una tarea con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (tarea.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar tareas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_tarea: tarea.id_tarea,\n    rowNumber: tarea.rowNumber,\n    estado_actual: tarea.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        9536,
        15728
      ],
      "id": "76769a00-a1a5-4215-8546-0e724d97b813",
      "name": "Code in JavaScript11"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        9744,
        15728
      ],
      "id": "2e5e2e0a-032e-4467-a177-82937d9cc951",
      "name": "If16"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": "={{ false }}",
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        8896,
        16080
      ],
      "id": "47287690-d18e-49cf-a98c-2dd51dddd5a6",
      "name": "If24"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9024,
        14000
      ],
      "id": "83b6c6d3-bd8d-43bb-8e1c-a0a0ab03e5a9",
      "name": "Get row(s) in sheet27",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "TAREA_EDIT",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "TAREA_EDICION"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9888,
        14064
      ],
      "id": "1e225504-5c12-4538-9948-e2e80978cd9e",
      "name": "Update row in sheet47",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript10').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        9888,
        13856
      ],
      "id": "cfa71821-bfe5-4361-afff-5bb5542f568c",
      "name": "Send a text message48",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øQu√© deseas modificar de la tarea {{$json.datos_parciales_1}}?\n\n1) Fecha\n2) Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10128,
        14064
      ],
      "id": "e4d1bdb2-4b5d-4eb6-8e5d-1185a92e4089",
      "name": "Send a text message49",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "ec675a21-b990-4a0b-b606-021f5e25e71e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "dca7b002-8fba-4618-add1-6e508cc3f0ef",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        9552,
        14496
      ],
      "id": "80c361c3-0898-4678-86ef-9b366777466c",
      "name": "Switch12"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d9a64f2e-d27d-4b36-9cb0-93827b2a3636",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.datos_parciales_2.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        9040,
        14768
      ],
      "id": "567de3d7-fda3-4ab6-bf6d-c0a874c6844d",
      "name": "If12"
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $('Telegram Trigger').item.json.message.text }}",
              "operation": "regex",
              "value2": "^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$"
            }
          ]
        }
      },
      "id": "8c68a595-be1a-4418-9c32-7c27ec482d31",
      "name": "Validar formato YYYY-MM-DD3",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        9360,
        15008
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha actualizada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "c441b624-aab0-4118-9b43-bc00d45fcfe1",
      "name": "Telegram OK14",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        11008,
        14912
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Fecha inv√°lida.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2026-12-20\nIntenta nuevamente.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "e2bbd857-a54d-4277-a20e-308621596f52",
      "name": "Telegram Error5",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        9744,
        15152
      ],
      "webhookId": "58122352-e475-4894-bfaf-c3aa5ecc6ce5",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_EDIT",
            "paso_actual": "TAREA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "timestamp_ultima_interaccion": "={{ $now }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9744,
        14912
      ],
      "id": "f7cf7449-8758-4ce5-ae44-6395d97da0ac",
      "name": "Update row in sheet48",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ingrese la fecha nueva.\nFormato requerido:YYYY-MM-DD\nEjemplo: 2026-12-20",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        9904,
        14336
      ],
      "id": "dad48a89-29d9-4159-b879-c0de752b0518",
      "name": "Send a text message50",
      "webhookId": "091ffb67-df42-49eb-a2b1-1e8a031acfc4",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.from.first_name }}",
            "pantalla_actual": "TAREA_EDIT",
            "paso_actual": "TAREA_EDICION",
            "datos_parciales_1": "={{ $('Get row(s) in sheet28').item.json.datos_parciales_1 }}",
            "row_number": 2,
            "datos_parciales_2": "1",
            "timestamp_ultima_interaccion": "={{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10144,
        14336
      ],
      "id": "552d4bc3-6a78-483a-ad38-e99ab27a6413",
      "name": "Update row in sheet49",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9328,
        14496
      ],
      "id": "6806d8a6-3c6d-47e8-addc-134a7ed51adc",
      "name": "Get row(s) in sheet28",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "MENU",
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10352,
        14608
      ],
      "id": "65716acc-727d-4b78-89dd-05cfef8f7dc9",
      "name": "Update row in sheet51",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        9904,
        14608
      ],
      "id": "7cacf2a4-ab2d-4b55-a1af-0fdefe906b64",
      "name": "Send a text message52",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6ec5bccf-438b-4d68-8947-62e86d961fc3",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        10144,
        14608
      ],
      "id": "36061ba4-d7b4-42e1-afb0-d0e13fb08f45",
      "name": "Edit Fields10"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_tarea": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "fecha_objetivo": "={{ $('Update row in sheet48').item.json.datos_parciales_2 }}"
          },
          "matchingColumns": [
            "id_tarea"
          ],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10256,
        14912
      ],
      "id": "1d6164b5-e45d-4058-bfe4-db721a3271ce",
      "name": "Update row in sheet52",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a039b49-2c5e-4e19-8dc1-35eabd92e9e2",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        10512,
        14912
      ],
      "id": "0b17659b-60cd-446e-be82-48d836aceaa5",
      "name": "Edit Fields11"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10768,
        14912
      ],
      "id": "545b44a8-56b6-4dc1-9063-fe04d3b783d2",
      "name": "Update row in sheet55",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        11232,
        14912
      ],
      "id": "49d00b6d-1d34-4ae2-b5c1-f81a125a0c93",
      "name": "Send a text message53",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10000,
        14912
      ],
      "id": "84612118-f825-4c41-9c95-19ba5b2c023e",
      "name": "Get row(s) in sheet30",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst tareas = items.map(i => i.json);\n\nconst tarea = tareas.find(c => c.id_tarea === idIngresado);\n\nif (!tarea) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una tarea con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (tarea.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar tareas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_tarea: tarea.id_tarea,\n    rowNumber: tarea.rowNumber,\n    estado_actual: tarea.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        9264,
        14000
      ],
      "id": "e1a5fd36-d316-41e1-b6fb-5565e5ef1032",
      "name": "Code in JavaScript10"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        9472,
        14000
      ],
      "id": "6d2714d9-8ecf-4654-8f77-67324c36b8e8",
      "name": "If13"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        8624,
        14352
      ],
      "id": "39efed03-8e73-4c1a-bdbb-0cbd5a6a1109",
      "name": "If14"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "30a49837-b923-41ce-88cb-942693e24e67",
              "leftValue": "={{ $json.valido }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        9808,
        11680
      ],
      "id": "3ae80bbd-2730-4b0b-991a-f2fc7d005ada",
      "name": "If11"
    },
    {
      "parameters": {
        "jsCode": "const fechaIngresada = new Date($('Telegram Trigger').first().json.message.text);\nconst hoy = new Date();\n\n\nfechaIngresada.setHours(0,0,0,0);\nhoy.setHours(0,0,0,0);\n\nif (fechaIngresada < hoy) {\n  return [{\n    json: {\n      valido: false,\n      error: 'No puedes crear tareas en fechas pasadas'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    valido: true,\n    fecha: $json.fecha\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        9600,
        11680
      ],
      "id": "16e4683b-f6b0-4146-a286-e9e8ae37cd4f",
      "name": "Code in JavaScript16"
    },
    {
      "parameters": {
        "chatId": "={{ $node['Telegram Trigger'].json.message.chat.id }}",
        "text": "Formato invalido, no puedes crear tareas en el pasado. Int√©ntalo de nuevo o escribe 9 para salir",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10112,
        11824
      ],
      "id": "c49bdd1d-605a-431e-b70f-8b402092ff0c",
      "name": "Send a text message85",
      "webhookId": "48a8ad57-682c-4bfe-b1e6-51ce21ca9c17",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "TAREA_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        8592,
        11248
      ],
      "id": "b1069304-bcdd-4cce-8f29-a856755037cb",
      "name": "Update row in sheet73",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la tarea que deseas completar.\nEjemplo: TAREA-002\n",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        8384,
        11248
      ],
      "id": "15e4f033-14f6-4186-b9ce-d10c93b78a11",
      "name": "Send a text message86",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        8864,
        17264
      ],
      "id": "d5850da0-0c4b-4db2-bca7-eb2bb5694462",
      "name": "If25"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "estado",
              "lookupValue": "Pendiente"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9392,
        17088
      ],
      "id": "4d768ce3-cdb1-470b-9084-adb29fc0af2d",
      "name": "Get row(s) in sheet43",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\nconst tareas = items.map(i => i.json);\n\nconst tarea = tareas.find(c => c.id_tarea === idIngresado);\n\nif (!tarea) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ una tara con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\nif (tarea.estado !== 'Pendiente') {\n  return [{\n    json: {\n      error: 'Solo se pueden editar tareas en estado Pendiente.'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    id_tarea: tarea.id_tarea,\n    rowNumber: tarea.rowNumber,\n    estado_actual: tarea.estado\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        9632,
        17088
      ],
      "id": "c7eb7db4-bed8-4bec-874b-982c9e83f653",
      "name": "Code in JavaScript17"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        9840,
        17088
      ],
      "id": "27db5528-a3d1-4ff6-9697-6c6bb9ff70d6",
      "name": "If26"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "TAREA_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10256,
        17152
      ],
      "id": "95c758cc-b524-498a-b7bf-fa814df0bb21",
      "name": "Update row in sheet74",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript17').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10256,
        16944
      ],
      "id": "f1d48313-0bd8-4387-b3e6-6e135aceb7c1",
      "name": "Send a text message87",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la tarea con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10496,
        17152
      ],
      "id": "949e2e04-ebad-48a8-bbd1-f0a6c857d4a1",
      "name": "Send a text message88",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        9728,
        17456
      ],
      "id": "d0004780-cffa-4243-bcb5-d18064fd1f37",
      "name": "Get row(s) in sheet44",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10736,
        17456
      ],
      "id": "e7c88b9e-ae47-4909-bc7b-d45716394e3a",
      "name": "Send a text message89",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10944,
        17456
      ],
      "id": "33d96c96-5800-4067-8d9f-673448f56cd9",
      "name": "Send a text message90",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10544,
        17456
      ],
      "id": "c8fb4ca4-45ac-406d-9000-2b6ca28341cf",
      "name": "Update row in sheet75",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        10352,
        17456
      ],
      "id": "814007b9-0759-4959-a99a-983ad29edde9",
      "name": "Edit Fields18"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1215835491,
          "mode": "list",
          "cachedResultName": "TAREAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1215835491"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_tarea": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "titulo": "={{ $json.titulo }}",
            "prioridad": "={{ $json.prioridad }}",
            "fecha_objetivo": "={{ $json.fecha_objetivo }}",
            "creado_por": "={{ $json.creado_por }}",
            "estado": "Completada"
          },
          "matchingColumns": [
            "id_tarea"
          ],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10048,
        17456
      ],
      "id": "a17655ee-1675-40c4-9d88-a613f49aa47c",
      "name": "Update row in sheet76",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Tipos de listas\n\"personal\" ‚Üí Solo la usa una persona\n\n\"compartida\" ‚Üí Varias personas pueden verla o editarla\n\n\"trabajo\" ‚Üí Lista relacionada con tareas laborales\n\n\"compras\" ‚Üí Lista espec√≠fica para compras\n\n\"recordatorios\" ‚Üí Lista de cosas por recordar",
        "height": 304,
        "width": 288,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        16128,
        11024
      ],
      "typeVersion": 1,
      "id": "0a2e1ca4-5119-4579-ab73-7d51e07e3c90",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "pantalla_actual": "LISTA"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        3360,
        11696
      ],
      "id": "446a1c84-57fe-4355-b669-2ec771b82a78",
      "name": "Update row in sheet77",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3ddb291-313f-4568-8978-9f6f7b6b04b4",
              "leftValue": "={{ $json.pantalla_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "3a650540-a31b-458f-b267-408c1c05e8de",
              "leftValue": "={{ $json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        16048,
        11728
      ],
      "id": "5ec9b2fb-95c8-4569-aad7-6f0a86d44603",
      "name": "If27"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu lista.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la lista?\n\nEjemplo: Compras del s√∫per\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16816,
        10896
      ],
      "id": "bf34e9e9-a5ad-451e-8e66-144751a369f3",
      "name": "Send a text message91",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "1",
            "datos_parciales_1": "=",
            "timestamp_ultima_interaccion": "{{ $now }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17008,
        10896
      ],
      "id": "936af89b-a79c-490a-88c8-e9c4a2d02978",
      "name": "Update row in sheet78",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $json.result.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17664,
        11120
      ],
      "id": "911e55d6-d088-4c4d-a131-2571598641f9",
      "name": "Update row in sheet79",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16816,
        11120
      ],
      "id": "e1474143-1933-4843-bdfc-b221b789fb87",
      "name": "Get row(s) in sheet45",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.mensaje }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17456,
        11120
      ],
      "id": "b7be601b-51f7-4e6f-a85f-5129dfed8c37",
      "name": "Send a text message92",
      "webhookId": "85b21991-fc09-4cf9-ae30-9158610be872",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la lista que deseas eliminar.\nEjemplo: LISTA-001\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16816,
        11312
      ],
      "id": "3e8ebd19-77a7-4d38-9dda-490b021673f7",
      "name": "Send a text message93",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA_DELETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17024,
        11312
      ],
      "id": "6f015e12-7863-41f4-bcb3-e6c1527da6e5",
      "name": "Update row in sheet80",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "1a85befe-a620-4132-a561-0b196f81a961"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "f346127f-5f33-4163-8fd8-fbaa38a6c527",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c0f971a3-78c3-47f7-bd13-0ccf2ee00f7a",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "92e55669-8b8c-4b14-85f9-931973d7557c",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "4",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "caf44e3f-dabd-4186-b2bc-04f73b1c9f00",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1, 2, 3, 9",
                    "operator": {
                      "type": "string",
                      "operation": "notContains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        16464,
        11328
      ],
      "id": "87b3c2f4-3314-4f72-8dd2-6f408cb01dea",
      "name": "Switch16"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Ups, esa opci√≥n no existe en este men√∫.\n\nPor favor escribe uno de los n√∫meros que ves en pantalla.\n\nEst√°s en: Men√∫ listas\nOpciones disponibles: 1 al 3 y 9",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16816,
        11680
      ],
      "id": "0d80b46d-8232-4689-941a-66f2cf57959e",
      "name": "Send a text message94",
      "webhookId": "621877bc-98ca-497d-99c9-d83042a1ad3b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Perfecto, vamos con tu lista.\n\n¬øQu√© deseas hacer?\n\n1. Crear una nueva lista\n2. Consultar tus listas\n3. Eliminar una lista\n4. Marcar una lista como completada\n9. Volver al men√∫ principal",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17024,
        11680
      ],
      "id": "b47f1b4a-2d4f-45d2-9d2c-59b07e10896d",
      "name": "Send a text message95",
      "webhookId": "f7cd6eb8-73d2-44f5-a589-cc167c525780",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 1,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    },
                    "id": "9fd2951c-f4fc-409b-a856-f3c50d9bd9c4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "a0ce7a58-945e-4432-beb1-2d357795186e",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 2,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "0b69caf7-77ca-48a8-ac1a-558155cc516d",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 3,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "9b0b7bf2-3274-407a-950e-8392c39aa912",
                    "leftValue": "={{ $('Switch').item.json.paso_actual }}",
                    "rightValue": 4,
                    "operator": {
                      "type": "number",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        16448,
        12240
      ],
      "id": "d92b5903-a07e-40a3-942f-611fcc230ceb",
      "name": "Switch15"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 2 de 3\n¬øCu√°l es el tipo de la lista?\n\nEjemplo: Compras\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "4699cbfd-18bb-42e6-aa1f-50f36ae23c52",
      "name": "Telegram OK18",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        17008,
        11872
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "2",
            "datos_parciales_1": "={{ $('Telegram Trigger').item.json.message.text }}",
            "datos_parciales_2": "=",
            "datos_parciales_3": "=",
            "datos_parciales_5": "=",
            "datos_parciales_6": "="
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16800,
        11872
      ],
      "id": "6303a5cd-340f-4a80-a824-61bf527f9c40",
      "name": "Update row in sheet81",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16800,
        12064
      ],
      "id": "69f98ae0-6802-4db4-b45e-6a0168ad9a73",
      "name": "Get row(s) in sheet46",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "3",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17008,
        12064
      ],
      "id": "3d86484d-d436-4087-96cd-904ca61febde",
      "name": "Update row in sheet82",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Paso 3 de 3\n\nNombra los items de tu lista, separados por comas (,)\n\nEjemplo: Pan, Queso, Papas\n\n9. Cancelar",
        "additionalFields": {}
      },
      "id": "0eec8803-7bad-44ac-a602-dd741f40d9c1",
      "name": "Telegram OK19",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        17232,
        12064
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16800,
        12256
      ],
      "id": "c183810a-7dfd-4926-b8ba-fd6c4d8c43b7",
      "name": "Get row(s) in sheet47",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "4",
            "datos_parciales_1": "={{ $json.datos_parciales_1 }}",
            "datos_parciales_2": "={{ $json.datos_parciales_2 }}",
            "datos_parciales_3": "={{ $('Telegram Trigger').item.json.message.text }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17008,
        12256
      ],
      "id": "aae1598e-ed41-4d9b-ae6a-3070143821a2",
      "name": "Update row in sheet83",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Revisa la informaci√≥n de tu lista:\n\nNombre: {{ $json.datos_parciales_1 }}\nTipo: {{ $json.datos_parciales_2 }}\nItems: {{ $('Telegram Trigger').item.json.message.text }}\n\n¬øQu√© deseas hacer?\n1. Confirmar y guardar\n2. Editar informaci√≥n\n3. Cancelar",
        "additionalFields": {}
      },
      "id": "2178d49f-b6e6-4dfe-9140-a0db71c9a663",
      "name": "Telegram OK20",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        17232,
        12256
      ],
      "webhookId": "6ca47415-d373-4e4a-ba53-f0e4facfeb2c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "1",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "2149ed1c-6fc1-4214-9bb6-9d73396df7e2"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "c3020235-3026-4758-ba53-3259646bba63",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "81655df1-f7a4-4730-bcb6-91267c74645f",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        16784,
        12576
      ],
      "id": "ec46986c-de86-46c6-b856-23c78e0237a1",
      "name": "Switch17"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17104,
        12960
      ],
      "id": "1ffb97b3-fef1-451f-b4b0-f2d2ee8aa77b",
      "name": "Update row in sheet84",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Cancelado",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17360,
        12960
      ],
      "id": "1489bd9c-93f4-49ae-9a9b-fe7080ea12e0",
      "name": "Send a text message96",
      "webhookId": "dc8a9a45-0711-45a4-829a-7ab666828377",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA",
            "paso_actual": "1"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales",
              "displayName": "datos_parciales",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17120,
        12768
      ],
      "id": "9a0abf3c-5607-451c-99a2-1487b75f4ef5",
      "name": "Update row in sheet85",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Empecemos a crear tu lista.\n\nPaso 1 de 3\n¬øCu√°l es el nombre de la lista?\n\nEjemplo: Compras del s√∫per\n\n9. Cancelar",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17376,
        12768
      ],
      "id": "ba425e72-f669-40ec-bfba-9c6bf637095d",
      "name": "Send a text message97",
      "webhookId": "04d65196-2feb-4edd-854d-eb0ed599f44e",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17968,
        12576
      ],
      "id": "e862a7fd-daa8-4d6f-a667-1fe2b5fab7d9",
      "name": "Get row(s) in sheet48",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript19').item.json.chatId }}",
        "text": "Lista completada.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18672,
        12576
      ],
      "id": "6a5857df-33eb-4240-a151-806842a0a7b9",
      "name": "Send a text message98",
      "webhookId": "3467d3a3-b94f-4550-b6ce-a4b5b14025a0",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "=",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        19056,
        12576
      ],
      "id": "1fc68166-61ed-409e-a68b-40d31b76c602",
      "name": "Update row in sheet86",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17120,
        12576
      ],
      "id": "e34793c6-1825-47d0-9181-7c51c4d63cb0",
      "name": "Get row(s) in sheet49",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Extraer n√∫meros v√°lidos de id_tarea\nconst numeros = rows\n  .map(r => r.json.id_lista)\n  .filter(id => typeof id === 'string' && /^LISTA-\\d+$/.test(id))\n  .map(id => parseInt(id.split('-')[1], 10));\n\n// Si no hay tareas v√°lidas, iniciar en 001\nconst nextNumber = numeros.length > 0\n  ? Math.max(...numeros) + 1\n  : 1;\n\n// Formato final\nconst newId = `LISTA-${String(nextNumber).padStart(3, '0')}`;\n\nreturn [{\n  json: {\n    id_lista: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        17328,
        12576
      ],
      "id": "ef063ec3-54a5-4b64-b8b2-23b45c27f522",
      "name": "Code in JavaScript19"
    },
    {
      "parameters": {
        "chatId": "={{ $('Code in JavaScript19').item.json.chatId }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        19280,
        12576
      ],
      "id": "0fcf746d-c550-40be-9915-383f773fb4ff",
      "name": "Send a text message99",
      "webhookId": "67f4070f-d09c-4373-8dcb-d45994d560f6",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d825242d-7e8d-42fc-9944-3a651f639662",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        18864,
        12576
      ],
      "id": "61d7994b-d2d4-48dd-9a17-3e6d4ab56684",
      "name": "Edit Fields19"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRangeA1",
              "range": "A:A"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17552,
        12576
      ],
      "id": "52e0a80e-2e70-45da-a7b7-6fe2ebe97b4c",
      "name": "Get row(s) in sheet50",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const rows = items;\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\n// Extraer n√∫meros v√°lidos de id_tarea\nconst numeros = rows\n  .map(r => r.json.id_item)\n  .filter(id => typeof id === 'string' && /^ITEMS-\\d+$/.test(id))\n  .map(id => parseInt(id.split('-')[1], 10));\n\n// Si no hay tareas v√°lidas, iniciar en 001\nconst nextNumber = numeros.length > 0\n  ? Math.max(...numeros) + 1\n  : 1;\n\n// Formato final\nconst newId = `ITEMS-${String(nextNumber).padStart(3, '0')}`;\n\nreturn [{\n  json: {\n    id_item: newId,\n    chatId: chatId\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        17776,
        12576
      ],
      "id": "16d2c668-7fb9-4625-98c0-52735d83fa7c",
      "name": "Code in JavaScript20"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_lista": "={{ $('Code in JavaScript19').item.json.id_lista }}",
            "nombre_lista": "={{ $json.datos_parciales_1 }}",
            "tipo": "={{ $json.datos_parciales_2 }}",
            "creado_por": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_lista",
              "displayName": "id_lista",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "nombre_lista",
              "displayName": "nombre_lista",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "tipo",
              "displayName": "tipo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18192,
        12576
      ],
      "id": "594af5aa-fdea-40f9-8d1e-12af2f31ab0b",
      "name": "Append row in sheet4",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "estado": "Pendiente",
            "id_item": "={{ $('Code in JavaScript20').item.json.id_item }}",
            "id_lista": "={{ $('Code in JavaScript19').item.json.id_lista }}",
            "item": "={{ $('Get row(s) in sheet48').item.json.datos_parciales_3 }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_item",
              "displayName": "id_item",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "id_lista",
              "displayName": "id_lista",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "item",
              "displayName": "item",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18416,
        12576
      ],
      "id": "8b11d896-7d8c-4ece-9707-0bafdb1a854b",
      "name": "Append row in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17040,
        11120
      ],
      "id": "93c328ff-3d6e-41e2-9324-13c9480fd937",
      "name": "Get row(s) in sheet51",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "060fe614-7a44-4939-9a05-d30b3cec05ea",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        12560,
        15424
      ],
      "id": "f62dfb4c-4f71-4d9f-a6f4-f04e6b181b68",
      "name": "If28"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no valida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        12800,
        15584
      ],
      "id": "4da87742-468b-43a6-b85c-b8e907f0c465",
      "name": "Send a text message100",
      "webhookId": "348071f9-f5ba-41fb-8d13-fc67affba289",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "060fe614-7a44-4939-9a05-d30b3cec05ea",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        12624,
        14096
      ],
      "id": "9948a997-6ee7-41b7-b4c3-09f9ae13e2dc",
      "name": "If29"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Opci√≥n no valida.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        12928,
        14288
      ],
      "id": "2a7f4444-e87e-42c3-9054-dbf495eac23e",
      "name": "Send a text message101",
      "webhookId": "348071f9-f5ba-41fb-8d13-fc67affba289",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "content": "### Habitos",
        "width": 230
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        12256,
        11440
      ],
      "typeVersion": 1,
      "id": "771f0b66-be98-4d26-8ffd-b5fba433b20a",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "jsCode": "const listas = $items(\"Get row(s) in sheet45\").map(i => i.json);\nconst rawItems = $items(\"Get row(s) in sheet51\").map(i => i.json);\n\nconst itemsUnicosMap = {};\nrawItems.forEach(row => {\n  itemsUnicosMap[row.id_item] = row;\n});\nconst itemsUnicos = Object.values(itemsUnicosMap);\n\nconst itemsPorLista = {};\n\nitemsUnicos.forEach(row => {\n  if (!itemsPorLista[row.id_lista]) {\n    itemsPorLista[row.id_lista] = [];\n  }\n\n  const subItems = row.item.split(',').map(i => i.trim());\n\n  subItems.forEach(texto => {\n    itemsPorLista[row.id_lista].push({\n      item: texto,\n      estado: row.estado.trim().toLowerCase()\n    });\n  });\n});\n\n\nObject.keys(itemsPorLista).forEach(idLista => {\n  const unique = {};\n  itemsPorLista[idLista].forEach(it => {\n    unique[it.item.toLowerCase()] = it;\n  });\n  itemsPorLista[idLista] = Object.values(unique);\n});\n\n\nconst listasMap = {};\n\nlistas.forEach(l => {\n  listasMap[l.id_lista] = {\n    ...l,\n    items: itemsPorLista[l.id_lista] || []\n  };\n});\n\n\nconst listasPendientes = [];\nconst listasCompletadas = [];\n\nObject.values(listasMap).forEach(lista => {\n  const tienePendientes = lista.items.some(it => it.estado === 'pendiente');\n\n  if (tienePendientes) {\n    listasPendientes.push(lista);\n  } else {\n    listasCompletadas.push(lista);\n  }\n});\n\n\nlet mensaje = 'üóÇÔ∏è *Resumen de listas*\\n\\n';\n\n\nmensaje += 'üìå *Listas pendientes*\\n\\n';\n\nif (listasPendientes.length === 0) {\n  mensaje += 'No tienes listas pendientes.\\n\\n';\n} else {\n  listasPendientes.forEach((l, i) => {\n    mensaje += `${i + 1}. *${l.id_lista}*\\n`;\n    mensaje += `üìù ${l.nombre_lista}\\n`;\n    mensaje += `üè∑Ô∏è ${l.tipo}\\n`;\n    mensaje += '‚¨ú *Pendientes*\\n';\n\n    l.items\n      .filter(it => it.estado === 'pendiente')\n      .forEach(it => {\n        mensaje += `- ${it.item}\\n`;\n      });\n\n    mensaje += '\\n';\n  });\n}\n\n// ---- Completadas ----\nmensaje += '‚úÖ *Listas completadas*\\n\\n';\n\nif (listasCompletadas.length === 0) {\n  mensaje += 'No tienes listas completadas.';\n} else {\n  listasCompletadas.forEach((l, i) => {\n    mensaje += `${i + 1}. *${l.id_lista}*\\n`;\n    mensaje += `üìù ${l.nombre_lista}\\n`;\n    mensaje += `üè∑Ô∏è ${l.tipo}\\n`;\n    mensaje += '‚òëÔ∏è *Completadas*\\n';\n\n    l.items\n      .filter(it => it.estado === 'completada')\n      .forEach(it => {\n        mensaje += `- ${it.item}\\n`;\n      });\n\n    mensaje += '\\n';\n  });\n}\n\nconst chatId = $node[\"Telegram Trigger\"].json.message.chat.id;\n\nreturn [{\n  json: {\n    mensaje,\n    chatId\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        17248,
        11120
      ],
      "id": "3f198f26-7cc7-4d19-8b35-880cd2cecb01",
      "name": "Code in JavaScript22"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=Por favor, escribe el ID de la lista que deseas marcar como completada.\nEjemplo: LISTA-001\n",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        16816,
        11488
      ],
      "id": "2c24e789-0ff5-4a92-9fb8-7d847625ce58",
      "name": "Send a text message102",
      "webhookId": "6d97bd7b-0b97-4ed2-9ff8-a3a9d569216b",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "LISTA_COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17024,
        11488
      ],
      "id": "1bafe5aa-5059-4e83-aa69-8bdea2d95b6b",
      "name": "Update row in sheet87",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        16992,
        13504
      ],
      "id": "25dee7d1-fa6d-428a-98e2-1b463383570e",
      "name": "Get row(s) in sheet52",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "LISTA_DELETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "DELETE2"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18032,
        13568
      ],
      "id": "493289b5-db4d-46f6-bc22-7dec2feb2fc0",
      "name": "Update row in sheet88",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript18').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18032,
        13360
      ],
      "id": "31b1567e-77fe-4adc-b05b-d14c69ec1d58",
      "name": "Send a text message103",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer eliminar la lista con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18272,
        13568
      ],
      "id": "e71ce44e-19e3-4cc8-ae05-65a83d9999f0",
      "name": "Send a text message104",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "startIndex": "={{ $('Get row(s) in sheet54').item.json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18080,
        14080
      ],
      "id": "b0aa8511-89fa-4c65-9ea6-544bb946be12",
      "name": "Delete rows or columns from sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        17136,
        14224
      ],
      "id": "f49c853c-01cf-4674-8616-08720c70e30a",
      "name": "If30"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_lista",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17648,
        14080
      ],
      "id": "f1aec020-b265-4aed-b47f-8dbd60aeecdd",
      "name": "Get row(s) in sheet53",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17408,
        14080
      ],
      "id": "e94e2742-fff4-466e-a9e8-ecb3028189c1",
      "name": "Get row(s) in sheet54",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Registro eliminado.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18880,
        14080
      ],
      "id": "4c3d0446-38b5-4cda-abee-f6e73693a8a9",
      "name": "Send a text message105",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        19088,
        14080
      ],
      "id": "35115b08-acaa-4225-be7f-87e9b2ce52f9",
      "name": "Send a text message106",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17392,
        14352
      ],
      "id": "1dd788b1-daf7-4830-9e55-5952542ff3b8",
      "name": "Send a text message107",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18080,
        14352
      ],
      "id": "e3936c7e-71a9-41db-886d-29226d4d8a3d",
      "name": "Send a text message108",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18688,
        14080
      ],
      "id": "9d55cce2-f7f6-41b2-a9b8-0409788f6e15",
      "name": "Update row in sheet89",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        18496,
        14080
      ],
      "id": "7d1871c7-6d62-4eae-9f11-ffaa5742398f",
      "name": "Edit Fields20"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17840,
        14352
      ],
      "id": "06ee4dfb-72f0-46c3-9d58-a88aef797b1c",
      "name": "Update row in sheet90",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        17632,
        14352
      ],
      "id": "3689d312-c66f-48b7-b9bb-3a205e253930",
      "name": "Edit Fields21"
    },
    {
      "parameters": {
        "jsCode": "// ID de lista ingresado desde Telegram\nconst idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\n\n// Normalizar listas y items a arrays\nconst listas = Array.isArray($node[\"Get row(s) in sheet52\"].json)\n  ? $node[\"Get row(s) in sheet52\"].json\n  : [$node[\"Get row(s) in sheet52\"].json];\n\nconst itemsLista = Array.isArray($node[\"Get row(s) in sheet55\"].json)\n  ? $node[\"Get row(s) in sheet55\"].json\n  : [$node[\"Get row(s) in sheet55\"].json];\n\n// Buscar la lista por ID\nconst lista = listas.find(l => l.id_lista.toUpperCase() === idIngresado);\n\nif (!lista) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ ninguna lista con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\n// Filtrar items que pertenecen a esta lista\nconst items = itemsLista.filter(i => i.id_lista.toUpperCase() === idIngresado);\n\nif (items.length === 0) {\n  return [{\n    json: {\n      error: 'La lista no tiene items para eliminar.'\n    }\n  }];\n}\n\n// Verificar si todos los items est√°n en estado Pendiente\nconst todosPendientes = items.every(i => i.estado.trim().toLowerCase() === 'pendiente');\n\nif (!todosPendientes) {\n  return [{\n    json: {\n      error: 'No se puede eliminar la lista porque tiene items que no est√°n pendientes.'\n    }\n  }];\n}\n\n// Preparar rowNumbers para borrar\nconst rowNumbersItems = items.map(i => i.row_number); // filas de items\nconst rowNumberLista = lista.row_number;             // fila de la lista\n\n// Mensaje de √©xito\nreturn [{\n  json: {\n    mensaje: `‚úÖ La lista \"${lista.nombre_lista}\" (ID: ${lista.id_lista}) y sus items pendientes se pueden eliminar.`,\n    rowNumberLista: rowNumberLista,\n    rowNumbersItems: rowNumbersItems\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        17408,
        13504
      ],
      "id": "9fc6bffd-f6eb-4e6f-8898-cc03cbc81511",
      "name": "Code in JavaScript18"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        17616,
        13504
      ],
      "id": "f05c7125-c714-47d4-8607-9966e0235cc9",
      "name": "If31"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": "={{ false }}",
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        16592,
        13856
      ],
      "id": "b6febea8-b797-48de-8a48-b8c88f1a1064",
      "name": "If32"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17200,
        13504
      ],
      "id": "13f7e187-4d34-4933-a56a-bcd0688c74f0",
      "name": "Get row(s) in sheet55",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "startIndex": "={{ $('Get row(s) in sheet56').item.json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18288,
        14080
      ],
      "id": "a91340df-bdbd-4a7b-943a-8cbc8d4233c4",
      "name": "Delete rows or columns from sheet4",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_lista",
              "lookupValue": "={{ $('Get row(s) in sheet54').item.json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17856,
        14080
      ],
      "id": "af48be32-8c7b-4864-9701-42a3522d45ad",
      "name": "Get row(s) in sheet56",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "19cf076b-a41a-4007-bbc5-e4b072ed2ed2",
              "leftValue": "={{ $('Get row(s) in sheet').item.json.paso_actual.toString() }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        17120,
        14944
      ],
      "id": "052f6d57-dbd4-43be-a4cc-1cd663b700ac",
      "name": "If33"
    },
    {
      "parameters": {
        "jsCode": "// ID de lista ingresado desde Telegram\nconst idIngresado = $node[\"Telegram Trigger\"].json.message.text.trim().toUpperCase();\n\n// Normalizar inputs a arrays\nconst listas = Array.isArray($node[\"Get row(s) in sheet57\"].json)\n  ? $node[\"Get row(s) in sheet57\"].json\n  : [$node[\"Get row(s) in sheet57\"].json];\n\nconst itemsLista = Array.isArray($node[\"Get row(s) in sheet59\"].json)\n  ? $node[\"Get row(s) in sheet59\"].json\n  : [$node[\"Get row(s) in sheet59\"].json];\n\n// Buscar la lista\nconst lista = listas.find(l => l.id_lista.toUpperCase() === idIngresado);\n\nif (!lista) {\n  return [{\n    json: {\n      error: 'No se encontr√≥ ninguna lista con ese ID. Int√©ntalo nuevamente.'\n    }\n  }];\n}\n\n// Filtrar items que pertenecen a esta lista\nconst items = itemsLista.filter(i => i.id_lista.toUpperCase() === idIngresado);\n\nif (items.length === 0) {\n  return [{\n    json: {\n      error: 'La lista no tiene items para marcar como completada.'\n    }\n  }];\n}\n\n// Verificar si todos los items est√°n pendientes\nconst todosPendientes = items.every(i => i.estado.trim().toLowerCase() === 'pendiente');\n\nif (!todosPendientes) {\n  return [{\n    json: {\n      error: 'Solo se pueden marcar listas como completadas si todos sus items est√°n pendientes.'\n    }\n  }];\n}\n\n// Preparar rowNumbers para actualizar\nconst rowNumbersItems = items.map(i => i.row_number); // filas de items\nconst rowNumberLista = lista.row_number;             // fila de la lista\n\n// Mensaje de √©xito\nreturn [{\n  json: {\n    mensaje: `‚úÖ La lista \"${lista.nombre_lista}\" (ID: ${lista.id_lista}) se puede marcar como completada.`,\n    rowNumberLista,\n    rowNumbersItems\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        17888,
        14768
      ],
      "id": "942cc604-086b-4036-8b7b-0ca19bb1d5ee",
      "name": "Code in JavaScript21"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f176d09d-3f91-48cd-b6cd-4224a025f519",
              "leftValue": "={{ $json.error }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        18096,
        14768
      ],
      "id": "5cc2d1ea-c97a-48cd-a2f7-5dc42c7b4dfa",
      "name": "If34"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $node[\"Telegram Trigger\"].json.message.chat.first_name }} ",
            "pantalla_actual": "LISTA_COMPLETE",
            "datos_parciales_1": "={{ $node[\"Telegram Trigger\"].json.message.text }}",
            "paso_actual": "COMPLETE"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18512,
        14832
      ],
      "id": "fba84c57-6da6-4e0b-8b8e-baf9a814add1",
      "name": "Update row in sheet91",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Trigger\"].json.message.chat.id}}",
        "text": "={{ $('Code in JavaScript21').item.json.error }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18512,
        14624
      ],
      "id": "a8487fcc-2658-49fa-b460-9ff8b1718ce1",
      "name": "Send a text message109",
      "webhookId": "6aead782-f551-42fd-94be-6a582ce924f8",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $node[\"Telegram Trigger\"].json.message.chat.id }} ",
        "text": "=¬øEstas seguro/a de querer completar la lista con ID {{$json.datos_parciales_1}}?\n\n1) Si\n2) Cancear",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18752,
        14832
      ],
      "id": "e904634d-acfe-4c33-bdb2-751f481609ff",
      "name": "Send a text message110",
      "webhookId": "0143dc20-4f34-4126-a2f0-8aeb18b64112",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_tarea",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17728,
        15136
      ],
      "id": "6e20b510-f835-4a37-ac6e-031079e601ae",
      "name": "Get row(s) in sheet58",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Se actualiz√≥ la informaci√≥n.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18832,
        15136
      ],
      "id": "caf832d5-047d-45dd-9105-f3c96e54f4d9",
      "name": "Send a text message111",
      "webhookId": "2fc1d56f-664b-4d51-8648-04c81e4ae6dd",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        19040,
        15136
      ],
      "id": "d2eec5c3-bdb2-4e13-8a5d-12c3f2f5825a",
      "name": "Send a text message112",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18640,
        15136
      ],
      "id": "e3a7a979-9416-4a92-aeee-e57f728f96f3",
      "name": "Update row in sheet92",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        18448,
        15136
      ],
      "id": "923a8d97-ccd4-433c-9da4-fd2102bcf577",
      "name": "Edit Fields22"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id_tarea": "={{ $('Get row(s) in sheet').item.json.datos_parciales_1 }}",
            "titulo": "={{ $json.titulo }}",
            "prioridad": "={{ $json.prioridad }}",
            "fecha_objetivo": "={{ $json.fecha_objetivo }}",
            "creado_por": "={{ $json.creado_por }}",
            "estado": "Completada"
          },
          "matchingColumns": [
            "id_tarea"
          ],
          "schema": [
            {
              "id": "id_tarea",
              "displayName": "id_tarea",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "prioridad",
              "displayName": "prioridad",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "estado",
              "displayName": "estado",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "fecha_objetivo",
              "displayName": "fecha_objetivo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "creado_por",
              "displayName": "creado_por",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18192,
        15136
      ],
      "id": "8064c0a5-3fae-4e58-82bc-4b95d4defcc5",
      "name": "Update row in sheet93",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 157614051,
          "mode": "list",
          "cachedResultName": "LISTAS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=157614051"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17472,
        14768
      ],
      "id": "6281025c-67dd-4a66-a4e1-2bf74510280d",
      "name": "Get row(s) in sheet57",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17680,
        14768
      ],
      "id": "1ef4bb4a-0524-44f4-aa10-de1fcb676ac5",
      "name": "Get row(s) in sheet59",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        9392,
        17600
      ],
      "id": "84f28fff-e2cc-4848-b024-1d03a2b96879",
      "name": "If35"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        9744,
        17744
      ],
      "id": "be6110f2-bb71-4c51-9426-796795fb7761",
      "name": "Send a text message113",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        10432,
        17744
      ],
      "id": "a82e1354-5e5f-4e34-824c-93ec1eed5f50",
      "name": "Send a text message114",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        10192,
        17744
      ],
      "id": "c7753078-78d1-40f5-8a97-89b4409eba1f",
      "name": "Update row in sheet94",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        9984,
        17744
      ],
      "id": "33757f8f-1e5e-4efd-b85f-bef1eca52efe",
      "name": "Edit Fields23"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "ce164293-e156-447c-a402-9c7ca61cced3",
              "leftValue": "={{ $('Telegram Trigger').item.json.message.text.toString() }}",
              "rightValue": "1",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        17472,
        15296
      ],
      "id": "1998d069-9ca2-4961-ba80-591228b1ed89",
      "name": "If36"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "Proceso cancelado.",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        17728,
        15424
      ],
      "id": "92b77a5c-fc6c-4ac2-901c-8d4b6ecdd6ef",
      "name": "Send a text message115",
      "webhookId": "4f13f1d8-19ba-4d12-baa8-c36850443a16",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "=¬øEn qu√© te puedo ayudar hoy?\n\nMen√∫ principal:\n0. Ayuda\n1. Agenda (citas)\n2. Tareas\n3. Recordatorios\n4. H√°bitos\n5. Listas\n6. Reportes\n7. Configuraci√≥n\n8. Administrador\n\nSugerencia:\n\nSi quieres empezar r√°pido, te recomiendo la opci√≥n 1 (Agenda).",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        18416,
        15424
      ],
      "id": "9182f37d-29d0-4f5e-a7ac-f2355244707a",
      "name": "Send a text message116",
      "webhookId": "e2b25fb4-3e1b-4601-b419-20a208b6776c",
      "credentials": {
        "telegramApi": {
          "id": "YMdv2aeMU5U6FQ85",
          "name": "Agenda bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1920024994,
          "mode": "list",
          "cachedResultName": "SESSIONS",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1920024994"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "row_number": 2,
            "telegram_user": "={{ $('Telegram Trigger').item.json.message.chat.first_name }}",
            "pantalla_actual": "MENU",
            "paso_actual": "={{ $json.Vacio }}",
            "datos_parciales_1": "={{ $json.Vacio }}",
            "datos_parciales_2": "={{ $json.Vacio }}",
            "datos_parciales_3": "={{ $json.Vacio }}",
            "datos_parciales_4": "={{ $json.Vacio }}",
            "datos_parciales_5": "={{ $json.Vacio }}",
            "datos_parciales_6": "={{ $json.Vacio }}",
            "timestamp_ultima_interaccion": "={{ $json.Vacio }}"
          },
          "matchingColumns": [
            "row_number"
          ],
          "schema": [
            {
              "id": "telegram_user",
              "displayName": "telegram_user",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "pantalla_actual",
              "displayName": "pantalla_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "paso_actual",
              "displayName": "paso_actual",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_1",
              "displayName": "datos_parciales_1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_2",
              "displayName": "datos_parciales_2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_3",
              "displayName": "datos_parciales_3",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_4",
              "displayName": "datos_parciales_4",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_5",
              "displayName": "datos_parciales_5",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "datos_parciales_6",
              "displayName": "datos_parciales_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "timestamp_ultima_interaccion",
              "displayName": "timestamp_ultima_interaccion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        18176,
        15424
      ],
      "id": "42a2b49f-2c7d-4cff-a920-6a2c1fbb13ec",
      "name": "Update row in sheet95",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d96b111a-3d75-4653-acf6-0ac987841386",
              "name": "Vacio",
              "value": "",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        17968,
        15424
      ],
      "id": "aa8ad14d-12d1-4571-a356-7d043c5551af",
      "name": "Edit Fields24"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI",
          "mode": "list",
          "cachedResultName": "AgendaBot Services",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1000770011,
          "mode": "list",
          "cachedResultName": "ITEMS_LISTA",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Fr0SIHz1fqAEYHHRrOVIQoVQisSI1TMWBi5-NYTETkI/edit#gid=1000770011"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id_lista",
              "lookupValue": "={{ $json.datos_parciales_1 }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        17952,
        15136
      ],
      "id": "87c9e92e-8c4f-487d-9105-6c52453c800d",
      "name": "Get row(s) in sheet60",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "hG2KjqFn0nRxAqmP",
          "name": "Google Sheets account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If24",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If17",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If21",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If27",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If33",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Send a text message2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet42",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message65",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message66",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message64",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message63",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message62",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message2": {
      "main": [
        [
          {
            "node": "Send a text message3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message5": {
      "main": [
        [
          {
            "node": "Send a text message6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message4": {
      "main": [
        [
          {
            "node": "Update row in sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Send a text message9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet14",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message24",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message39",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message7": {
      "main": [
        [
          {
            "node": "Send a text message8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message9": {
      "main": [
        [
          {
            "node": "Update row in sheet4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD": {
      "main": [
        [
          {
            "node": "Code in JavaScript9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch3": {
      "main": [
        [
          {
            "node": "Validar formato YYYY-MM-DD",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato HH:MM",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet5": {
      "main": [
        [
          {
            "node": "Telegram OK",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato HH:MM": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet1": {
      "main": [
        [
          {
            "node": "Update row in sheet6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet6": {
      "main": [
        [
          {
            "node": "Telegram OK1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet7": {
      "main": [
        [
          {
            "node": "Telegram OK2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet2": {
      "main": [
        [
          {
            "node": "Update row in sheet7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet8": {
      "main": [
        [
          {
            "node": "Telegram OK3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet3": {
      "main": [
        [
          {
            "node": "Update row in sheet8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet10": {
      "main": [
        [
          {
            "node": "Telegram OK5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet5": {
      "main": [
        [
          {
            "node": "Update row in sheet10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch5": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet11": {
      "main": [
        [
          {
            "node": "Telegram OK6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet6": {
      "main": [
        [
          {
            "node": "Update row in sheet11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet12": {
      "main": [
        [
          {
            "node": "Telegram OK7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet7": {
      "main": [
        [
          {
            "node": "Update row in sheet12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch4": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet8": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "Send a text message11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message11": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet14": {
      "main": [
        [
          {
            "node": "Send a text message12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet15": {
      "main": [
        [
          {
            "node": "Send a text message13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message14": {
      "main": [
        [
          {
            "node": "Update row in sheet16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet4": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message": {
      "main": [
        [
          {
            "node": "Edit Fields5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message1": {
      "main": [
        [
          {
            "node": "Update row in sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet13": {
      "main": [
        [
          {
            "node": "Send a text message22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Update row in sheet13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet14": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Send a text message23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message23": {
      "main": [
        [
          {
            "node": "Update row in sheet9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message24": {
      "main": [
        [
          {
            "node": "Update row in sheet20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet15": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "Send a text message25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet21": {
      "main": [
        [
          {
            "node": "Send a text message26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet16",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch10": {
      "main": [
        [
          {
            "node": "Send a text message27",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message28",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message29",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD2": {
      "main": [
        [
          {
            "node": "Update row in sheet23",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet23": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message27": {
      "main": [
        [
          {
            "node": "Update row in sheet29",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet16": {
      "main": [
        [
          {
            "node": "Switch10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message28": {
      "main": [
        [
          {
            "node": "Update row in sheet30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message29": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Update row in sheet31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch11": {
      "main": [
        [
          {
            "node": "Validar formato YYYY-MM-DD2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato HH:MM1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato HH:MM1": {
      "main": [
        [
          {
            "node": "Update row in sheet32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet33": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet32": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet34": {
      "main": [
        [
          {
            "node": "Edit Fields4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Update row in sheet35",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet35": {
      "main": [
        [
          {
            "node": "Telegram OK4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields4": {
      "main": [
        [
          {
            "node": "Update row in sheet36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet36": {
      "main": [
        [
          {
            "node": "Telegram OK13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram OK4": {
      "main": [
        [
          {
            "node": "Send a text message30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram OK13": {
      "main": [
        [
          {
            "node": "Send a text message31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields5": {
      "main": [
        [
          {
            "node": "Update row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet17": {
      "main": [
        [
          {
            "node": "Update row in sheet34",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet18": {
      "main": [
        [
          {
            "node": "Update row in sheet33",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message32": {
      "main": [
        [
          {
            "node": "Update row in sheet37",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet19": {
      "main": [
        [
          {
            "node": "Code in JavaScript4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript4": {
      "main": [
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "Send a text message33",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet38",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet38": {
      "main": [
        [
          {
            "node": "Send a text message34",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If6": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet": {
      "main": [
        [
          {
            "node": "Edit Fields6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If7": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet21",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message37",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet20": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet21": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message35": {
      "main": [
        [
          {
            "node": "Send a text message36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message37": {
      "main": [
        [
          {
            "node": "Edit Fields7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet39": {
      "main": [
        [
          {
            "node": "Send a text message35",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields6": {
      "main": [
        [
          {
            "node": "Update row in sheet39",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields7": {
      "main": [
        [
          {
            "node": "Update row in sheet40",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet40": {
      "main": [
        [
          {
            "node": "Send a text message38",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet22": {
      "main": [
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript5": {
      "main": [
        [
          {
            "node": "If9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If9": {
      "main": [
        [
          {
            "node": "Send a text message40",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet42",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet42": {
      "main": [
        [
          {
            "node": "Send a text message41",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If8": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet22",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet23": {
      "main": [
        [
          {
            "node": "Update row in sheet44",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message42": {
      "main": [
        [
          {
            "node": "Send a text message43",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet43": {
      "main": [
        [
          {
            "node": "Send a text message42",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields8": {
      "main": [
        [
          {
            "node": "Update row in sheet43",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message39": {
      "main": [
        [
          {
            "node": "Update row in sheet41",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet44": {
      "main": [
        [
          {
            "node": "Edit Fields8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If10": {
      "main": [
        [
          {
            "node": "Update row in sheet5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript9": {
      "main": [
        [
          {
            "node": "If10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Switch6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch6": {
      "main": [
        [
          {
            "node": "Send a text message15",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet26",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message47",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message59",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message86",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message15": {
      "main": [
        [
          {
            "node": "Update row in sheet22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message16": {
      "main": [
        [
          {
            "node": "Send a text message17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript6": {
      "main": [
        [
          {
            "node": "Send a text message46",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet26": {
      "main": [
        [
          {
            "node": "Code in JavaScript6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message46": {
      "main": [
        [
          {
            "node": "Update row in sheet17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message47": {
      "main": [
        [
          {
            "node": "Update row in sheet46",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message59": {
      "main": [
        [
          {
            "node": "Update row in sheet56",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch7": {
      "main": [
        [
          {
            "node": "Update row in sheet25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato YYYY-MM-DD1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch8": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet10",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet11",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet9": {
      "main": [
        [
          {
            "node": "Update row in sheet26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet10": {
      "main": [
        [
          {
            "node": "Update row in sheet27",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet11": {
      "main": [
        [
          {
            "node": "Update row in sheet28",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD1": {
      "main": [
        [
          {
            "node": "Code in JavaScript16",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet12": {
      "main": [
        [
          {
            "node": "Update row in sheet24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet24": {
      "main": [
        [
          {
            "node": "Telegram OK12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet25": {
      "main": [
        [
          {
            "node": "Telegram OK8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet26": {
      "main": [
        [
          {
            "node": "Telegram OK9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet27": {
      "main": [
        [
          {
            "node": "Telegram OK10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet28": {
      "main": [
        [
          {
            "node": "Telegram OK11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch9": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet25",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet18": {
      "main": [
        [
          {
            "node": "Send a text message20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet19": {
      "main": [
        [
          {
            "node": "Send a text message21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet2": {
      "main": [
        [
          {
            "node": "Send a text message44",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet24": {
      "main": [
        [
          {
            "node": "Code in JavaScript8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message44": {
      "main": [
        [
          {
            "node": "Edit Fields9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet45": {
      "main": [
        [
          {
            "node": "Send a text message45",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet25": {
      "main": [
        [
          {
            "node": "Code in JavaScript7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript7": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript8": {
      "main": [
        [
          {
            "node": "Append row in sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields9": {
      "main": [
        [
          {
            "node": "Update row in sheet45",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If17": {
      "main": [
        [
          {
            "node": "Switch13",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message60": {
      "main": [
        [
          {
            "node": "Send a text message61",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch13": {
      "main": [
        [
          {
            "node": "Send a text message67",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message68",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message69",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message60",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message65": {
      "main": [
        [
          {
            "node": "Update row in sheet57",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message67": {
      "main": [
        [
          {
            "node": "Update row in sheet58",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message68": {
      "main": [
        [
          {
            "node": "Update row in sheet59",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message69": {
      "main": [
        [
          {
            "node": "Update row in sheet60",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet61": {
      "main": [
        [
          {
            "node": "Telegram OK15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch14": {
      "main": [
        [
          {
            "node": "Update row in sheet61",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet13",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato HH:MM2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet62": {
      "main": [
        [
          {
            "node": "Telegram OK16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet13": {
      "main": [
        [
          {
            "node": "Update row in sheet62",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet33": {
      "main": [
        [
          {
            "node": "Append row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet1": {
      "main": [
        [
          {
            "node": "Send a text message70",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message70": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet63": {
      "main": [
        [
          {
            "node": "Send a text message71",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet34": {
      "main": [
        [
          {
            "node": "Code in JavaScript12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript12": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet33",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Update row in sheet63",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato HH:MM2": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet34",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram OK17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet35": {
      "main": [
        [
          {
            "node": "Code in JavaScript13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript13": {
      "main": [
        [
          {
            "node": "If18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If18": {
      "main": [
        [
          {
            "node": "Send a text message72",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet64",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet64": {
      "main": [
        [
          {
            "node": "Send a text message73",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If19": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet35",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If29",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet2": {
      "main": [
        [
          {
            "node": "Edit Fields14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If20": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet37",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message76",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet36": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet37": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message74": {
      "main": [
        [
          {
            "node": "Send a text message75",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message76": {
      "main": [
        [
          {
            "node": "Edit Fields15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet65": {
      "main": [
        [
          {
            "node": "Send a text message74",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields14": {
      "main": [
        [
          {
            "node": "Update row in sheet65",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet66": {
      "main": [
        [
          {
            "node": "Send a text message77",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields15": {
      "main": [
        [
          {
            "node": "Update row in sheet66",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If21": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet38",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If28",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet38": {
      "main": [
        [
          {
            "node": "Code in JavaScript14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript14": {
      "main": [
        [
          {
            "node": "If22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If22": {
      "main": [
        [
          {
            "node": "Send a text message78",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet67",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet67": {
      "main": [
        [
          {
            "node": "Send a text message79",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet39": {
      "main": [
        [
          {
            "node": "If23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message80": {
      "main": [
        [
          {
            "node": "Send a text message81",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet68": {
      "main": [
        [
          {
            "node": "Send a text message80",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields16": {
      "main": [
        [
          {
            "node": "Update row in sheet68",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet69": {
      "main": [
        [
          {
            "node": "Edit Fields16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If23": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet40",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet41",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet40": {
      "main": [
        [
          {
            "node": "Update row in sheet69",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message82": {
      "main": [
        [
          {
            "node": "Send a text message83",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet70": {
      "main": [
        [
          {
            "node": "Send a text message82",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields17": {
      "main": [
        [
          {
            "node": "Update row in sheet70",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet41": {
      "main": [
        [
          {
            "node": "Update row in sheet71",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet71": {
      "main": [
        [
          {
            "node": "Edit Fields17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet42": {
      "main": [
        [
          {
            "node": "Code in JavaScript15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript15": {
      "main": [
        [
          {
            "node": "Send a text message84",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message84": {
      "main": [
        [
          {
            "node": "Update row in sheet72",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet29": {
      "main": [
        [
          {
            "node": "Code in JavaScript11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet50": {
      "main": [
        [
          {
            "node": "Send a text message54",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet1": {
      "main": [
        [
          {
            "node": "Edit Fields12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If15": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet32",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message57",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet31": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet32": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message55": {
      "main": [
        [
          {
            "node": "Send a text message56",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message57": {
      "main": [
        [
          {
            "node": "Edit Fields13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet53": {
      "main": [
        [
          {
            "node": "Send a text message55",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields12": {
      "main": [
        [
          {
            "node": "Update row in sheet53",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet54": {
      "main": [
        [
          {
            "node": "Send a text message58",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields13": {
      "main": [
        [
          {
            "node": "Update row in sheet54",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript11": {
      "main": [
        [
          {
            "node": "If16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If16": {
      "main": [
        [
          {
            "node": "Send a text message51",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet50",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If24": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet29",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet27": {
      "main": [
        [
          {
            "node": "Code in JavaScript10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet47": {
      "main": [
        [
          {
            "node": "Send a text message49",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch12": {
      "main": [
        [
          {
            "node": "Send a text message50",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message52",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If12": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet28",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Validar formato YYYY-MM-DD3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar formato YYYY-MM-DD3": {
      "main": [
        [
          {
            "node": "Update row in sheet48",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram Error5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram OK14": {
      "main": [
        [
          {
            "node": "Send a text message53",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet48": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message50": {
      "main": [
        [
          {
            "node": "Update row in sheet49",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet28": {
      "main": [
        [
          {
            "node": "Switch12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message52": {
      "main": [
        [
          {
            "node": "Edit Fields10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields10": {
      "main": [
        [
          {
            "node": "Update row in sheet51",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet52": {
      "main": [
        [
          {
            "node": "Edit Fields11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields11": {
      "main": [
        [
          {
            "node": "Update row in sheet55",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet55": {
      "main": [
        [
          {
            "node": "Telegram OK14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet30": {
      "main": [
        [
          {
            "node": "Update row in sheet52",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript10": {
      "main": [
        [
          {
            "node": "If13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If13": {
      "main": [
        [
          {
            "node": "Send a text message48",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet47",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If14": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet27",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript16": {
      "main": [
        [
          {
            "node": "If11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If11": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet12",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message85",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message86": {
      "main": [
        [
          {
            "node": "Update row in sheet73",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If25": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet43",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If35",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet43": {
      "main": [
        [
          {
            "node": "Code in JavaScript17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript17": {
      "main": [
        [
          {
            "node": "If26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If26": {
      "main": [
        [
          {
            "node": "Send a text message87",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet74",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet74": {
      "main": [
        [
          {
            "node": "Send a text message88",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet44": {
      "main": [
        [
          {
            "node": "Update row in sheet76",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message89": {
      "main": [
        [
          {
            "node": "Send a text message90",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet75": {
      "main": [
        [
          {
            "node": "Send a text message89",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields18": {
      "main": [
        [
          {
            "node": "Update row in sheet75",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet76": {
      "main": [
        [
          {
            "node": "Edit Fields18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message66": {
      "main": [
        [
          {
            "node": "Update row in sheet77",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message91": {
      "main": [
        [
          {
            "node": "Update row in sheet78",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet45": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet51",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message92": {
      "main": [
        [
          {
            "node": "Update row in sheet79",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message93": {
      "main": [
        [
          {
            "node": "Update row in sheet80",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If27": {
      "main": [
        [
          {
            "node": "Switch16",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch16": {
      "main": [
        [
          {
            "node": "Send a text message91",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet45",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message93",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message102",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message94",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message94": {
      "main": [
        [
          {
            "node": "Send a text message95",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch15": {
      "main": [
        [
          {
            "node": "Update row in sheet81",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet46",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get row(s) in sheet47",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet81": {
      "main": [
        [
          {
            "node": "Telegram OK18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet46": {
      "main": [
        [
          {
            "node": "Update row in sheet82",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet82": {
      "main": [
        [
          {
            "node": "Telegram OK19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet47": {
      "main": [
        [
          {
            "node": "Update row in sheet83",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet83": {
      "main": [
        [
          {
            "node": "Telegram OK20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch17": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet49",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet85",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet84",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet84": {
      "main": [
        [
          {
            "node": "Send a text message96",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet85": {
      "main": [
        [
          {
            "node": "Send a text message97",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet48": {
      "main": [
        [
          {
            "node": "Append row in sheet4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message98": {
      "main": [
        [
          {
            "node": "Edit Fields19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet86": {
      "main": [
        [
          {
            "node": "Send a text message99",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet49": {
      "main": [
        [
          {
            "node": "Code in JavaScript19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript19": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet50",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields19": {
      "main": [
        [
          {
            "node": "Update row in sheet86",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript20": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet48",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet50": {
      "main": [
        [
          {
            "node": "Code in JavaScript20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet4": {
      "main": [
        [
          {
            "node": "Append row in sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet3": {
      "main": [
        [
          {
            "node": "Send a text message98",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet51": {
      "main": [
        [
          {
            "node": "Code in JavaScript22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If28": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet39",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message100",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If29": {
      "main": [
        [
          {
            "node": "If20",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message101",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript22": {
      "main": [
        [
          {
            "node": "Send a text message92",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message102": {
      "main": [
        [
          {
            "node": "Update row in sheet87",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet52": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet55",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet88": {
      "main": [
        [
          {
            "node": "Send a text message104",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet3": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If30": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet54",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message107",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet53": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet56",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet54": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet53",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message105": {
      "main": [
        [
          {
            "node": "Send a text message106",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message107": {
      "main": [
        [
          {
            "node": "Edit Fields21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet89": {
      "main": [
        [
          {
            "node": "Send a text message105",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields20": {
      "main": [
        [
          {
            "node": "Update row in sheet89",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet90": {
      "main": [
        [
          {
            "node": "Send a text message108",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields21": {
      "main": [
        [
          {
            "node": "Update row in sheet90",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript18": {
      "main": [
        [
          {
            "node": "If31",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If31": {
      "main": [
        [
          {
            "node": "Send a text message103",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet88",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If32": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet52",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If30",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet55": {
      "main": [
        [
          {
            "node": "Code in JavaScript18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet4": {
      "main": [
        [
          {
            "node": "Edit Fields20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet56": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If33": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet57",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If36",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript21": {
      "main": [
        [
          {
            "node": "If34",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If34": {
      "main": [
        [
          {
            "node": "Send a text message109",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in sheet91",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet91": {
      "main": [
        [
          {
            "node": "Send a text message110",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet58": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet60",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message111": {
      "main": [
        [
          {
            "node": "Send a text message112",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet92": {
      "main": [
        [
          {
            "node": "Send a text message111",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields22": {
      "main": [
        [
          {
            "node": "Update row in sheet92",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet93": {
      "main": [
        [
          {
            "node": "Edit Fields22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet57": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet59",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet59": {
      "main": [
        [
          {
            "node": "Code in JavaScript21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If35": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet44",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message113",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message113": {
      "main": [
        [
          {
            "node": "Edit Fields23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet94": {
      "main": [
        [
          {
            "node": "Send a text message114",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields23": {
      "main": [
        [
          {
            "node": "Update row in sheet94",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If36": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet58",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send a text message115",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message115": {
      "main": [
        [
          {
            "node": "Edit Fields24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet95": {
      "main": [
        [
          {
            "node": "Send a text message116",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields24": {
      "main": [
        [
          {
            "node": "Update row in sheet95",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet60": {
      "main": [
        [
          {
            "node": "Update row in sheet93",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "2eebb51a-7276-4472-b877-02d435649090",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "2461c286aed77d4c7fbe9ed395a19fb04c04889a0855697eb6af572c2383f548"
  },
  "id": "oLcwfXTX5fJOF29bwAYKV",
  "tags": []
}